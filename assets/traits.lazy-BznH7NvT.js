import{r as c,j as e,B as h,c as j,m as v}from"./index-CydRzRMP.js";import{s as g}from"./sendData-Do9lSLzZ.js";import{A as N,P as p}from"./Popup-kHSnMXyH.js";const S=({setEdit:s,edit:n,description:l})=>{const{state:a}=JSON.parse(localStorage.getItem("character")??"{}"),[r,i]=c.useState(a.character.descriptions.featureTraits),[o,b]=c.useState(a.character.descriptions.racialTraits),[x,u]=c.useState(!1),d=async(t,f)=>{t.preventDefault(),await g("characters",a.character.id,{descriptions:{...a.character.descriptions,[l]:f}}),u(!1),s(!1)},m=(t,f)=>{t.preventDefault(),f(t.target.value),x===!1&&(u(!0),localStorage.setItem("character",JSON.stringify({state:{character:{...a.character,descriptions:{...a.character.descriptions,[l]:t.target.value}}},version:0}))),x===!0&&u(!1)};if(l==="racialTraits")return e.jsxs("form",{className:"relative h-full w-full overflow-scroll",onSubmit:t=>d(t,o),children:[e.jsx(N,{children:n&&e.jsxs(p,{closerFunc:s,children:[e.jsx(h,{styles:"w-full h-full mx-auto flex flex-col place-self-center",children:e.jsx("textarea",{className:"text-md h-full resize-none overflow-y-auto rounded-lg bg-base-300 p-5",placeholder:"What's on your mind?",value:o,onChange:t=>m(t,b)})}),e.jsxs("div",{className:"flex flex-row gap-5",children:[e.jsx("button",{type:"submit",className:"btn btn-accent",children:"Save"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>s(!1),children:"Close"})]})]})}),e.jsx("pre",{children:e.jsx("p",{className:"text-wrap",children:o})})]});if(l==="featureTraits")return e.jsxs("form",{className:"relative h-full w-full overflow-scroll",onSubmit:t=>d(t,r),children:[n&&e.jsxs(p,{closerFunc:s,children:[e.jsx(h,{styles:"w-full h-full mx-auto flex flex-col place-self-center",children:e.jsx("textarea",{className:"text-md h-full w-full resize-none overflow-y-auto rounded-lg bg-base-300 px-5",placeholder:"What's on your mind?",value:r,onChange:t=>m(t,i)})}),e.jsxs("div",{className:"flex flex-row gap-5",children:[e.jsx("button",{type:"submit",className:"btn btn-accent",children:"Save"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>s(!1),children:"Close"})]})]}),e.jsx("pre",{children:e.jsx("p",{className:"text-wrap",children:r})})]})},k=j("/traits")({component:w});function w(){const[s,n]=c.useState("racialTraits"),[l,a]=c.useState(!1),r=i=>{n(i)};return e.jsx(v.main,{initial:{opacity:0},animate:{opacity:1},className:"h-full overflow-hidden",children:e.jsxs(h,{styles:" relative w-full h-full pb-5 flex-col text-start gap-2 pl-5",children:[e.jsxs("div",{className:"flex w-full gap-2 bg-base-300 pt-5",children:[e.jsx("button",{onClick:()=>r("racialTraits"),className:"btn btn-ghost",children:"Racial Traits"}),e.jsx("button",{onClick:()=>r("featureTraits"),className:"btn btn-ghost",children:"Features & Traits"}),e.jsx("button",{className:"btn btn-accent absolute right-5 top-5",onClick:()=>a(!0),type:"button",children:"Edit"})]}),e.jsx(S,{setEdit:a,edit:l,description:s})]})})}export{k as Route};
