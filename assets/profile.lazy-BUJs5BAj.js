import{s as w,j as e,A as P,P as x,B as S,r as i,g as W,a as I,t as v,c as O,b as Y,d as G,u as B,C as L,m as R}from"./index-Dt7-Shkb.js";import{D as M}from"./DeleteButton-2Sn1nb9o.js";const q=async t=>{try{const{error:a}=await w.from("characters").delete().eq("id",t);if(a)throw a.message}catch(a){throw a}},z=({deleteID:t,setDeleteID:a,setIsDeleted:r,setIsDelete:n,toggle:o})=>{const l=async c=>{await q(c),r(!0),n(!1),a("")},u=c=>{c.preventDefault(),n(!1),a("")};return e.jsx(P,{children:o&&e.jsx(x,{closerFunc:n,toggle:o,children:e.jsxs(S,{styles:"fixed h-min px-10 py-16 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex flex-col gap-5",children:[e.jsx("p",{children:"Are you sure you want to continue?"}),e.jsxs("div",{className:"flex items-center justify-center gap-20",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>l(t),children:"Yes"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:u,children:"Cancel"})]})]})})})},N=async(t,a,r)=>{try{const{error:n}=await w.from("characters").insert({name:t.name,characterProfile:t,profileID:a,gamemode:r});if(n)throw n.message}catch(n){throw n}},U=({setCharacterProfile:t,characterProfile:a})=>e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",className:"input input-bordered w-full",placeholder:"Name",required:!0,onChange:r=>t({...a,name:r.target.value})}),e.jsx("input",{type:"number",className:"input input-bordered w-full",placeholder:"Level",required:!0,onChange:r=>t({...a,level:parseInt(r.target.value)})}),e.jsx("input",{type:"text",className:"input input-bordered w-full",placeholder:"Class",required:!0,onChange:r=>t({...a,class:r.target.value})}),e.jsx("input",{type:"text",className:"input input-bordered w-full",placeholder:"Subclass",onChange:r=>t({...a,subclass:r.target.value})}),e.jsx("input",{type:"text",className:"input input-bordered w-full",placeholder:"Race",required:!0,onChange:r=>t({...a,race:r.target.value})}),e.jsx("input",{type:"text",className:"input input-bordered w-full",placeholder:"Subrace",onChange:r=>t({...a,subrace:r.target.value})})]}),k=JSON.parse(`[{"id":"core_class_bard","name":"BARD","description":[{"paragraph":"Bards are the most charismatic people in all the realms. Members of this class are masters of captivation and specialize in a variety of performance types, including singing, playing musical instruments, weaving tales, or telling jokes. Whether performing for an audience or speaking to an individual, bards thrive in social situations. Members of this profession bond and train at schools or guilds, but a current of egotism runs through those of the bardic persuasion. While they may be the most likely class to bring people together, a bard of ill temper can just as easily tear a party apart."}],"domains":["GRACE","CODEX"],"startingEvasion":10,"startingHitPoints":5,"classItems":["A romance novel","A letter never opened"],"hopeFeature":{"name":"Make a Scene","description":[{"paragraph":"Spend 3 Hope to temporarily Distract a target within Close range, giving them a -2 penalty to their Difficulty."}]},"classFeatures":[{"description":[{"paragraph":"Once per session, describe how you rally the party and give yourself and each of your allies a Rally Die. At level 1, your Rally Die is a d6. A PC can spend their Rally Die to roll it, adding the result to their action roll, reaction roll, damage roll, or to clear a number of Stress equal to the result. At the end of each session, clear all unspent Rally Dice. At level 5, your Rally Die increases to a d8."}],"name":"Rally"}]},{"id":"core_class_druid","name":"DRUID","description":[{"paragraph":"Becoming a druid is more than an occupation; it's a calling for those who wish to learn from and protect the magic of the wilderness. While one might underestimate a gentle druid who practices the often-quiet work of cultivating flora, druids who channel the untamed forces of nature are terrifying to behold. Druids cultivate their abilities in small groups, often connected by a specific ethos or locale, but some choose to work alone. Through years of study and dedication, druids can learn to transform into beasts and shape nature itself."}],"domains":["SAGE","ARCANA"],"startingEvasion":10,"startingHitPoints":6,"classItems":["A small bag of rocks and bones","A strange pendant found in the dirt"],"hopeFeature":{"name":"Evolution","description":[{"paragraph":"Spend 3 Hope to transform into a Beastform without marking a Stress. When you do, choose one trait to raise by +1 until you drop out of that Beastform."}]},"classFeatures":[{"description":[{"paragraph":"Mark a Stress to magically transform into a creature of your tier or lower from the Beastform list. You can drop out of this form at any time. While transformed, you can't use weapons or cast spells from domain cards, but you can still use other features or abilities you have access to. Spells you cast before you transform stay active and last for their normal duration, and you can talk and communicate as normal. Additionally, you gain the Beastform's features, add their Evasion bonus to your Evasion, and use the trait specified in their statistics for your attack. While you're in a Beastform, your armor becomes part of your body and you mark Armor Slots as usual; when you drop out of a Beastform, those marked Armor Slots remain marked. If you mark your last Hit Point, you automatically drop out of this form."}],"name":"Beastform"},{"description":[{"paragraph":"You can perform harmless, subtle effects that involve nature -- such as causing a flower to rapidly grow, summoning a slight gust of wind, or starting a campfire -- at will."}],"name":"Wildtouch"}]},{"id":"core_class_guardian","name":"GUARDIAN","description":[{"paragraph":"The title of guardian represents an array of martial professions, speaking more to their moral compass and unshakeable fortitude than the means by which they fight. While many guardians join groups of militants for either a country or cause, they're more likely to follow those few they truly care for, majority be damned. Guardians are known for fighting with remarkable ferocity even against overwhelming odds, defending their cohort above all else. Woe betide those who harm the ally of a guardian, as the guardian will answer this injury in kind."}],"domains":["VALOR","BLADE"],"startingEvasion":9,"startingHitPoints":7,"classItems":["A totem from your mentor","A secret key"],"hopeFeature":{"name":"Frontline Tank","description":[{"paragraph":"Spend 3 Hope to clear 2 Armor Slots."}]},"classFeatures":[{"description":[{"paragraph":"Once per long rest, you can become Unstoppable. You gain an Unstoppable Die. At level 1, your Unstoppable Die is a d4. Place it on your character sheet in the space provided, starting with the 1 value facing up. After you make a damage roll that deals 1 or more Hit Points to a target, increase the Unstoppable Die value by one. When the die's value would exceed its maximum value or when the scene ends, remove the die and drop out of Unstoppable. At level 5, your Unstoppable Die increases to a d6."}],"name":"Unstoppable"},{"description":[{"list":["You reduce the severity of physical damage by one threshold (Severe to Major, Major to Minor, Minor to None).","You add the current value of the Unstoppable Die to your damage roll.","You can't be Restrained or Vulnerable."]}],"name":"While Unstoppable, you gain the following benefits:"}]},{"id":"core_class_ranger","name":"RANGER","description":[{"paragraph":"Rangers are highly skilled hunters who, despite their martial abilities, rarely lend their skills to an army. Through mastery of the body and a deep understanding of the wilderness, rangers become sly tacticians, pursuing their quarry with cunning and patience. Many rangers track and fight alongside an animal companion with whom they've forged a powerful spiritual bond. By honing their skills in the wild, rangers become expert trackers, as likely to ensnare their foes in a trap as they are to assail them head-on."}],"domains":["BONE","SAGE"],"startingEvasion":12,"startingHitPoints":6,"classItems":["A trophy from your first kill","A seemingly broken compass"],"hopeFeature":{"name":"Hold Them Off","description":[{"paragraph":"Spend 3 Hope when you succeed on an attack with a weapon to use that same roll against two additional adversaries within range of the attack."}]},"classFeatures":[{"description":[{"paragraph":"Spend a Hope and make an attack against a target. On a success, deal your attack's normal damage and temporarily make the attack's target your Focus. Until this feature ends or you make a different creature your Focus, you gain the following benefits against your Focus:"},{"list":["You know precisely what direction they are in.","When you deal damage to them, they must mark a Stress.","When you fail an attack against them, you can end your Ranger's Focus feature to reroll your Duality Dice."]}],"name":"Ranger's Focus"}]},{"id":"core_class_rogue","name":"ROGUE","description":[{"paragraph":"Rogues are scoundrels, often in both attitude and practice. Broadly known as liars and thieves, the best among this class move through the world anonymously. Utilizing their sharp wits and blades, rogues trick their foes through social manipulation as easily as breaking locks, climbing through windows, or dealing underhanded blows. These masters of magical craft manipulate shadow and movement, adding an array of useful and deadly tools to their repertoire. Rogues frequently establish guilds to meet future accomplices, hire out jobs, and hone secret skills, proving that there's honor among thieves for those who know where to look."}],"domains":["MIDNIGHT","GRACE"],"startingEvasion":12,"startingHitPoints":6,"classItems":["A set of forgery tools","A grappling hook"],"hopeFeature":{"name":"Rogue's Dodge","description":[{"paragraph":"Spend 3 Hope to gain a +2 bonus to your Evasion until the next time an attack succeeds against you. Otherwise, this bonus lasts until your next rest."}]},"classFeatures":[{"description":[{"paragraph":"Any time you would be Hidden, you are instead Cloaked. In addition to the benefits of the Hidden condition, while Cloaked you remain unseen if you are stationary when an adversary moves to where they would normally see you. After you make an attack or end a move within line of sight of an adversary, you are no longer Cloaked."}],"name":"Cloaked"},{"description":[{"paragraph":"When you succeed on an attack while Cloaked or while an ally is within Melee range of your target, add a number of d6s equal to your tier to your damage roll."},{"list":["Level 1 -> Tier 1","Levels 2-4 -> Tier 2","Levels 5-7 -> Tier 3","Levels 8-10 -> Tier 4"]}],"name":"Sneak Attack"}]},{"id":"core_class_seraph","name":"SERAPH","description":[{"paragraph":"Seraphs are divine fighters and healers imbued with sacred purpose. A wide array of deities exist within the realms, and thus numerous kinds of seraphs are appointed by these gods. Their ethos traditionally aligns with the domain or goals of their god, such as defending the weak, exacting vengeance, protecting a land or artifact, or upholding a particular faith. Some seraphs ally themselves with an army or locale, much to the satisfaction of their rulers, but other crusaders fight in opposition to the follies of the Mortal Realm. It is better to be a seraph's ally than their enemy, as they are terrifying foes to those who defy their purpose."}],"domains":["SPLENDOR","VALOR"],"startingEvasion":9,"startingHitPoints":7,"classItems":["A bundle of offerings","A sigil of your god"],"hopeFeature":{"name":"Life Support","description":[{"paragraph":"Spend 3 Hope to clear a Hit Point on an ally within Close range."}]},"classFeatures":[{"description":[{"paragraph":"At the beginning of each session, roll a number of d4s equal to your subclass's Spellcast trait and place them on your character sheet in the space provided. These are your Prayer Dice. You can spend any number of Prayer Dice to aid yourself or an ally within Far range. You can use a spent die's value to reduce incoming damage, add to a roll's result after the roll is made, or gain Hope equal to the result. At the end of each session, clear all unspent Prayer Dice."}],"name":"Prayer Dice"}]},{"id":"core_class_sorcerer","name":"SORCERER","description":[{"paragraph":"Not all innate magic users choose to hone their craft, but those who do can become powerful sorcerers. The gifts of these wielders are passed down through families, even if the family is unaware of or reluctant to practice them. A sorcerer's abilities can range from the elemental to the illusionary and beyond, and many practitioners band together into collectives based on their talents. The act of becoming a formidable sorcerer is not the practice of acquiring power, but learning to cultivate and control the power one already possesses. The magic of a misguided or undisciplined sorcerer is a dangerous force indeed."}],"domains":["ARCANA","MIDNIGHT"],"startingEvasion":10,"startingHitPoints":6,"classItems":["A whispering orb","A family heirloom"],"hopeFeature":{"name":"Volatile Magic","description":[{"paragraph":"Spend 3 Hope to reroll any number of your damage dice on an attack that deals magic damage."}]},"classFeatures":[{"description":[{"paragraph":"You can sense the presence of magical people and objects within Close range."}],"name":"Arcane Sense"},{"description":[{"paragraph":"Make a Spellcast Roll (10). On a success, you create a minor visual illusion no larger than yourself within Close range. This illusion is convincing to anyone at Close range or farther."}],"name":"Minor Illusion"},{"description":[{"paragraph":"Once per long rest, you can place a domain card from your loadout into your vault and choose to either:"},{"list":["Gain Hope equal to the level of the card.","Enhance a spell that deals damage, gaining a bonus to your damage roll equal to twice the level of the card."]}],"name":"Channel Raw Power"}]},{"id":"core_class_warrior","name":"WARRIOR","description":[{"paragraph":"Becoming a warrior requires years, often a lifetime, of training and dedication to the mastery of weapons and violence. While many who seek to fight hone only their strength, warriors understand the importance of an agile body and mind, making them some of the most sought-after fighters across the realms. Frequently, warriors find employment within an army, a band of mercenaries, or even a royal guard, but their potential is wasted in any position where they cannot continue to improve and expand their skills. Warriors are known to have a favored weapon; to come between them and their blade would be a grievous mistake."}],"domains":["BLADE","BONE"],"startingEvasion":11,"startingHitPoints":6,"classItems":["The drawing of a lover","A sharpening stone"],"hopeFeature":{"name":"No Mercy","description":[{"paragraph":"Spend 3 Hope to gain a +1 bonus to your attack rolls until your next rest."}]},"classFeatures":[{"description":[{"paragraph":"If an adversary within Melee range attempts to leave that range, make a reaction roll using a trait of your choice against their Difficulty. Choose one effect on a success, or two if you critically succeed:"},{"list":["They can't move from where they are.","You deal damage to them equal to your primary weapon's damage.","You move with them."]}],"name":"Attack of Opportunity"},{"description":[{"paragraph":"You ignore burden when equipping weapons. When you deal physical damage, you gain a bonus to your damage roll equal to your level."}],"name":"Combat Training"}]},{"id":"core_class_wizard","name":"WIZARD","description":[{"paragraph":"Whether through an institution or individual study, those known as wizards acquire and hone immense magical power over years of learning using a variety of tools, including books, stones, potions, and herbs. Some wizards dedicate their lives to mastering a particular school of magic, while others learn from a wide variety of disciplines. Many wizards become wise and powerful figures in their communities, advising rulers, providing medicines and healing, and even leading war councils. While these mages all work toward the common goal of collecting magical knowledge, wizards often have the most conflict within their own ranks, as the acquisition, keeping, and sharing of powerful secrets is a topic of intense debate that has resulted in innumerable deaths."}],"domains":["CODEX","SPLENDOR"],"startingEvasion":11,"startingHitPoints":5,"classItems":["A book you're trying to translate","A tiny, harmless elemental pet"],"hopeFeature":{"name":"Not This Time","description":[{"paragraph":"Spend 3 Hope to force an adversary within Far range to reroll an attack or damage roll."}]},"classFeatures":[{"description":[{"paragraph":"You can perform harmless, subtle magical effects at will. For example, you can change an object's color, create a smell, light a candle, cause a tiny object to float, illuminate a room, or repair a small object."}],"name":"Prestidigitation"},{"description":[{"paragraph":"Choose a number between 1 and 12. When you roll that number on a Duality Die, gain a Hope or clear a Stress."},{"paragraph":"You can change this number when you take a long rest."}],"name":"Strange Patterns"}]}]`),V=JSON.parse(`[{"id":"core_subclass_beastbound","name":"Beastbound","class":"RANGER","domains":["BONE","SAGE"],"spellcastTrait":"AGILITY","foundation":{"features":[{"name":"Companion","description":[{"paragraph":"You have an animal companion of your choice (at the GM's discretion). They stay by your side unless you tell them otherwise."},{"paragraph":"Take the Ranger Companion sheet. When you level up your character, choose a level-up option for your companion from this sheet as well."}]}]},"specialization":{"features":[{"name":"Expert Training","description":[{"paragraph":"Choose an additional level-up option for your companion."}]},{"name":"Battle-Bonded","description":[{"paragraph":"When an adversary attacks you while they're within your companion's Melee range, you gain a +2 bonus to your Evasion against the attack."}]}]},"mastery":{"features":[{"name":"Advanced Training","description":[{"paragraph":"Choose two additional level-up options for your companion."}]},{"name":"Loyal Friend","description":[{"paragraph":"Once per long rest, when the damage from an attack would mark your companion's last Stress or your last Hit Point and you're within Close range of each other, you or your companion can rush to the other's side and take that damage instead."}]}]}},{"id":"core_subclass_call_of_the_brave","name":"Call of the Brave","class":"WARRIOR","domains":["BLADE","BONE"],"foundation":{"features":[{"name":"Courage","description":[{"paragraph":"When you fail a roll with Fear, you gain a Hope."}]},{"name":"Battle Ritual","description":[{"paragraph":"Once per long rest, before you attempt something incredibly dangerous or face off against a foe who clearly outmatches you, describe what ritual you perform or preparations you make. When you do, clear 2 Stress and gain 2 Hope."}]}]},"specialization":{"features":[{"name":"Rise to the Challenge","description":[{"paragraph":"You are vigilant in the face of mounting danger. While you have 2 or fewer Hit Points unmarked, you can roll a d20 as your Hope Die."}]}]},"mastery":{"features":[{"name":"Camaraderie","description":[{"paragraph":"Your unwavering bravery is a rallying point for your allies. You can initiate a Tag Team Roll one additional time per session. Additionally, when an ally initiates a Tag Team Roll with you, they only need to spend 2 Hope to do so."}]}]}},{"id":"core_subclass_call_of_the_slayer","name":"Call of the Slayer","class":"WARRIOR","domains":["BLADE","BONE"],"foundation":{"features":[{"name":"Slayer","description":[{"paragraph":"You gain a pool of dice called Slayer Dice. On a roll with Hope, you can place a d6 on this card instead of gaining a Hope, adding the die to the pool. You can store a number of Slayer Dice equal to your Proficiency. When you make an attack roll or damage roll, you can spend any number of these Slayer Dice, rolling them and adding their result to the roll. At the end of each session, clear any unspent Slayer Dice on this card and gain a Hope per die cleared."}]}]},"specialization":{"features":[{"name":"Weapon Specialist","description":[{"paragraph":"You can wield multiple weapons with dangerous ease. When you succeed on an attack, you can spend a Hope to add one of the damage dice from your secondary weapon to the damage roll. Additionally, once per long rest when you roll your Slayer Dice, reroll any 1s."}]}]},"mastery":{"features":[{"name":"Martial Preparation","description":[{"paragraph":"You're an inspirational warrior to all who travel with you. Your party gains access to the Martial Preparation downtime move. To use this move during a rest, describe how you instruct and train with your party. You and each ally who chooses this downtime move gain a d6 Slayer Die. A PC with a Slayer Die can spend it to roll the die and add the result to an attack or damage roll of their choice."}]}]}},{"id":"core_subclass_divine_wielder","name":"Divine Wielder","class":"SERAPH","domains":["SPLENDOR","VALOR"],"spellcastTrait":"STRENGTH","foundation":{"features":[{"name":"Spirit Weapon","description":[{"paragraph":"When you have an equipped weapon with a range of Melee or Very Close, it can fly from your hand to attack an adversary within Close range and then return to you. You can mark a Stress to target an additional adversary within range with the same attack roll."}]},{"name":"Sparing Touch","description":[{"paragraph":"Once per long rest, touch a creature and clear 2 Hit Points or 2 Stress from them."}]}]},"specialization":{"features":[{"name":"Devout","description":[{"paragraph":"When you roll your Prayer Dice, you can roll an additional die and discard the lowest result. Additionally, you can use your “Sparing Touch” feature twice instead of once per long rest."}]}]},"mastery":{"features":[{"name":"Sacred Resonance","description":[{"paragraph":"When you roll damage for your “Spirit Weapon” feature, if any of the die results match, double the value of each matching die. For example, if you roll two 5s, they count as two 10s."}]}]}},{"id":"core_subclass_elemental_origin","name":"Elemental Origin","class":"SORCERER","domains":["MIDNIGHT","ARCANA"],"spellcastTrait":"INSTINCT","foundation":{"features":[{"name":"Elementalist","description":[{"paragraph":"Choose one of the following elements at character creation: Air, Earth, Fire, Lightning, or Water. You can shape this element into harmless effects. Additionally, spend a Hope and describe how your control over this element helps an action roll you're about to make, then either gain a +2 bonus to the roll or a +3 bonus to the roll's damage."}]}]},"specialization":{"features":[{"name":"Natural Evasion","description":[{"paragraph":"You can call forth your element to protect you from harm. When an attack roll against you succeeds, you can mark a Stress and describe how you use your element to defend you. When you do, roll a d6 and add its result to your Evasion against the attack."}]}]},"mastery":{"features":[{"name":"Transcendence","description":[{"paragraph":"Once per long rest, you can transform into a physical manifestation of your element. When you do, describe your transformation and choose two of the following benefits to gain until your next rest:"},{"list":["+4 bonus to your Severe threshold","+1 bonus to a character trait of your choice","+1 bonus to your Proficiency","+2 bonus to your Evasion"]}]}]}},{"id":"core_subclass_nightwalker","name":"Nightwalker","class":"ROGUE","domains":["MIDNIGHT","GRACE"],"spellcastTrait":"FINESSE","foundation":{"features":[{"name":"Shadow Stepper","description":[{"paragraph":"You can move from shadow to shadow. When you move into an area of darkness or a shadow cast by another creature or object, you can mark a Stress to disappear from where you are and reappear inside another shadow within Far range. When you reappear, you are Cloaked."}]}]},"specialization":{"features":[{"name":"Dark Cloud","description":[{"paragraph":"Make a Spellcast Roll (15). On a success, create a temporary dark cloud that covers any area within Close range. Anyone in this cloud can't see outside of it, and anyone outside of it can't see in. You're considered Cloaked from any adversary for whom the cloud blocks line of sight."}]},{"name":"Adrenaline","description":[{"paragraph":"While you're Vulnerable, add your level to your damage rolls."}]}]},"mastery":{"features":[{"name":"Fleeting Shadow","description":[{"paragraph":"Gain a permanent +1 bonus to your Evasion. You can use your “Shadow Stepper” feature to move within Very Far range."}]},{"name":"Vanishing Act","description":[{"paragraph":"Mark a Stress to become Cloaked at any time. When Cloaked from this feature, you automatically clear the Restrained condition if you have it. You remain Cloaked in this way until you roll with Fear or until your next rest."}]}]}},{"id":"core_subclass_primal_origin","name":"Primal Origin","class":"SORCERER","domains":["MIDNIGHT","ARCANA"],"spellcastTrait":"INSTINCT","foundation":{"features":[{"name":"Manipulate Magic","description":[{"paragraph":"Your primal origin allows you to modify the essence of magic itself. After you cast a spell or make an attack using a weapon that deals magic damage, you can mark a Stress to do one of the following:"},{"list":["Extend the spell or attack's reach by one range","Gain a +2 bonus to the action roll's result","Double a damage die of your choice","Hit an additional target within range"]}]}]},"specialization":{"features":[{"name":"Enchanted Aid","description":[{"paragraph":"You can enhance the magic of others with your essence. When you Help an Ally with a Spellcast Roll, you can roll a d8 as your advantage die. Once per long rest, after an ally has made a Spellcast Roll with your help, you can swap the results of their Duality Dice."}]}]},"mastery":{"features":[{"name":"Arcane Charge","description":[{"paragraph":"You can gather magical energy to enhance your capabilities. When you take magic damage, you become Charged. Alternatively, you can spend 2 Hope to become Charged. When you successfully make an attack that deals magic damage while Charged, you can clear your Charge to either gain a +10 bonus to the damage roll or gain a +3 bonus to the Difficulty of a reaction roll the spell causes the target to make. You stop being Charged at your next long rest."}]}]}},{"id":"core_subclass_school_of_knowledge","name":"School of Knowledge","class":"WIZARD","domains":["CODEX","SPLENDOR"],"spellcastTrait":"KNOWLEDGE","foundation":{"features":[{"name":"Prepared","description":[{"paragraph":"Take an additional domain card of your level or lower from a domain you have access to."}]},{"name":"Adept","description":[{"paragraph":"When you Utilize an Experience, you can mark a Stress instead of spending a Hope. If you do, double your Experience modifier for that roll."}]}]},"specialization":{"features":[{"name":"Accomplished","description":[{"paragraph":"Take an additional domain card of your level or lower from a domain you have access to."}]},{"name":"Perfect Recall","description":[{"paragraph":"Once per rest, when you recall a domain card in your vault, you can reduce its Recall Cost by 1."}]}]},"mastery":{"features":[{"name":"Brilliant","description":[{"paragraph":"Take an additional domain card of your level or lower from a domain you have access to."}]},{"name":"Honed Expertise","description":[{"paragraph":"When you use an Experience, roll a d6. On a result of 5 or higher, you can use it without spending Hope."}]}]}},{"id":"core_subclass_school_of_war","name":"School of War","class":"WIZARD","domains":["CODEX","SPLENDOR"],"spellcastTrait":"KNOWLEDGE","foundation":{"features":[{"name":"Battlemage","description":[{"paragraph":"You've focused your studies on becoming an unconquerable force on the battlefield. Gain an additional Hit Point slot."}]},{"name":"Face Your Fear","description":[{"paragraph":"When you succeed with Fear on an attack roll, you deal an extra 1d10 magic damage."}]}]},"specialization":{"features":[{"name":"Conjure Shield","description":[{"paragraph":"You can maintain a protective barrier of magic. While you have at least 2 Hope, you add your Proficiency to your Evasion."}]},{"name":"Fueled by Fear","description":[{"paragraph":"The extra magic damage from your “Face Your Fear” feature increases to 2d10."}]}]},"mastery":{"features":[{"name":"Thrive in Chaos","description":[{"paragraph":"When you succeed on an attack, you can mark a Stress after rolling damage to force the target to mark an additional Hit Point."}]},{"name":"Have No Fear","description":[{"paragraph":"The extra magic damage from your “Face Your Fear” feature increases to 3d10."}]}]}},{"id":"core_subclass_stalwart","name":"Stalwart","class":"GUARDIAN","domains":["VALOR","BLADE"],"foundation":{"features":[{"name":"Unwavering","description":[{"paragraph":"Gain a permanent +1 bonus to your damage thresholds."}]},{"name":"Iron Will","description":[{"paragraph":"When you take physical damage, you can mark an additional Armor Slot to reduce the severity."}]}]},"specialization":{"features":[{"name":"Unrelenting","description":[{"paragraph":"Gain a permanent +2 bonus to your damage thresholds."}]},{"name":"Partners-in-Arms","description":[{"paragraph":"When an ally within Very Close range takes damage, you can mark an Armor Slot to reduce the severity by one threshold."}]}]},"mastery":{"features":[{"name":"Undaunted","description":[{"paragraph":"Gain a permanent +3 bonus to your damage thresholds."}]},{"name":"Loyal Protector","description":[{"paragraph":"When an ally within Close range has 2 or fewer Hit Points and would take damage, you can mark a Stress to sprint to their side and take the damage instead."}]}]}},{"id":"core_subclass_syndicate","name":"Syndicate","class":"ROGUE","domains":["MIDNIGHT","GRACE"],"spellcastTrait":"FINESSE","foundation":{"features":[{"name":"Well-Connected","description":[{"paragraph":"When you arrive in a prominent town or environment, you know somebody who calls this place home. Give them a name, note how you think they could be useful, and choose one fact from the following list:"},{"list":["They owe me a favor, but they'll be hard to find.","They're going to ask for something in exchange.","They're always in a great deal of trouble.","We used to be together. It's a long story.","We didn't part on great terms."]}]}]},"specialization":{"features":[{"name":"Contacts Everywhere","description":[{"paragraph":"Once per session, you can briefly call on a shady contact. Choose one of the following benefits and describe what brought them here to help you in this moment:"},{"list":["They provide 1 handful of gold, a unique tool, or a mundane object that the situation requires.","On your next action roll, their help provides a +3 bonus to the result of your Hope or Fear Die.","The next time you deal damage, they snipe from the shadows, adding 2d8 to your damage roll."]}]}]},"mastery":{"features":[{"name":"Reliable Backup","description":[{"paragraph":"You can use your “Contacts Everywhere” feature three times per session. The following options are added to the list of benefits you can choose from when you use that feature:"},{"list":["When you mark 1 or more Hit Points, they can rush out to shield you, reducing the Hit Points marked by 1.","When you make a Presence Roll in conversation, they back you up. You can roll a d20 as your Hope Die."]}]}]}},{"id":"core_subclass_troubadour","name":"Troubadour","class":"BARD","domains":["GRACE","CODEX"],"spellcastTrait":"PRESENCE","foundation":{"features":[{"name":"Gifted Performer","description":[{"paragraph":"Describe how you perform for others. You can play each song once per long rest:"},{"list":["Relaxing Song: You and all allies within Close range clear a Hit Point.","Epic Song: Make a target within Close range temporarily Vulnerable.","Heartbreaking Song: You and all allies within Close range gain a Hope."]}]}]},"specialization":{"features":[{"name":"Maestro","description":[{"paragraph":"Your rallying songs steel the courage of those who listen. When you give a Rally Die to an ally, they can gain a Hope or clear a Stress."}]}]},"mastery":{"features":[{"name":"Virtuoso","description":[{"paragraph":"You are among the greatest of your craft and your skill is boundless. You can perform each of your “Gifted Performer” feature's songs twice instead of once per long rest."}]}]}},{"id":"core_subclass_vengeance","name":"Vengeance","class":"GUARDIAN","domains":["VALOR","BLADE"],"foundation":{"features":[{"name":"At Ease","description":[{"paragraph":"Gain an additional Stress slot."}]},{"name":"Revenge","description":[{"paragraph":"When an adversary within Melee range succeeds on an attack against you, you can mark 2 Stress to force the attacker to mark a Hit Point."}]}]},"specialization":{"features":[{"name":"Act of Reprisal","description":[{"paragraph":"When an adversary damages an ally within Melee range, you gain a +1 bonus to your Proficiency for the next successful attack you make against that adversary."}]}]},"mastery":{"features":[{"name":"Nemesis","description":[{"paragraph":"Spend 2 Hope to Prioritize an adversary until your next rest. When you make an attack against your Prioritized adversary, you can swap the results of your Hope and Fear Dice. You can only Prioritize one adversary at a time."}]}]}},{"id":"core_subclass_warden_of_renewal","name":"Warden of Renewal","class":"DRUID","domains":["SAGE","ARCANA"],"spellcastTrait":"INSTINCT","foundation":{"features":[{"name":"Clarity of Nature","description":[{"paragraph":"Once per long rest, you can create a space of natural serenity within Close range. When you spend a few minutes resting within the space, clear Stress equal to your Instinct, distributed as you choose between you and your allies."}]},{"name":"Regeneration","description":[{"paragraph":"Touch a creature and spend 3 Hope. That creature clears 1d4 Hit Points."}]}]},"specialization":{"features":[{"name":"Regenerative Reach","description":[{"paragraph":"You can target creatures within Very Close range with your “Regeneration” feature."}]},{"name":"Warden's Protection","description":[{"paragraph":"Once per long rest, spend 2 Hope to clear 2 Hit Points on 1d4 allies within Close range."}]}]},"mastery":{"features":[{"name":"Defender","description":[{"paragraph":"Your animal transformation embodies a healing guardian spirit. When you're in Beastform and an ally within Close range marks 2 or more Hit Points, you can mark a Stress to reduce the number of Hit Points they mark by 1."}]}]}},{"id":"core_subclass_warden_of_the_elements","name":"Warden of the Elements","class":"DRUID","domains":["SAGE","ARCANA"],"spellcastTrait":"INSTINCT","foundation":{"features":[{"name":"Elemental Incarnation","description":[{"paragraph":"Mark a Stress to Channel one of the following elements until you take Severe damage or until your next rest:"},{"list":["Fire: When an adversary within Melee range deals damage to you, they take 1d10 magic damage.","Earth: Gain a bonus to your damage thresholds equal to your Proficiency.","Water: When you deal damage to an adversary within Melee range, all other adversaries within Very Close range must mark a Stress.","Air: You can hover, gaining advantage on Agility Rolls."]}]}]},"specialization":{"features":[{"name":"Elemental Aura","description":[{"paragraph":"Once per rest while Channeling, you can assume an aura matching your element. The aura affects targets within Close range until your Channeling ends."},{"list":["Fire: When an adversary marks 1 or more Hit Points, they must also mark a Stress.","Earth: Your allies gain a +1 bonus to Strength.","Water: When an adversary deals damage to you, you can mark a Stress to move them anywhere within Very Close range of where they are.","Air: When you or an ally takes damage from an attack beyond Melee range, reduce the damage by 1d8."]}]}]},"mastery":{"features":[{"name":"Elemental Dominion","description":[{"paragraph":"You further embody your element. While Channeling, you gain the following benefit:"},{"list":["Fire: You gain a +1 bonus to your Proficiency for attacks and spells that deal damage.","Earth: When you would mark Hit Points, roll a d6 per Hit Point marked. For each result of 6, reduce the number of Hit Points you mark by 1.","Water: When an attack against you succeeds, you can mark a Stress to make the attacker temporarily Vulnerable.","Air: You gain a +1 bonus to your Evasion and can fly."]}]}]}},{"id":"core_subclass_wayfinder","name":"Wayfinder","class":"RANGER","domains":["BONE","SAGE"],"spellcastTrait":"AGILITY","foundation":{"features":[{"name":"Ruthless Predator","description":[{"paragraph":"When you make a damage roll, you can mark a Stress to gain a +1 bonus to your Proficiency. Additionally, when you deal Severe damage to an adversary, they must mark a Stress."}]},{"name":"Path Forward","description":[{"paragraph":"When you're traveling to a place you've previously visited or you carry an object that has been at the location before, you can identify the shortest, most direct path to your destination."}]}]},"specialization":{"features":[{"name":"Elusive Predator","description":[{"paragraph":"When your Focus makes an attack against you, you gain a +2 bonus to your Evasion against the attack."}]}]},"mastery":{"features":[{"name":"Apex Predator","description":[{"paragraph":"Before you make an attack roll against your Focus, you can spend a Hope. On a successful attack, you remove a Fear from the GM's Fear pool."}]}]}},{"id":"core_subclass_winged_sentinel","name":"Winged Sentinel","class":"SERAPH","domains":["SPLENDOR","VALOR"],"spellcastTrait":"STRENGTH","foundation":{"features":[{"name":"Wings of Light","description":[{"paragraph":"You can fly. While flying, you can do the following:"},{"list":["Mark a Stress to pick up and carry another willing creature approximately your size or smaller.","Spend a Hope to deal an extra 1d8 damage on a successful attack."]}]}]},"specialization":{"features":[{"name":"Ethereal Visage","description":[{"paragraph":"Your supernatural visage strikes awe and fear. While flying, you have advantage on Presence Rolls. When you succeed with Hope on a Presence Roll, you can remove a Fear from the GM's Fear pool instead of gaining Hope."}]}]},"mastery":{"features":[{"name":"Ascendant","description":[{"paragraph":"Gain a permanent +4 bonus to your Severe damage threshold."}]},{"name":"Power of the Gods","description":[{"paragraph":"While flying, you deal an extra 1d12 damage instead of 1d8 from your “Wings of Light” feature."}]}]}},{"id":"core_subclass_wordsmith","name":"Wordsmith","class":"BARD","domains":["GRACE","CODEX"],"spellcastTrait":"PRESENCE","foundation":{"features":[{"name":"Rousing Speech","description":[{"paragraph":"Once per long rest, you can give a heartfelt, inspiring speech. All allies within Far range clear 2 Stress."}]},{"name":"Heart of a Poet","description":[{"paragraph":"After you make an action roll to impress, persuade, or offend someone, you can spend a Hope to add a d4 to the roll."}]}]},"specialization":{"features":[{"name":"Eloquent","description":[{"paragraph":"Your moving words boost morale. Once per session, when you encourage an ally, you can do one of the following:"},{"list":["Allow them to find a mundane object or tool they need.","Help an Ally without spending Hope.","Give them an additional downtime move during their next rest."]}]}]},"mastery":{"features":[{"name":"Epic Poetry","description":[{"paragraph":"Your Rally Die increases to a d10. Additionally, when you Help an Ally, you can narrate the moment as if you were writing the tale of their heroism in a memoir. When you do, roll a d10 as your advantage die."}]}]}}]`);function j(t){return t.charAt(0).toUpperCase()+t.slice(1).toLocaleLowerCase()}const $=({setCharacterProfileDaggerheart:t,characterProfileDaggerheart:a,setClassDescription:r})=>{var n;return i.useEffect(()=>{var u,c;let o=(u=k.find(h=>h.name===a.class.toUpperCase()))==null?void 0:u.domains.map(h=>j(h)).join(" and ");o===void 0&&(o=""),t({...a,domains:o});let l=(c=k.find(h=>h.name===a.class.toUpperCase()))==null?void 0:c.description[0].paragraph;l===void 0&&(l=""),r(l)},[a.class]),i.useEffect(()=>{t({...a,class:"Bard",level:1,subclass:"Troubadour"})},[]),e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",className:"input input-bordered w-full",placeholder:"Name",required:!0,onChange:o=>t({...a,name:o.target.value})}),e.jsx("select",{className:"select select-bordered w-full",required:!0,value:a.class,onChange:o=>t({...a,class:o.target.value}),children:k.map(o=>e.jsx("option",{children:j(o.name)},o.id))}),e.jsx("input",{type:"text",className:"input w-full bg-accent user-select-none cursor-default  focus:outline-none",placeholder:"Domains",required:!0,readOnly:!0,value:`Domains: ${a.domains}`}),e.jsx("select",{className:"select select-bordered w-full",required:!0,value:a.level,onChange:o=>t({...a,level:parseInt(o.target.value)}),children:Array.from({length:10},(o,l)=>l+1).map(o=>e.jsx("option",{children:o},o))}),e.jsx("input",{type:"text",className:"input input-bordered w-full",placeholder:"Pronouns",required:!0,onChange:o=>t({...a,pronouns:o.target.value})}),e.jsx("input",{type:"text",className:"input input-bordered w-full",placeholder:"Heritage",onChange:o=>t({...a,heritage:o.target.value})}),e.jsx("select",{className:"select select-bordered w-full",value:a.subclass,onChange:o=>t({...a,subclass:o.target.value}),children:(n=V.filter(o=>o.class===a.class.toUpperCase()))==null?void 0:n.map(o=>e.jsx("option",{children:o.name},o.id))})]})},J=({openCreateCharacter:t,setOpenCreateCharacter:a,setIsSave:r,gameMode:n})=>{if(!t)return;const[o,l]=i.useState({class:"",level:0,name:"",race:"",subclass:"",subrace:""}),[u,c]=i.useState({name:"",class:"",domains:"",level:0,pronouns:"",heritage:"",subclass:""}),[h,y]=i.useState(""),f=async d=>{d.preventDefault();const{user:p}=JSON.parse(W());n==="D&D"&&await N(o,p.id,n),n==="Daggerheart"&&await N(u,p.id,n),r(!0),a(!1)};return e.jsxs("section",{className:"flex gap-10 w-full place-content-center",children:[e.jsxs(S,{styles:"relative h-min flex flex-col gap-5 justify-center items-center text-center px-20 py-10",children:[e.jsx("h2",{className:"text-4xl font-bold",children:"Create Your Character"}),e.jsxs("form",{className:"flex w-full flex-col gap-2",onSubmit:d=>f(d),children:[n==="D&D"&&e.jsx(U,{setCharacterProfile:l,characterProfile:o}),n==="Daggerheart"&&e.jsx($,{setCharacterProfileDaggerheart:c,characterProfileDaggerheart:u,setClassDescription:y}),e.jsxs("div",{className:"mt-10 flex gap-2",children:[e.jsx("button",{type:"submit",className:"btn btn-primary flex-1",children:"Create"}),e.jsx("button",{type:"button",className:"btn btn-secondary flex-1",onClick:()=>a(!1),children:"Cancel"})]})]})]}),e.jsxs("div",{className:"w-[30%] place-self-center flex flex-col gap-5",children:[e.jsx("h1",{className:"text-3xl text-accent",children:u.class}),e.jsx("p",{children:h})]})]})},X=({bucket:t,characterName:a})=>{const[r,n]=i.useState(`https://iyfoqgbhaxcedpmuvfkr.supabase.co/storage/v1/object/public/${t}/${a}.png`),[o,l]=i.useState(!1),[u,c]=i.useState(!0),h=async()=>{fetch(r,{method:"HEAD"}).then(async d=>{d.ok&&c(!1)})},y=async d=>{var b;d.preventDefault();const p=(b=d.target.elements[0].files)==null?void 0:b[0];if(!p)return;if((p==null?void 0:p.size)>307200){v({style:"bg-error text-base-100",message:"File is too large! Please keep file size below 300KB."});return}const{error:m}=await w.storage.from("characters").upload(`${a}.png`,p,{cacheControl:"0",upsert:!0});m||(l(!1),c(!1),n(g=>`${g}?t=${Date.now()}`),v({style:"bg-primary text-base-100",message:"Image changed!"}))},f=async()=>{await w.storage.from("characters").remove([`${a}.png`]),n(d=>`${d}?t=${Date.now()}`),l(!1),c(!0),v({style:"bg-primary text-base-100",message:"Image removed!"})};return i.useEffect(()=>{h()},[]),e.jsxs(e.Fragment,{children:[e.jsxs("button",{type:"button",className:"relative aspect-square w-24 overflow-hidden rounded-badge border-2 border-slate-900",onClick:()=>l(!0),children:[e.jsx("img",{src:r,onError:()=>c(!0),alt:(a.charAt(0)+a.charAt(1)).toUpperCase(),className:`object-cover object-top text-center text-4xl text-primary transition-opacity ${u&&"opacity-0"}`}),e.jsx("div",{className:`absolute inset-0 place-content-center text-center text-4xl text-primary transition-opacity opacity-0 ${u&&"opacity-100"}`,children:e.jsx("p",{children:(a.charAt(0)+a.charAt(1)).toUpperCase()})}),e.jsx("div",{className:"absolute inset-0 place-content-center bg-black/50 text-lg opacity-0 transition-opacity hover:opacity-100",children:e.jsx("p",{children:"Edit"})})]}),e.jsx(x,{closerFunc:l,toggle:o,children:e.jsxs("form",{onSubmit:y,className:"flex flex-col gap-5",children:[e.jsx("h2",{className:"mb-10 text-3xl text-accent",children:"Upload Image"}),e.jsx("input",{type:"file",accept:"image/*",className:"file-input file-input-bordered file-input-accent w-full max-w-xs flex-grow place-self-center"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",className:"btn btn-accent flex-grow",children:"Save"}),e.jsx("button",{type:"button",className:"btn btn-secondary flex-grow",onClick:d=>{d.preventDefault(),l(!1)},children:"Cancel"})]}),e.jsx(I,{text:"Remove Image",style:"border-secondary py-4 text-secondary hover:bg-secondary hover:text-white",event:f})]})})]})},K=({character:t,handleNavigateToCharacter:a})=>{var r,n;return e.jsx("li",{className:"flex h-full w-full items-center gap-5",onClick:()=>a(t),children:e.jsxs("div",{className:"text-start",children:[e.jsxs("p",{children:[t.characterProfile.name,", ",t.characterProfile.level]}),e.jsxs("p",{children:[t.characterProfile.race," ",(r=t.characterProfile)==null?void 0:r.subrace,", ",t.characterProfile.class," ",(n=t.characterProfile)==null?void 0:n.subclass]})]})})},Z=({character:t,handleNavigateToCharacter:a})=>{var r,n;return e.jsx("li",{className:"flex h-full w-full items-center gap-5",onClick:()=>a(t),children:e.jsxs("div",{className:"text-start",children:[e.jsxs("p",{children:[t.characterProfile.name,", ",t.characterProfile.level]}),e.jsxs("p",{children:[t.characterProfile.heritage,", ",(r=t.characterProfile)==null?void 0:r.domains,", ",t.characterProfile.class," ",(n=t.characterProfile)==null?void 0:n.subclass]})]})})},te=O("/profile")({component:Q});function Q(){const{characters:t,setCharacters:a}=Y(),{setCharacter:r}=G(),[n,o]=i.useState(!1),[l,u]=i.useState(""),[c,h]=i.useState(!1),[y,f]=i.useState(!1),[d,p]=i.useState(!1),[m,b]=i.useState(JSON.parse(JSON.stringify(localStorage.getItem("gameMode")))??"D&D"),g=i.useRef(null),{user:A}=JSON.parse(W()),C=B(),D=()=>{a(A.id)},E=s=>{r(s),C({to:`/${m==="D&D"?"dnd":"daggerheart"}/character/`})},H=s=>{u(s.id),p(!0)},T=s=>{m==="D&D"?(b("Daggerheart"),localStorage.setItem("gameMode","Daggerheart"),s.target.innerText="Dungeons&Dragons",s.target.classList.remove("btn-accent"),s.target.classList.add("btn-primary")):(b("D&D"),localStorage.setItem("gameMode","D&D"),s.target.innerText="Daggerheart",s.target.classList.remove("btn-primary"),s.target.classList.add("btn-accent"))},_=()=>{g.current&&(m==="Daggerheart"?(g.current.innerText="Dungeons&Dragons",g.current.classList.remove("btn-accent"),g.current.classList.add("btn-primary")):(g.current.innerText="Daggerheart",g.current.classList.remove("btn-primary"),g.current.classList.add("btn-accent")))};return i.useEffect(()=>{D(),_()},[]),i.useEffect(()=>{(n||y)&&D(),o(!1),f(!1)},[n,y]),e.jsx(L,{getResetKey:()=>"reset",onCatch:()=>C({to:"/"}),children:e.jsx(R.main,{className:"flex h-full w-full gap-5",initial:{opacity:0},animate:{opacity:1},children:e.jsxs(S,{styles:"w-full flex flex-col items-start gap-5 p-5 relative",children:[e.jsxs("section",{className:"flex w-full justify-between",children:[e.jsx("h1",{className:"text-5xl text-primary",children:A.user_metadata.username}),e.jsx("button",{ref:g,className:"btn btn-accent",onClick:T,children:"Daggerheart"})]}),e.jsxs("section",{className:" h-full w-full overflow-y-scroll",children:[e.jsxs("ul",{className:"flex w-full h-1 flex-col gap-2 text-xl",children:[t.filter(s=>s.gamemode===m).length===0&&e.jsx("p",{className:"text-xl text-accent text-left w-max",children:"Nothing forged yet!"}),t.filter(s=>s.gamemode===m).sort((s,F)=>new Date(s.created_at).getTime()-new Date(F.created_at).getTime()).map(s=>e.jsxs(R.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.35,ease:"easeOut",delay:0},className:"relative flex w-full items-center gap-5 rounded-badge border-2 border-slate-900 p-2 transition-colors hover:cursor-pointer hover:bg-slate-800",children:[e.jsx(X,{bucket:"characters",characterName:s.characterProfile.name.toLowerCase()}),m==="D&D"&&e.jsx(K,{character:s,handleNavigateToCharacter:E}),m==="Daggerheart"&&e.jsx(Z,{character:s,handleNavigateToCharacter:E}),e.jsx(M,{size:60,styles:" transition-colors rounded-badge  fill-base-300 hover:fill-slate-900 hover:stroke-secondary stroke-primary",event:()=>H(s)})]},s.id))]}),e.jsx(z,{toggle:d,deleteID:l,setDeleteID:u,setIsDeleted:o,setIsDelete:p})]}),e.jsx(x,{toggle:c,closerFunc:h,children:e.jsx(J,{openCreateCharacter:c,setOpenCreateCharacter:h,setIsSave:f,gameMode:m})}),e.jsx("button",{onClick:()=>h(!0),className:"btn btn-ghost btn-circle place-self-center border-2 border-primary text-primary hover:border-primary hover:bg-primary hover:text-base-100 hover:scale-[1.1]",children:"+"})]})})})}export{te as Route};
