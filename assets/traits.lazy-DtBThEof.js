import{r as c,j as e,A as j,P as p,B as h,c as v,m as g}from"./index-Dcl8iJ02.js";import{s as N}from"./sendData-BBSbCs8M.js";const S=({setEdit:s,edit:n,description:l})=>{const{state:t}=JSON.parse(localStorage.getItem("character")??"{}"),[r,i]=c.useState(t.character.descriptions.featureTraits),[o,b]=c.useState(t.character.descriptions.racialTraits),[x,u]=c.useState(!1),d=async(a,f)=>{a.preventDefault(),await N("characters",t.character.id,{descriptions:{...t.character.descriptions,[l]:f}}),u(!1),s(!1)},m=(a,f)=>{a.preventDefault(),f(a.target.value),x===!1&&(u(!0),localStorage.setItem("character",JSON.stringify({state:{character:{...t.character,descriptions:{...t.character.descriptions,[l]:a.target.value}}},version:0}))),x===!0&&u(!1)};if(l==="racialTraits")return e.jsxs("form",{className:"relative h-full w-full overflow-scroll",onSubmit:a=>d(a,o),children:[e.jsx(j,{children:n&&e.jsxs(p,{closerFunc:s,children:[e.jsx(h,{styles:"w-full h-full mx-auto flex flex-col place-self-center",children:e.jsx("textarea",{className:"text-md h-full resize-none overflow-y-auto rounded-lg bg-base-300 p-5",placeholder:"What's on your mind?",value:o,onChange:a=>m(a,b)})}),e.jsxs("div",{className:"flex flex-row gap-5",children:[e.jsx("button",{type:"submit",className:"btn btn-accent",children:"Save"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>s(!1),children:"Close"})]})]})}),e.jsx("pre",{children:e.jsx("p",{className:"text-wrap",children:o})})]});if(l==="featureTraits")return e.jsxs("form",{className:"relative h-full w-full overflow-scroll",onSubmit:a=>d(a,r),children:[n&&e.jsxs(p,{closerFunc:s,children:[e.jsx(h,{styles:"w-full h-full mx-auto flex flex-col place-self-center",children:e.jsx("textarea",{className:"text-md h-full w-full resize-none overflow-y-auto rounded-lg bg-base-300 px-5",placeholder:"What's on your mind?",value:r,onChange:a=>m(a,i)})}),e.jsxs("div",{className:"flex flex-row gap-5",children:[e.jsx("button",{type:"submit",className:"btn btn-accent",children:"Save"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>s(!1),children:"Close"})]})]}),e.jsx("pre",{children:e.jsx("p",{className:"text-wrap",children:r})})]})},C=v("/traits")({component:w});function w(){const[s,n]=c.useState("racialTraits"),[l,t]=c.useState(!1),r=i=>{n(i)};return e.jsx(g.main,{initial:{opacity:0},animate:{opacity:1},className:"h-full overflow-hidden",children:e.jsxs(h,{styles:" relative w-full h-full pb-5 flex-col text-start gap-2 pl-5",children:[e.jsxs("div",{className:"flex w-full gap-2 bg-base-300 pt-5",children:[e.jsx("button",{onClick:()=>r("racialTraits"),className:"btn btn-ghost",children:"Racial Traits"}),e.jsx("button",{onClick:()=>r("featureTraits"),className:"btn btn-ghost",children:"Features & Traits"}),e.jsx("button",{className:"btn btn-accent absolute right-5 top-5",onClick:()=>t(!0),type:"button",children:"Edit"})]}),e.jsx(S,{setEdit:t,edit:l,description:s})]})})}export{C as Route};
