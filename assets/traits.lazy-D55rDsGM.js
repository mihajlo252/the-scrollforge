import{r as c,j as e,B as h,c as g,m as v}from"./index-BYDkNLcK.js";import{s as N}from"./sendData-BjkzO84l.js";import{A as S,P as b}from"./Popup-CALYqZIe.js";const w=({setEdit:s,edit:n,description:r})=>{const{state:t}=JSON.parse(localStorage.getItem("character")??"{}"),[l,i]=c.useState(t.character.descriptions.featureTraits),[o,j]=c.useState(t.character.descriptions.racialTraits),[x,u]=c.useState(!1),d=async(a,f)=>{a.preventDefault(),await N("characters",t.character.id,{descriptions:{...t.character.descriptions,[r]:f}}),u(!1),s(!1)},m=(a,f,p)=>{a.preventDefault(),f(a.target.value),x===!1&&a.target.value!==p&&(u(!0),localStorage.setItem("character",JSON.stringify({state:{character:{...t.character,descriptions:{...t.character.descriptions,[r]:a.target.value}}},version:0}))),x===!0&&a.target.value==p&&u(!1)};if(r==="racialTraits")return e.jsxs("form",{className:"relative h-full w-full overflow-scroll",onSubmit:a=>d(a,o),children:[e.jsx(S,{children:n&&e.jsxs(b,{closerFunc:s,children:[e.jsx(h,{styles:"w-full h-full mx-auto flex flex-col place-self-center",children:e.jsx("textarea",{className:"text-md h-full resize-none overflow-y-auto rounded-lg bg-base-300 p-5",placeholder:"What's on your mind?",value:o,onChange:a=>m(a,j,t.character.descriptions.racialTraits)})}),e.jsxs("div",{className:"flex flex-row gap-5",children:[e.jsx("button",{type:"submit",className:"btn btn-accent",children:"Save"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>s(!1),children:"Close"})]})]})}),e.jsx("pre",{children:e.jsx("p",{className:"text-wrap",children:o})})]});if(r==="featureTraits")return e.jsxs("form",{className:"relative h-full w-full overflow-scroll",onSubmit:a=>d(a,l),children:[n&&e.jsxs(b,{closerFunc:s,children:[e.jsx(h,{styles:"w-full h-full mx-auto flex flex-col place-self-center",children:e.jsx("textarea",{className:"text-md h-full w-full resize-none overflow-y-auto rounded-lg bg-base-300 px-5",placeholder:"What's on your mind?",value:l,onChange:a=>m(a,i,t.character.descriptions.featureTraits)})}),e.jsxs("div",{className:"flex flex-row gap-5",children:[e.jsx("button",{type:"submit",className:"btn btn-accent",children:"Save"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>s(!1),children:"Close"})]})]}),e.jsx("pre",{children:e.jsx("p",{className:"text-wrap",children:l})})]})},D=g("/traits")({component:y});function y(){const[s,n]=c.useState("racialTraits"),[r,t]=c.useState(!1),l=i=>{n(i)};return e.jsx(v.main,{initial:{opacity:0},animate:{opacity:1},className:"h-full overflow-hidden",children:e.jsxs(h,{styles:" relative w-full h-full pb-5 flex-col text-start gap-2 pl-5",children:[e.jsxs("div",{className:"flex w-full gap-2 bg-base-300 pt-5",children:[e.jsx("button",{onClick:()=>l("racialTraits"),className:"btn btn-ghost",children:"Racial Traits"}),e.jsx("button",{onClick:()=>l("featureTraits"),className:"btn btn-ghost",children:"Features & Traits"}),e.jsx("button",{className:"btn btn-accent absolute right-5 top-5",onClick:()=>t(!0),type:"button",children:"Edit"})]}),e.jsx(w,{setEdit:t,edit:r,description:s})]})})}export{D as Route};
