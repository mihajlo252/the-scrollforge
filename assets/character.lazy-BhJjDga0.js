import{r as i,j as e,B as J,t as Ne,P as U,c as ve,m as Pe,L as M}from"./index-DYKX9XjB.js";import{s as V}from"./sendData-B5_R8LnY.js";import{L as Se,D as we,N as Ce}from"./Notes-DTyqsgZz.js";const T=({stat:s})=>Math.floor((s-10)/2),k=({stat:s})=>{const l=T({stat:s});return l>=0?"+"+l:l},D=({stat:s,proficiencyBonus:l,proficiency:t})=>{const r=T({stat:s});return t?"+"+(r+l):r>=0?"+"+r:r},u=({stat:s,proficiencyBonus:l,proficiency:t})=>{const r=T({stat:s});return t==="proficient"?r+l>0?"+"+(r+l):r+l:t==="expert"?r+l*2>0?"+"+(r+l*2):r+l*2:r>=0?"+"+r:r},He=({stat:s,proficiencyBonus:l,proficiency:t})=>{const r=T({stat:s});return t==="proficient"?10+r+l:t==="expert"?10+r+l*2:10+r},R=({level:s})=>{if(s<5)return"2";if(s>=5&&s<=8)return"3";if(s>=9&&s<=12)return"4";if(s>=13&&s<=16)return"5";if(s>=17)return"6"},Ie=({setStatChange:s})=>{const{state:l}=JSON.parse(localStorage.getItem("character")),t=l.character;if(!t)return;const{characterProfile:r,stats:{primaryStats:a}}=t,[p,b]=i.useState(a.str),[n,j]=i.useState(a.dex),[m,h]=i.useState(a.con),[d,P]=i.useState(a.int),[v,x]=i.useState(a.wis),[S,w]=i.useState(a.cha),[H,$]=i.useState(r.level),N=(c,C)=>{if(c.target.value.length>2||c.target.value>30){Ne({style:"bg-secondary text-white",message:"You've exceeded the limit!"});return}c.target.value[0]==="0"&&(c.target.value=c.target.value.slice(1)),c.target.value===0&&(c.target.value=0),c.target.style.width=c.target.value.length+"ch",c.target.value.length==0&&(c.target.style.width="7ch"),C(parseInt(c.target.value));const{state:I}=JSON.parse(localStorage.getItem("character")),L=I.character.stats.maxHP;localStorage.setItem("character",JSON.stringify({state:{character:{...t,stats:{...t.stats,maxHP:L,primaryStats:{...t.stats.primaryStats,[c.target.name]:parseInt(c.target.value)}}}},version:0})),s(!0)},o=c=>{$(parseInt(c.target.value)||0);const{state:C}=JSON.parse(localStorage.getItem("character")),I=C.character.stats.maxHP;localStorage.setItem("character",JSON.stringify({state:{character:{...t,stats:{...t.stats,maxHP:I},characterProfile:{...t.characterProfile,level:parseInt(c.target.value)||0}}},version:0})),s(!0)};return e.jsxs(J,{styles:"grid h-full w-full grid-cols-2 items-center justify-between border-2 border-slate-900 bg-base-300 px-5 text-neutral",children:[e.jsx("div",{className:"flex gap-2",children:e.jsxs("div",{className:"text-start",children:[e.jsxs("p",{children:[r.name,", Level ",e.jsx("input",{type:"text",placeholder:"0",className:"max-w-[2ch] rounded-lg border-[1px] border-slate-700 bg-slate-900 text-center focus-within:outline-0",value:H??0,onChange:c=>o(c)})]}),e.jsx("hr",{}),e.jsxs("p",{children:[r.class," ",r.subclass,", ",r.race," ",r.subrace]})]})}),e.jsxs("div",{className:"flex flex-col gap-[5px] text-2xl",children:[e.jsxs("div",{className:"grid grid-cols-6",children:[e.jsx("p",{children:"STR"}),e.jsx("p",{children:"DEX"}),e.jsx("p",{children:"CON"}),e.jsx("p",{children:"INT"}),e.jsx("p",{children:"WIS"}),e.jsx("p",{children:"CHA"})]}),e.jsx("hr",{}),e.jsxs("div",{className:"grid grid-cols-6",children:[e.jsxs("div",{className:"flex items-center justify-center gap-0",children:[e.jsx("input",{type:"number",placeholder:"0",className:"max-w-[2ch] rounded-lg border-[1px] border-slate-700 bg-slate-900 text-center text-base-content focus-within:outline-0",value:p??0,name:"str",onChange:c=>N(c,b)}),e.jsx("span",{className:"text-sm text-primary",children:k({stat:p})})]}),e.jsxs("div",{className:"flex items-center justify-center gap-0",children:[e.jsx("input",{type:"number",placeholder:"0",name:"dex",className:"max-w-[2ch] rounded-lg border-[1px] border-slate-700 bg-slate-900 text-center text-base-content focus-within:outline-0",value:n??0,onChange:c=>N(c,j)}),e.jsx("span",{className:"text-sm text-primary",children:k({stat:n})})]}),e.jsxs("div",{className:"flex items-center justify-center gap-0",children:[e.jsx("input",{type:"number",placeholder:"0",name:"con",className:"max-w-[2ch] rounded-lg border-[1px] border-slate-700 bg-slate-900 text-center text-base-content focus-within:outline-0",value:m??0,onChange:c=>N(c,h)}),e.jsx("span",{className:"text-sm text-primary",children:k({stat:m})})]}),e.jsxs("div",{className:"flex items-center justify-center gap-0",children:[e.jsx("input",{type:"number",placeholder:"0",name:"int",className:"max-w-[2ch] rounded-lg border-[1px] border-slate-700 bg-slate-900 text-center text-base-content focus-within:outline-0",value:d??0,onChange:c=>N(c,P)}),e.jsx("span",{className:"text-sm text-primary",children:k({stat:d})})]}),e.jsxs("div",{className:"flex items-center justify-center gap-0",children:[e.jsx("input",{type:"number",placeholder:"0",name:"wis",className:"max-w-[2ch] rounded-lg border-[1px] border-slate-700 bg-slate-900 text-center text-base-content focus-within:outline-0",value:v??0,onChange:c=>N(c,x)}),e.jsx("span",{className:"text-sm text-primary",children:k({stat:v})})]}),e.jsxs("div",{className:"flex items-center justify-center gap-0",children:[e.jsx("input",{type:"number",placeholder:"0",name:"cha",className:"max-w-[2ch] rounded-lg border-[1px] border-slate-700 bg-slate-900 text-center text-base-content focus-within:outline-0",value:S??0,onChange:c=>N(c,w)}),e.jsx("span",{className:"text-sm text-primary",children:k({stat:S})})]})]})]})]})},ke=({maxHP:s,characterID:l})=>{const{state:t}=JSON.parse(JSON.parse(JSON.stringify(localStorage.getItem("character")))),[r,a]=i.useState(t.character.currentHP/100*(100/s)),[p,b]=i.useState(t.character.currentHP),[n,j]=i.useState(t.character.currentHP),[m,h]=i.useState(!1),[d,P]=i.useState(s),[v,x]=i.useState(!1),S=o=>{parseInt(o.target.value)===0&&a(0),a(parseInt(o.target.value)/100*(100/d)),b(parseInt(o.target.value)),m===!1&&h(!0),m===!0&&parseInt(o.target.value)===n&&h(!1)},w=()=>{p!==0&&(a((p-1)/100*(100/d)),b(p-1),m===!1&&h(!0),m===!0&&p-1===n&&h(!1))},H=()=>{p<d&&(a((p+1)/100*(100/d)),b(p+1),m===!1&&h(!0),m===!0&&p+1===n&&h(!1))},$=async(o,c)=>{o.preventDefault(),await V("characters",l,{currentHP:c,stats:{...t.character.stats,maxHP:d}}),j(c),t.character.currentHP=c,localStorage.setItem("character",JSON.stringify({state:{...t,character:{...t.character,currentHP:c,stats:{...t.character.stats,maxHP:d}}},version:1})),m===!0&&h(!1)},N=async o=>{o.preventDefault();const c=o.target.value.length===0||parseInt(o.target.value)<0?0:parseInt(o.target.value);P(c),b(I=>I+c-d);const C=p+c-d;setTimeout(()=>a(C/100*(100/c)),0),m===!1&&h(!0),m===!0&&parseInt(o.target.value)===n&&h(!1)};return e.jsxs("div",{className:"relative flex h-full w-full flex-col items-center justify-center gap-5",children:[e.jsx(U,{closerFunc:x,toggle:v,children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[e.jsx("label",{htmlFor:"maxHP",children:"Max HP"}),e.jsx("input",{type:"number",value:d||"0",id:"maxHP",onChange:o=>N(o),className:"input input-bordered w-[10ch]"}),e.jsx("button",{type:"button",className:"btn btn-secondary mt-5 flex-1",onClick:()=>x(!1),children:"Close"})]})}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{type:"button",className:"btn btn-ghost absolute left-0 top-0 h-[2rem] min-h-[2rem] border-2 border-primary text-primary hover:bg-primary hover:text-base-100",onClick:()=>x(!0),children:"Edit"}),m&&e.jsx("form",{className:"absolute right-0 top-0 flex flex-col items-center justify-center gap-2",onSubmit:o=>$(o,p),children:e.jsx("button",{type:"submit",className:`btn h-[2rem] min-h-[2rem] btn-ghost place-self-center border-2 border-accent text-accent hover:border-accent hover:bg-accent hover:text-base-100 ${m?"":"btn-disabled"}`,children:"Save"})}),e.jsxs("div",{className:"relative h-[6rem] w-[6rem] overflow-hidden rounded-[100vh] border-4 border-primary",children:[e.jsx("div",{className:"h-full w-full origin-bottom bg-gradient-to-b from-[#5f0000] to-[#290a0a]",style:{transform:`scaleY(${r})`}}),e.jsxs("p",{className:"user-select-none absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:[p,"/",d]}),e.jsx("input",{type:"range",value:p,className:"absolute left-1/2 top-0 h-[5.5rem] w-full -translate-x-1/2 -rotate-90 touch-none opacity-0",min:0,max:d,step:1,onChange:o=>S(o)})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("button",{className:"btn btn-primary",onClick:H,children:"+"}),e.jsx("button",{className:"btn btn-primary",onClick:w,children:"-"})]})]})]})},$e=({character:s,setStatChange:l})=>{const{stats:{primaryStats:t,saveThrowsProficiency:r,skillProficiency:a},characterProfile:{level:p,class:b}}=s;let n=parseInt(R({level:p})||"0");const[j,m]=i.useState(a.acrobatics),[h,d]=i.useState(a.animalHandling),[P,v]=i.useState(a.arcana),[x,S]=i.useState(a.athletics),[w,H]=i.useState(a.deception),[$,N]=i.useState(a.history),[o,c]=i.useState(a.insight),[C,I]=i.useState(a.intimidation),[L,Z]=i.useState(a.investigation),[B,ee]=i.useState(a.medicine),[z,te]=i.useState(a.nature),[X,ae]=i.useState(a.perception),[Y,se]=i.useState(a.performance),[F,re]=i.useState(a.persuasion),[_,ce]=i.useState(a.religion),[q,ie]=i.useState(a.sleightOfHand),[G,ne]=i.useState(a.stealth),[K,le]=i.useState(a.survival),[oe,pe]=i.useState(r.str),[xe,me]=i.useState(r.dex),[de,fe]=i.useState(r.con),[ue,he]=i.useState(r.wis),[ye,be]=i.useState(r.int),[ge,je]=i.useState(r.cha),W=(y,g)=>{const{state:A}=JSON.parse(localStorage.getItem("character")),E=A.character.stats.maxHP;localStorage.setItem("character",JSON.stringify({state:{character:{...s,stats:{...s.stats,maxHP:E,skillProficiency:{...s.stats.skillProficiency,[y]:g}}}},version:0}))},Q=(y,g)=>{const{state:A}=JSON.parse(localStorage.getItem("character")),E=A.character.stats.maxHP;localStorage.setItem("character",JSON.stringify({state:{character:{...s,stats:{...s.stats,maxHP:E,saveThrowsProficiency:{...s.stats.saveThrowsProficiency,[y]:g}}}}}))},f=(y,g)=>{const A=["artificer","bard","ranger","rogue","wizard","redacted"];a[y]===""?(g("proficient"),W(y,"proficient")):a[y]==="proficient"&&A.includes(b.toLowerCase())?(g("expert"),W(y,"expert")):(g(""),W(y,"")),l(!0)},O=(y,g)=>{r[y]?(g(!1),Q(y,!1)):(g(!0),Q(y,!0)),l(!0)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex w-full flex-col items-center gap-2",children:[e.jsx("h3",{className:"text-[1.875rem] underline",children:"Saving throws"}),e.jsxs("ul",{className:"flex gap-2 text-[1.25rem]",children:[e.jsxs("li",{className:`relative flex flex-col ${oe?"text-primary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>O("str",pe)}),"STR",e.jsx("span",{className:"text-primary",children:D({stat:t.str,proficiencyBonus:n,proficiency:r.str})})]}),e.jsxs("li",{className:`relative flex flex-col ${xe?"text-primary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>O("dex",me)}),"DEX",e.jsx("span",{className:"text-primary",children:D({stat:t.dex,proficiencyBonus:n,proficiency:r.dex})})]}),e.jsxs("li",{className:`relative flex flex-col ${de?"text-primary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>O("con",fe)}),"CON",e.jsx("span",{className:"text-primary",children:D({stat:t.con,proficiencyBonus:n,proficiency:r.con})})]}),e.jsxs("li",{className:`relative flex flex-col ${ye?"text-primary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>O("int",be)}),"INT",e.jsx("span",{className:"text-primary",children:D({stat:t.int,proficiencyBonus:n,proficiency:r.int})})]}),e.jsxs("li",{className:`relative flex flex-col ${ue?"text-primary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>O("wis",he)}),"WIS",e.jsx("span",{className:"text-primary",children:D({stat:t.wis,proficiencyBonus:n,proficiency:r.wis})})]}),e.jsxs("li",{className:`relative flex flex-col ${ge?"text-primary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>O("cha",je)}),"CHA",e.jsx("span",{className:"text-primary",children:D({stat:t.cha,proficiencyBonus:n,proficiency:r.cha})})]})]})]}),e.jsxs("div",{className:"flex w-full flex-col items-center gap-1",children:[e.jsx("h3",{className:"text-[1.875rem] underline",children:"Skills"}),e.jsxs("div",{className:"flex flex-row items-center gap-2",children:[e.jsxs("ul",{className:"flex flex-col items-end justify-end border-r-[1px] border-primary border-opacity-50 text-[0.85rem]",children:[e.jsxs("li",{className:`relative flex border-b-[1px] border-primary border-opacity-50 ${j==="proficient"?"text-primary":j==="expert"?"text-secondary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>f("acrobatics",m)}),"Acrobatics (Dex)",e.jsx("span",{className:"w-[3ch] px-1 text-primary",children:u({stat:t.dex,proficiencyBonus:n,proficiency:a.acrobatics})})]}),e.jsxs("li",{className:`relative flex border-b-[1px] border-primary border-opacity-50 ${h==="proficient"?"text-primary":h==="expert"?"text-secondary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>f("animalHandling",d)}),"Animal Handling (Wis)",e.jsx("span",{className:"w-[3ch] px-1 text-primary",children:u({stat:t.wis,proficiencyBonus:n,proficiency:a.animalHandling})})]}),e.jsxs("li",{className:`relative flex border-b-[1px] border-primary border-opacity-50 ${P==="proficient"?"text-primary":P==="expert"?"text-secondary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>f("arcana",v)}),"Arcana (Int)",e.jsx("span",{className:"w-[3ch] px-1 text-primary",children:u({stat:t.int,proficiencyBonus:n,proficiency:a.arcana})})]}),e.jsxs("li",{className:`relative flex border-b-[1px] border-primary border-opacity-50 ${x==="proficient"?"text-primary":x==="expert"?"text-secondary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>f("athletics",S)}),"Athletics (Str)",e.jsx("span",{className:"w-[3ch] px-1 text-primary",children:u({stat:t.str,proficiencyBonus:n,proficiency:a.athletics})})]}),e.jsxs("li",{className:`relative flex border-b-[1px] border-primary border-opacity-50 ${w==="proficient"?"text-primary":w==="expert"?"text-secondary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>f("deception",H)}),"Deception (Cha)",e.jsx("span",{className:"w-[3ch] px-1 text-primary",children:u({stat:t.cha,proficiencyBonus:n,proficiency:a.deception})})]}),e.jsxs("li",{className:`relative flex border-b-[1px] border-primary border-opacity-50 ${$==="proficient"?"text-primary":$==="expert"?"text-secondary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>f("history",N)}),"History (Int)",e.jsx("span",{className:"w-[3ch] px-1 text-primary",children:u({stat:t.int,proficiencyBonus:n,proficiency:a.history})})]}),e.jsxs("li",{className:`relative flex border-b-[1px] border-primary border-opacity-50 ${o==="proficient"?"text-primary":o==="expert"?"text-secondary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>f("insight",c)}),"Insight (Wis)",e.jsx("span",{className:"w-[3ch] px-1 text-primary",children:u({stat:t.wis,proficiencyBonus:n,proficiency:a.insight})})]}),e.jsxs("li",{className:`relative flex border-b-[1px] border-primary border-opacity-50 ${C==="proficient"?"text-primary":C==="expert"?"text-secondary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>f("intimidation",I)}),"Intimidation (Cha)",e.jsx("span",{className:"w-[3ch] px-1 text-primary",children:u({stat:t.cha,proficiencyBonus:n,proficiency:a.intimidation})})]}),e.jsxs("li",{className:`relative flex ${L==="proficient"?"text-primary":L==="expert"?"text-secondary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>f("investigation",Z)}),"Investigation (Int)",e.jsx("span",{className:"w-[3ch] px-1 text-primary",children:u({stat:t.int,proficiencyBonus:n,proficiency:a.investigation})})]})]}),e.jsxs("ul",{className:"flex flex-col items-start border-l-[1px] border-primary border-opacity-50 text-[0.85rem]",children:[e.jsxs("li",{className:`relative flex border-b-[1px] border-primary border-opacity-50 ${B==="proficient"?"text-primary":B==="expert"?"text-secondary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>f("medicine",ee)}),e.jsx("span",{className:"w-[3ch] px-1 text-primary",children:u({stat:t.wis,proficiencyBonus:n,proficiency:a.medicine})}),"Medicine (Wis)"]}),e.jsxs("li",{className:`relative flex border-b-[1px] border-primary border-opacity-50 ${z==="proficient"?"text-primary":z==="expert"?"text-secondary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>f("nature",te)}),e.jsx("span",{className:"w-[3ch] px-1 text-primary",children:u({stat:t.int,proficiencyBonus:n,proficiency:a.nature})}),"Nature (Int)"]}),e.jsxs("li",{className:`relative flex border-b-[1px] border-primary border-opacity-50 ${X==="proficient"?"text-primary":X==="expert"?"text-secondary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>f("perception",ae)}),e.jsx("span",{className:"w-[3ch] px-1 text-primary",children:u({stat:t.wis,proficiencyBonus:n,proficiency:a.perception})}),"Perception (Wis)"]}),e.jsxs("li",{className:`relative flex border-b-[1px] border-primary border-opacity-50 ${Y==="proficient"?"text-primary":Y==="expert"?"text-secondary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>f("performance",se)}),e.jsx("span",{className:"w-[3ch] px-1 text-primary",children:u({stat:t.cha,proficiencyBonus:n,proficiency:a.performance})}),"Performance (Cha)"]}),e.jsxs("li",{className:`relative flex border-b-[1px] border-primary border-opacity-50 ${F==="proficient"?"text-primary":F==="expert"?"text-secondary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>f("persuasion",re)}),e.jsx("span",{className:"w-[3ch] px-1 text-primary",children:u({stat:t.cha,proficiencyBonus:n,proficiency:a.persuasion})}),"Persuasion (Cha)"]}),e.jsxs("li",{className:`relative flex border-b-[1px] border-primary border-opacity-50 ${_==="proficient"?"text-primary":_==="expert"?"text-secondary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>f("religion",ce)}),e.jsx("span",{className:"w-[3ch] px-1 text-primary",children:u({stat:t.int,proficiencyBonus:n,proficiency:a.religion})}),"Religion (Int)"]}),e.jsxs("li",{className:`relative flex border-b-[1px] border-primary border-opacity-50 ${q==="proficient"?"text-primary":q==="expert"?"text-secondary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>f("sleightOfHand",ie)}),e.jsx("span",{className:"w-[3ch] px-1 text-primary",children:u({stat:t.dex,proficiencyBonus:n,proficiency:a.sleightOfHand})}),"Sleight of Hand (Dex)"]}),e.jsxs("li",{className:`relative flex border-b-[1px] border-primary border-opacity-50 ${K==="proficient"?"text-primary":K==="expert"?"text-secondary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>f("survival",le)}),e.jsx("span",{className:"w-[3ch] px-1 text-primary",children:u({stat:t.wis,proficiencyBonus:n,proficiency:a.survival})}),"Survival (Wis)"]}),e.jsxs("li",{className:`relative flex ${G==="proficient"?"text-primary":G==="expert"?"text-secondary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>f("stealth",ne)}),e.jsx("span",{className:"w-[3ch] px-1 text-primary",children:u({stat:t.dex,proficiencyBonus:n,proficiency:a.stealth})}),"Stealth (Dex)"]})]})]})]})]})},Oe=({character:s,setStatChange:l})=>{const{characterProfile:{level:t},stats:{ac:r,hitDice:a,primaryStats:{wis:p,dex:b},skillProficiency:{perception:n}}}=s,[j,m]=i.useState(r),[h,d]=i.useState(a);let P=parseInt(R({level:t})||"0");const v=(x,S)=>{x.target.value[0]==="0"&&(x.target.value=x.target.value.slice(1)),S(x.target.value);const{state:w}=JSON.parse(localStorage.getItem("character")),H=w.character.stats.maxHP;localStorage.setItem("character",JSON.stringify({state:{character:{...s,stats:{...s.stats,[x.target.name]:x.target.value,maxHP:H}}},version:0})),l(!0)};return e.jsxs("ul",{className:"flex w-full flex-col items-start",children:[e.jsxs("li",{children:[" ","Passive Perception:"," ",e.jsxs("span",{className:"text-primary",children:["+",He({stat:p,proficiencyBonus:P,proficiency:n})]})]}),e.jsxs("li",{children:[" ","Proficiency: ",e.jsxs("span",{className:"text-primary",children:["+",R({level:s.characterProfile.level})]})]}),e.jsxs("li",{children:[" ","Initiative: ",e.jsx("span",{className:"text-primary",children:k({stat:b})})]}),e.jsxs("li",{children:[" ","AC:"," ",e.jsx("input",{type:"number",placeholder:"0",name:"ac",className:"max-w-[4ch] rounded-lg border-[1px] border-slate-700 bg-slate-900 text-center focus-within:outline-0",value:j??"",onChange:x=>v(x,m)})]}),e.jsxs("li",{children:[" ","Hit Dice:"," ",e.jsx("input",{type:"text",placeholder:"0",name:"hitDice",className:"max-w-[6ch] rounded-lg border-[1px] border-slate-700 bg-slate-900 text-center focus-within:outline-0",value:h??"",onChange:x=>v(x,d)})]})]})},We=ve("/dnd/character")({component:De});function De(){const{state:s}=JSON.parse(localStorage.getItem("character")??"{}"),[l,t]=i.useState(!1),[r,a]=i.useState(!1),[p,b]=i.useState(!1);if(!s.character)return e.jsx(Se,{});const n=async j=>{await V("characters",s.character.id,{stats:{...j},characterProfile:{...s.character.characterProfile}}),a(!1)};return i.useEffect(()=>{t(!1),l&&a(!0)},[l]),e.jsxs(Pe.main,{className:"grid h-full w-full grid-rows-[.2fr_1fr] gap-2",initial:{opacity:0},animate:{opacity:1},children:[r&&e.jsx("button",{className:"btn btn-ghost absolute top-5 m-0 h-min min-h-0 place-self-center border-2 border-accent px-4 py-2 text-accent hover:border-accent hover:bg-accent hover:text-base-100 active:-translate-x-1/2",onClick:()=>n(s.character.stats),children:"Save Character"}),e.jsx(Ie,{setStatChange:t}),e.jsxs("section",{className:"flex gap-2",children:[e.jsx(J,{styles:"w-[50%] flex flex-col gap-2 p-5",children:e.jsx($e,{character:s.character,setStatChange:t})}),e.jsxs("div",{className:"flex h-full w-[40%] flex-col gap-2",children:[e.jsxs("div",{className:"flex h-full w-full gap-2",children:[e.jsx(J,{styles:"w-[50%] flex justify-around items-center p-2",children:e.jsx(ke,{maxHP:s.character.stats.maxHP,characterID:s.character.id})}),e.jsx(J,{styles:"w-[50%] flex justify-around items-center p-5",children:e.jsx(we,{})})]}),e.jsx(J,{styles:"w-full flex justify-around items-center p-5",children:e.jsx(Oe,{character:s.character,setStatChange:t})})]}),e.jsxs(J,{styles:"flex flex-1 flex-col gap-3 py-3 px-2 justify-center h-full w-full",children:[e.jsx(M,{to:"/dnd/traits",className:"btn btn-primary w-full",children:"Traits"}),e.jsx(M,{to:"/dnd/attacks",className:"btn btn-primary w-full",children:"Attacks"}),e.jsx(M,{to:"/dnd/spells",className:"btn btn-primary w-full",children:"Spells"}),e.jsx(M,{to:"/dnd/inspiration",className:"btn btn-primary w-full",children:"Inspiration"}),e.jsx("button",{onClick:()=>b(!0),className:"btn btn-primary w-full",children:"Notes"})]})]}),e.jsx(U,{closerFunc:b,toggle:p,children:e.jsx(Ce,{})})]})}export{We as Route};
