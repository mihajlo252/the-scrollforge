import{j as e,r as l,B as g,c as u,m as p,P as m}from"./index-yhRaaFJe.js";import{L as f,N as j,D as b}from"./Notes-_1BzygFL.js";import{s as v}from"./sendData-CahUmN6-.js";const S=({name:s,stat:c})=>e.jsxs("div",{className:"flex flex-col gap-2 text-lg",children:[e.jsx("p",{children:s}),e.jsx("p",{children:c})]}),N=({setStatChange:s})=>{const{state:c}=JSON.parse(localStorage.getItem("character")),r=c.character;if(!r)return;const{characterProfile:a,stats:{baseStats:o}}=r,[h,i]=l.useState(a.level),x=t=>{i(parseInt(t.target.value)||0);const{state:n}=JSON.parse(localStorage.getItem("character")),d=n.character.stats.maxHP;localStorage.setItem("character",JSON.stringify({state:{character:{...r,stats:{...r.stats,maxHP:d},characterProfile:{...r.characterProfile,level:parseInt(t.target.value)||0}}},version:0})),s(!0)};return e.jsxs(g,{styles:"flex gap-10 w-full items-center justify-between rounded-lg border-2 border-slate-900 bg-base-300 px-5 text-neutral",children:[e.jsx("div",{className:"grid grid-cols-2 gap-[5px] text-2xl",children:Object.entries(o).map((t,n)=>e.jsx(S,{name:Object.values(t)[0],stat:Object.keys(t)[0]},n))}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("div",{className:"text-start",children:[e.jsxs("p",{children:[a.name,", Level"," ",e.jsx("input",{type:"text",placeholder:"0",className:"max-w-[2ch] rounded-lg border-[1px] border-slate-700 bg-slate-900 text-center focus-within:outline-0",value:h??0,onChange:t=>x(t)})]}),e.jsx("hr",{}),e.jsxs("p",{children:[a.ancestry," ",a.community,", ",a.class," ",a.subclass,", ",a.domains]})]})})]})},I=u("/daggerheart/character")({component:y});function y(){const{state:s}=JSON.parse(localStorage.getItem("character")??"{}"),[c,r]=l.useState(!1),[a,o]=l.useState(!1),[h,i]=l.useState(!1),[x,t]=l.useState(!1);if(!s.character)return e.jsx(f,{});const n=async d=>{await v("characters",s.character.id,{stats:{...d},characterProfile:{...s.character.characterProfile}}),o(!1)};return l.useEffect(()=>{r(!1),c&&o(!0)},[c]),e.jsxs(p.main,{className:"grid h-full w-full grid-rows-[.2fr_1fr] gap-5",initial:{opacity:0},animate:{opacity:1},children:[a&&e.jsx("button",{className:"btn btn-ghost absolute top-5 m-0 h-min min-h-0 place-self-center border-2 border-accent px-4 py-2 text-accent hover:border-accent hover:bg-accent hover:text-base-100 active:-translate-x-1/2",onClick:()=>n(s.character.stats),children:"Save Character"}),e.jsxs("section",{className:"flex gap-5",children:[e.jsx(N,{setStatChange:r}),e.jsx(g,{styles:"w-[10%] flex flex-col justify-start",children:e.jsxs("nav",{className:"flex flex-col gap-3 p-3",children:[e.jsx("button",{onClick:()=>i(!0),className:"btn btn-primary",children:"Notes"}),e.jsx("button",{className:"btn btn-primary",onClick:()=>t(!0),children:"Dice"})]})})]}),e.jsx(m,{closerFunc:i,toggle:h,children:e.jsx(j,{})}),e.jsx(m,{closerFunc:t,toggle:x,children:e.jsx(g,{styles:"w-[20%] flex justify-around items-center p-5",children:e.jsx(b,{})})})]})}export{I as Route};
