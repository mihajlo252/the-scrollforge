import{j as e,s as u,r as o,c as g,m as v,L as S}from"./index-C2i-Aci7.js";import{B as x}from"./BoxSection-Dz45blc1.js";const w=({primaryStats:s,primaryMods:a,characterProfile:l})=>e.jsxs("header",{className:"grid h-full w-full grid-cols-2 items-center justify-between rounded-lg border-2 border-slate-900 bg-base-300 px-5 text-neutral",children:[e.jsx("div",{className:"flex gap-2",children:e.jsxs("div",{className:"text-start",children:[e.jsxs("p",{children:[l.name,", ",l.level]}),e.jsx("hr",{}),e.jsxs("p",{children:[l.class," ",l.subclass,", ",l.race," ",l.subrace]})]})}),e.jsxs("div",{className:"text-2xl",children:[e.jsxs("div",{className:"grid grid-cols-6",children:[e.jsx("p",{children:"STR"}),e.jsx("p",{children:"DEX"}),e.jsx("p",{children:"CON"}),e.jsx("p",{children:"INT"}),e.jsx("p",{children:"WIS"}),e.jsx("p",{children:"CHA"})]}),e.jsx("hr",{}),e.jsxs("div",{className:"grid grid-cols-6",children:[e.jsxs("p",{children:[s.str,e.jsxs("span",{className:"text-sm",children:["+",a.str]})]}),e.jsxs("p",{children:[s.dex,e.jsxs("span",{className:"text-sm",children:["+",a.dex]})]}),e.jsxs("p",{children:[s.con,e.jsxs("span",{className:"text-sm",children:["+",a.con]})]}),e.jsxs("p",{children:[s.int,e.jsxs("span",{className:"text-sm",children:["+",a.int]})]}),e.jsxs("p",{children:[s.wis,e.jsxs("span",{className:"text-sm",children:["+",a.wis]})]}),e.jsxs("p",{children:[s.cha,e.jsxs("span",{className:"text-sm",children:["+",a.cha]})]})]})]})]}),y=async(s,a,l)=>{const{error:i}=await u.from(s).update({currentHP:l}).eq("id",a);if(i)throw i},I=({maxHP:s,currentHP:a,characterID:l})=>{const[i,d]=o.useState(a/100*(100/s)),[r,h]=o.useState(a),[n,t]=o.useState(!1),j=c=>{d(parseInt(c.target.value)/100*(100/s)),h(parseInt(c.target.value)),n===!1&&t(!0),n===!0&&parseInt(c.target.value)===a&&t(!1)};let p=JSON.parse(JSON.stringify(localStorage.getItem("character")));const f=()=>{r!==0&&(d((r-1)/100*(100/s)),h(r-1),n===!1&&t(!0),n===!0&&r-1===a&&t(!1))},N=()=>{r<s&&(d((r+1)/100*(100/s)),h(r+1),n===!1&&t(!0),n===!0&&r+1===a&&t(!1))},b=(c,m)=>{c.preventDefault(),y("characters",l,m),p.currentHP=m,localStorage.setItem("character",JSON.stringify({state:{character:p}})),n===!0&&t(!1)};return e.jsxs("div",{className:"relative flex h-full w-full items-center justify-end gap-5 px-10",children:[n&&e.jsx("form",{onSubmit:c=>b(c,r),children:e.jsx("button",{type:"submit",className:"btn btn-accent",children:"Save"})}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("div",{className:"relative h-[120px] w-[120px] overflow-hidden rounded-[100vh] border-4 border-neutral",children:[e.jsx("div",{className:"h-full w-full origin-bottom bg-gradient-to-b from-[#560000] to-[#980000]",style:{transform:`scaleY(${i})`}}),e.jsxs("p",{className:"user-select-none absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:[r,"/",s]}),e.jsx("input",{type:"range",value:r,className:"absolute left-1/2 top-0 h-[120px] w-full -translate-x-1/2 -rotate-90 touch-none opacity-0",min:0,max:s,step:1,onChange:c=>j(c)})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("button",{className:"btn btn-primary",onClick:N,children:"+"}),e.jsx("button",{className:"btn btn-primary",onClick:f,children:"-"})]})]})]})},C=({saveThrows:s,skills:a})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex w-full flex-col items-center gap-1",children:[e.jsx("h3",{className:"text-[1.875rem] underline",children:"Saving throws"}),e.jsxs("ul",{className:"flex gap-2 text-[1.25rem]",children:[e.jsxs("li",{className:"flex flex-col",children:["STR",e.jsxs("span",{children:["+",s.str]})]}),e.jsxs("li",{className:"flex flex-col",children:["DEX",e.jsxs("span",{children:["+",s.dex]})]}),e.jsxs("li",{className:"flex flex-col",children:["CON",e.jsxs("span",{children:["+",s.con]})]}),e.jsxs("li",{className:"flex flex-col",children:["INT",e.jsxs("span",{children:["+",s.int]})]}),e.jsxs("li",{className:"flex flex-col",children:["WIS",e.jsxs("span",{children:["+",s.wis]})]}),e.jsxs("li",{className:"flex flex-col",children:["CHA",e.jsxs("span",{children:["+",s.cha]})]})]})]}),e.jsxs("div",{className:"flex w-full flex-col items-center gap-1",children:[e.jsx("h3",{className:"text-[1.875rem] underline",children:"Skills"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("ul",{className:"flex flex-col text-[0.75rem]",children:[e.jsxs("li",{className:"flex gap-2 border-b-2",children:[e.jsxs("span",{className:"border-r-2 pr-2",children:["+",a.acrobatics]}),"Acrobatics (Dex)"]}),e.jsxs("li",{className:"flex gap-2 border-b-2",children:[e.jsxs("span",{className:"border-r-2 pr-2",children:["+",a.animalHandling]}),"Animal Handling (Wis)"]}),e.jsxs("li",{className:"flex gap-2 border-b-2",children:[e.jsxs("span",{className:"border-r-2 pr-2",children:["+",a.arcana]}),"Arcana (Int)"]}),e.jsxs("li",{className:"flex gap-2 border-b-2",children:[e.jsxs("span",{className:"border-r-2 pr-2",children:["+",a.athletics]}),"Athletics (Str)"]}),e.jsxs("li",{className:"flex gap-2 border-b-2",children:[e.jsxs("span",{className:"border-r-2 pr-2",children:["+",a.deception]}),"Deception (Cha)"]}),e.jsxs("li",{className:"flex gap-2 border-b-2",children:[e.jsxs("span",{className:"border-r-2 pr-2",children:["+",a.history]}),"History (Int)"]}),e.jsxs("li",{className:"flex gap-2 border-b-2",children:[e.jsxs("span",{className:"border-r-2 pr-2",children:["+",a.insight]}),"Insight (Wis)"]}),e.jsxs("li",{className:"flex gap-2 border-b-2",children:[e.jsxs("span",{className:"border-r-2 pr-2",children:["+",a.intimidation]}),"Intimidation (Cha)"]}),e.jsxs("li",{className:"flex gap-2",children:[e.jsxs("span",{className:"border-r-2 pr-2",children:["+",a.investigation]}),"Investigation (Int)"]})]}),e.jsxs("ul",{className:"flex flex-col text-[0.75rem]",children:[e.jsxs("li",{className:"flex gap-2 border-b-2",children:[e.jsxs("span",{className:"border-r-2 pr-2",children:["+",a.medicine]}),"Medicine (Wis)"]}),e.jsxs("li",{className:"flex gap-2 border-b-2",children:[e.jsxs("span",{className:"border-r-2 pr-2",children:["+",a.nature]}),"Nature (Int)"]}),e.jsxs("li",{className:"flex gap-2 border-b-2",children:[e.jsxs("span",{className:"border-r-2 pr-2",children:["+",a.perception]}),"Perception (Wis)"]}),e.jsxs("li",{className:"flex gap-2 border-b-2",children:[e.jsxs("span",{className:"border-r-2 pr-2",children:["+",a.performance]}),"Performance (Cha)"]}),e.jsxs("li",{className:"flex gap-2 border-b-2",children:[e.jsxs("span",{className:"border-r-2 pr-2",children:["+",a.persuasion]}),"Persuasion (Cha)"]}),e.jsxs("li",{className:"flex gap-2 border-b-2",children:[e.jsxs("span",{className:"border-r-2 pr-2",children:["+",a.religion]}),"Religion (Int)"]}),e.jsxs("li",{className:"flex gap-2 border-b-2",children:[e.jsxs("span",{className:"border-r-2 pr-2",children:["+",a.sleightOfHand]}),"Sleight of Hand (Dex)"]}),e.jsxs("li",{className:"flex gap-2 border-b-2",children:[e.jsxs("span",{className:"border-r-2 pr-2",children:["+",a.survival]}),"Survival (Wis)"]}),e.jsxs("li",{className:"flex gap-2",children:[e.jsxs("span",{className:"border-r-2 pr-2",children:["+",a.stealth]}),"Stealth (Dex)"]})]})]})]})]}),H=()=>e.jsx("div",{children:"Loading..."}),A=g("/character")({component:D});function D(){const{state:s}=JSON.parse(JSON.parse(JSON.stringify(localStorage.getItem("character"))));return s.character?e.jsxs(v.main,{className:"grid h-full w-full grid-rows-[.2fr_1fr] gap-5",initial:{opacity:0},animate:{opacity:1},children:[e.jsx(w,{primaryStats:s.character.stats.primaryStats,primaryMods:s.character.stats.primaryMods,characterProfile:s.character.characterProfile}),e.jsxs("section",{className:"flex gap-5",children:[e.jsx(x,{styles:"w-[40%] flex flex-col gap-5 p-5",children:e.jsx(C,{saveThrows:s.character.stats.saveThrows,skills:s.character.stats.skills})}),e.jsxs("div",{className:"flex h-full w-[50%] flex-col gap-5",children:[e.jsx(x,{styles:"w-full flex justify-around items-center p-5",children:e.jsx(I,{maxHP:s.character.stats.maxHP,currentHP:s.character.currentHP,characterID:s.character.id})}),e.jsx(x,{styles:"w-full p-5",children:"a"})]}),e.jsx(x,{styles:"w-[10%] flex flex-col py-5",children:e.jsx("nav",{className:"flex flex-col gap-5 p-3",children:e.jsx(S,{to:"/traits",className:"btn btn-primary",children:"Traits"})})})]})]}):e.jsx(H,{})}export{A as Route};
