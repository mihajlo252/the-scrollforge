import{s as m,r as c,j as e,B as g,c as b,b as y,u as v,g as w,a as k,C as P,m as C}from"./index-P0EqCVBe.js";const N=async({bucket:a,folder:t,name:r})=>{try{let l=`${t}/${r}`;t==""&&(l=r);const{data:o}=m.storage.from(a).getPublicUrl(l);return o}catch(l){throw l}},S=({bucket:a,folder:t,name:r,alt:l,fallbackSrc:o})=>{const[x,i]=c.useState(o),[d,n]=c.useState(!1),u=async()=>{const{publicUrl:h}=await N({bucket:a,folder:t,name:r});if(h.endsWith("null")){n(!0);return}i(h)};return c.useEffect(()=>{u()},[]),e.jsx("img",{src:x,alt:l,className:`h-20 w-20 rounded-badge border-2 border-slate-900 ${d?"opacity-50 p-2":""}`})},D=async a=>{try{const{error:t}=await m.from("characters").delete().eq("id",a);if(t)throw t.message}catch(t){throw t}},M=({deleteID:a,setDeleteID:t,setIsDeleted:r})=>{const l=async o=>{await D(o),r(!0),t("")};return e.jsxs(g,{styles:`fixed h-min px-10 py-16 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex flex-col gap-5 ${a!=""?"flex":"hidden"}`,children:[e.jsx("p",{children:"Are you sure you want to continue?"}),e.jsxs("div",{className:"flex items-center justify-center gap-20",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>l(a),children:"Yes"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>t(""),children:"Cancel"})]})]})},z=({size:a,styles:t,event:r})=>e.jsx("button",{className:t,onClick:r,children:e.jsxs("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"493.5,266.5,110,110",children:[e.jsx("g",{id:"document",strokeWidth:"0",strokeLinecap:"butt",strokeLinejoin:"miter",strokeMiterlimit:"10",strokeDasharray:"",strokeDashoffset:"0",fontFamily:"none",fontWeight:"none",fontSize:"none",textAnchor:"none",children:e.jsx("rect",{x:"3140.45455",y:"1211.36364",transform:"scale(0.15714,0.22)",id:"Shape 1 1",vectorEffect:"non-scaling-stroke"})}),e.jsx("g",{strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",strokeDashoffset:"0",children:e.jsx("g",{id:"stage",children:e.jsxs("g",{id:"layer1 1",children:[e.jsx("path",{d:"M530.85942,356.50159v-51.62872h41.6997v51.52798z",id:"Path 1"}),e.jsx("path",{d:"M552.28263,318.13648v33.5043",id:"Path 1"}),e.jsx("path",{d:"M543.88493,318.13648v33.5043",id:"Path 1"}),e.jsx("path",{d:"M559.53362,318.13648v33.5043",id:"Path 1"}),e.jsx("path",{d:"M530.85942,305.69258c-0.16321,-0.26721 -0.24787,-0.54095 -0.24787,-0.81971c0,-2.94415 9.44578,-5.33086 21.09772,-5.33086c11.65195,0 21.09772,2.38671 21.09772,5.33086c0,0.27874 -0.08467,0.5525 -0.24787,0.81971c-1.56054,2.555 -10.30109,4.51115 -20.84985,4.51115c-10.54876,0 -19.28931,-1.95616 -20.84985,-4.51115z",id:"Path 1"}),e.jsx("path",{d:"M526.99843,299.96332l-0.62718,2.33336c-0.20632,-0.66738 0.08483,-1.417 0.62718,-2.33336z",id:"Path 1"}),e.jsx("path",{d:"M526.90801,299.89208c1.69662,-2.86672 6.73622,-6.66812 13.1139,-9.62877c6.7301,-3.12425 12.92278,-4.3711 15.64124,-3.36979l1.92001,0.76878l2.09371,1.26963l1.3539,0.82101c1.3487,0.10911 2.21953,0.51753 2.47137,1.25174c0.0889,0.25918 0.09747,0.54969 0.03094,0.86743c-0.63617,3.03834 -8.1395,8.56871 -17.94801,13.04798c-9.8085,4.47929 -18.55957,6.37187 -20.82544,4.65881c-0.23697,-0.17916 -0.403,-0.39773 -0.49191,-0.65692c-0.25631,-0.74726 0.15506,-1.75476 1.10906,-2.92539l0.37047,-1.37834z",id:"Path 1"}),e.jsx("path",{d:"",id:"Path 1",fill:"transparent"}),e.jsx("path",{d:"M534.05344,289.75448l3.4456,-2.48803l4.18002,-0.76803l0.73442,1.72l-3.4456,2.48803l-4.18002,0.76803z",id:"Path 1"})]})})})]})}),B="/dash-and-play/assets/avatarplaceholder.png",E=b("/profile")({component:F});function F(){const{characters:a,setCharacters:t}=y(),{setCharacter:r}=v(),[l,o]=c.useState(!1),[x,i]=c.useState(""),{user:d}=JSON.parse(w()),n=k(),u=()=>{t(d.id)},h=s=>{r(s),n({to:"/character"})},j=s=>{i(s.id)};return c.useEffect(()=>{u(),o(!1)},[l]),e.jsx(P,{getResetKey:()=>"reset",onCatch:()=>n({to:"/"}),children:e.jsx(C.main,{className:"flex h-full w-full gap-5",initial:{opacity:0},animate:{opacity:1},children:e.jsxs(g,{styles:"w-full flex flex-col items-start gap-10 p-5 overflow-y-scroll",children:[e.jsxs("section",{className:"flex w-full justify-between",children:[e.jsx("h1",{className:"text-5xl text-primary",children:d.user_metadata.username}),e.jsx("button",{onClick:()=>n({to:"/create-character/page1"}),className:"btn btn-ghost border-2 border-primary text-primary hover:border-primary hover:bg-primary hover:text-base-100",children:"Create Character"})]}),e.jsx("ul",{className:"flex w-full flex-col gap-2 text-xl",children:a.map(s=>{var p,f;return e.jsxs("div",{className:"relative flex w-full items-center gap-5 rounded-badge border-2 border-slate-900 p-2 transition-colors hover:cursor-pointer hover:bg-slate-800",children:[e.jsxs("li",{className:"flex h-full w-full items-center gap-5",onClick:()=>h(s),children:[e.jsx(S,{bucket:"characters",folder:"",name:s.avatar,alt:s.characterProfile.name,fallbackSrc:B}),e.jsxs("div",{className:"text-start",children:[e.jsxs("p",{children:[s.characterProfile.name,", ",s.characterProfile.level]}),e.jsx("div",{className:"h-[.5px] w-full bg-neutral"}),e.jsxs("p",{children:[s.characterProfile.race," ",(p=s.characterProfile)==null?void 0:p.subrace,","," ",s.characterProfile.class," ",(f=s.characterProfile)==null?void 0:f.subclass]})]})]}),e.jsx(z,{size:60,styles:" transition-colors rounded-badge  fill-base-300 hover:fill-slate-900 hover:stroke-secondary stroke-primary",event:()=>j(s)})]},s.id)})}),e.jsx(M,{deleteID:x,setDeleteID:i,setIsDeleted:o})]})})})}export{E as Route};
