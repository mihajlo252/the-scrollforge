import{s as v,j as e,A as G,P as C,B as x,r as i,g as F,a as M,t as S,c as q,b as B,d as z,u as L,C as U,m as R}from"./index-xebXdgSc.js";import{D as V}from"./DeleteButton-B65HDFZI.js";const $=async r=>{try{const{error:o}=await v.from("characters").delete().eq("id",r);if(o)throw o.message}catch(o){throw o}},K=({deleteID:r,setDeleteID:o,setIsDeleted:a,setIsDelete:s,toggle:t})=>{const d=async h=>{await $(h),a(!0),s(!1),o("")},l=h=>{h.preventDefault(),s(!1),o("")};return e.jsx(G,{children:t&&e.jsx(C,{closerFunc:s,toggle:t,children:e.jsxs(x,{styles:"fixed h-min px-10 py-16 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex flex-col gap-5",children:[e.jsx("p",{children:"Are you sure you want to continue?"}),e.jsxs("div",{className:"flex items-center justify-center gap-20",children:[e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>d(r),children:"Yes"}),e.jsx("button",{type:"button",className:"btn btn-primary",onClick:l,children:"Cancel"})]})]})})})},_=async(r,o,a)=>{try{const{error:s}=await v.from("characters").insert({name:r.name,characterProfile:r,profileID:o,gamemode:a});if(s)throw s.message}catch(s){throw s}},J=({children:r,setCharacterProfile:o,characterProfile:a,handleCreateCharacter:s})=>e.jsxs(x,{styles:"relative  w-[calc(60vw-5rem)] max-[1023px]:w-[calc(45vw-5rem)] xl:w-[calc(45vw-5rem)] h-min flex flex-col gap-5 justify-center items-center text-center px-20 py-10",children:[e.jsx("h2",{className:"text-4xl font-bold",children:"Create Your Character"}),e.jsxs("form",{className:"flex w-full flex-col gap-2",onSubmit:t=>s(t),children:[e.jsx("input",{type:"text",className:"input input-bordered w-full",placeholder:"Name",required:!0,onChange:t=>o({...a,name:t.target.value})}),e.jsx("input",{type:"number",className:"input input-bordered w-full",placeholder:"Level",required:!0,onChange:t=>o({...a,level:parseInt(t.target.value)})}),e.jsx("input",{type:"text",className:"input input-bordered w-full",placeholder:"Class",required:!0,onChange:t=>o({...a,class:t.target.value})}),e.jsx("input",{type:"text",className:"input input-bordered w-full",placeholder:"Subclass",onChange:t=>o({...a,subclass:t.target.value})}),e.jsx("input",{type:"text",className:"input input-bordered w-full",placeholder:"Race",required:!0,onChange:t=>o({...a,race:t.target.value})}),e.jsx("input",{type:"text",className:"input input-bordered w-full",placeholder:"Subrace",onChange:t=>o({...a,subrace:t.target.value})}),r]})]}),j=JSON.parse(`[{"id":"core_class_bard","name":"BARD","description":[{"paragraph":"Bards are the most charismatic people in all the realms. Members of this class are masters of captivation and specialize in a variety of performance types, including singing, playing musical instruments, weaving tales, or telling jokes. Whether performing for an audience or speaking to an individual, bards thrive in social situations. Members of this profession bond and train at schools or guilds, but a current of egotism runs through those of the bardic persuasion. While they may be the most likely class to bring people together, a bard of ill temper can just as easily tear a party apart."}],"domains":["GRACE","CODEX"],"startingEvasion":10,"startingHitPoints":5,"classItems":["A romance novel","A letter never opened"],"hopeFeature":{"name":"Make a Scene","description":[{"paragraph":"Spend 3 Hope to temporarily Distract a target within Close range, giving them a -2 penalty to their Difficulty."}]},"classFeatures":[{"description":[{"paragraph":"Once per session, describe how you rally the party and give yourself and each of your allies a Rally Die. At level 1, your Rally Die is a d6. A PC can spend their Rally Die to roll it, adding the result to their action roll, reaction roll, damage roll, or to clear a number of Stress equal to the result. At the end of each session, clear all unspent Rally Dice. At level 5, your Rally Die increases to a d8."}],"name":"Rally"}]},{"id":"core_class_druid","name":"DRUID","description":[{"paragraph":"Becoming a druid is more than an occupation; it's a calling for those who wish to learn from and protect the magic of the wilderness. While one might underestimate a gentle druid who practices the often-quiet work of cultivating flora, druids who channel the untamed forces of nature are terrifying to behold. Druids cultivate their abilities in small groups, often connected by a specific ethos or locale, but some choose to work alone. Through years of study and dedication, druids can learn to transform into beasts and shape nature itself."}],"domains":["SAGE","ARCANA"],"startingEvasion":10,"startingHitPoints":6,"classItems":["A small bag of rocks and bones","A strange pendant found in the dirt"],"hopeFeature":{"name":"Evolution","description":[{"paragraph":"Spend 3 Hope to transform into a Beastform without marking a Stress. When you do, choose one trait to raise by +1 until you drop out of that Beastform."}]},"classFeatures":[{"description":[{"paragraph":"Mark a Stress to magically transform into a creature of your tier or lower from the Beastform list. You can drop out of this form at any time. While transformed, you can't use weapons or cast spells from domain cards, but you can still use other features or abilities you have access to. Spells you cast before you transform stay active and last for their normal duration, and you can talk and communicate as normal. Additionally, you gain the Beastform's features, add their Evasion bonus to your Evasion, and use the trait specified in their statistics for your attack. While you're in a Beastform, your armor becomes part of your body and you mark Armor Slots as usual; when you drop out of a Beastform, those marked Armor Slots remain marked. If you mark your last Hit Point, you automatically drop out of this form."}],"name":"Beastform"},{"description":[{"paragraph":"You can perform harmless, subtle effects that involve nature -- such as causing a flower to rapidly grow, summoning a slight gust of wind, or starting a campfire -- at will."}],"name":"Wildtouch"}]},{"id":"core_class_guardian","name":"GUARDIAN","description":[{"paragraph":"The title of guardian represents an array of martial professions, speaking more to their moral compass and unshakeable fortitude than the means by which they fight. While many guardians join groups of militants for either a country or cause, they're more likely to follow those few they truly care for, majority be damned. Guardians are known for fighting with remarkable ferocity even against overwhelming odds, defending their cohort above all else. Woe betide those who harm the ally of a guardian, as the guardian will answer this injury in kind."}],"domains":["VALOR","BLADE"],"startingEvasion":9,"startingHitPoints":7,"classItems":["A totem from your mentor","A secret key"],"hopeFeature":{"name":"Frontline Tank","description":[{"paragraph":"Spend 3 Hope to clear 2 Armor Slots."}]},"classFeatures":[{"description":[{"paragraph":"Once per long rest, you can become Unstoppable. You gain an Unstoppable Die. At level 1, your Unstoppable Die is a d4. Place it on your character sheet in the space provided, starting with the 1 value facing up. After you make a damage roll that deals 1 or more Hit Points to a target, increase the Unstoppable Die value by one. When the die's value would exceed its maximum value or when the scene ends, remove the die and drop out of Unstoppable. At level 5, your Unstoppable Die increases to a d6."}],"name":"Unstoppable"},{"description":[{"paragraph":""},{"list":["You reduce the severity of physical damage by one threshold (Severe to Major, Major to Minor, Minor to None).","You add the current value of the Unstoppable Die to your damage roll.","You can't be Restrained or Vulnerable."]}],"name":"While Unstoppable, you gain the following benefits"}]},{"id":"core_class_ranger","name":"RANGER","description":[{"paragraph":"Rangers are highly skilled hunters who, despite their martial abilities, rarely lend their skills to an army. Through mastery of the body and a deep understanding of the wilderness, rangers become sly tacticians, pursuing their quarry with cunning and patience. Many rangers track and fight alongside an animal companion with whom they've forged a powerful spiritual bond. By honing their skills in the wild, rangers become expert trackers, as likely to ensnare their foes in a trap as they are to assail them head-on."}],"domains":["BONE","SAGE"],"startingEvasion":12,"startingHitPoints":6,"classItems":["A trophy from your first kill","A seemingly broken compass"],"hopeFeature":{"name":"Hold Them Off","description":[{"paragraph":"Spend 3 Hope when you succeed on an attack with a weapon to use that same roll against two additional adversaries within range of the attack."}]},"classFeatures":[{"description":[{"paragraph":"Spend a Hope and make an attack against a target. On a success, deal your attack's normal damage and temporarily make the attack's target your Focus. Until this feature ends or you make a different creature your Focus, you gain the following benefits against your Focus:"},{"list":["You know precisely what direction they are in.","When you deal damage to them, they must mark a Stress.","When you fail an attack against them, you can end your Ranger's Focus feature to reroll your Duality Dice."]}],"name":"Ranger's Focus"}]},{"id":"core_class_rogue","name":"ROGUE","description":[{"paragraph":"Rogues are scoundrels, often in both attitude and practice. Broadly known as liars and thieves, the best among this class move through the world anonymously. Utilizing their sharp wits and blades, rogues trick their foes through social manipulation as easily as breaking locks, climbing through windows, or dealing underhanded blows. These masters of magical craft manipulate shadow and movement, adding an array of useful and deadly tools to their repertoire. Rogues frequently establish guilds to meet future accomplices, hire out jobs, and hone secret skills, proving that there's honor among thieves for those who know where to look."}],"domains":["MIDNIGHT","GRACE"],"startingEvasion":12,"startingHitPoints":6,"classItems":["A set of forgery tools","A grappling hook"],"hopeFeature":{"name":"Rogue's Dodge","description":[{"paragraph":"Spend 3 Hope to gain a +2 bonus to your Evasion until the next time an attack succeeds against you. Otherwise, this bonus lasts until your next rest."}]},"classFeatures":[{"description":[{"paragraph":"Any time you would be Hidden, you are instead Cloaked. In addition to the benefits of the Hidden condition, while Cloaked you remain unseen if you are stationary when an adversary moves to where they would normally see you. After you make an attack or end a move within line of sight of an adversary, you are no longer Cloaked."}],"name":"Cloaked"},{"description":[{"paragraph":"When you succeed on an attack while Cloaked or while an ally is within Melee range of your target, add a number of d6s equal to your tier to your damage roll."},{"list":["Level 1 -> Tier 1","Levels 2-4 -> Tier 2","Levels 5-7 -> Tier 3","Levels 8-10 -> Tier 4"]}],"name":"Sneak Attack"}]},{"id":"core_class_seraph","name":"SERAPH","description":[{"paragraph":"Seraphs are divine fighters and healers imbued with sacred purpose. A wide array of deities exist within the realms, and thus numerous kinds of seraphs are appointed by these gods. Their ethos traditionally aligns with the domain or goals of their god, such as defending the weak, exacting vengeance, protecting a land or artifact, or upholding a particular faith. Some seraphs ally themselves with an army or locale, much to the satisfaction of their rulers, but other crusaders fight in opposition to the follies of the Mortal Realm. It is better to be a seraph's ally than their enemy, as they are terrifying foes to those who defy their purpose."}],"domains":["SPLENDOR","VALOR"],"startingEvasion":9,"startingHitPoints":7,"classItems":["A bundle of offerings","A sigil of your god"],"hopeFeature":{"name":"Life Support","description":[{"paragraph":"Spend 3 Hope to clear a Hit Point on an ally within Close range."}]},"classFeatures":[{"description":[{"paragraph":"At the beginning of each session, roll a number of d4s equal to your subclass's Spellcast trait and place them on your character sheet in the space provided. These are your Prayer Dice. You can spend any number of Prayer Dice to aid yourself or an ally within Far range. You can use a spent die's value to reduce incoming damage, add to a roll's result after the roll is made, or gain Hope equal to the result. At the end of each session, clear all unspent Prayer Dice."}],"name":"Prayer Dice"}]},{"id":"core_class_sorcerer","name":"SORCERER","description":[{"paragraph":"Not all innate magic users choose to hone their craft, but those who do can become powerful sorcerers. The gifts of these wielders are passed down through families, even if the family is unaware of or reluctant to practice them. A sorcerer's abilities can range from the elemental to the illusionary and beyond, and many practitioners band together into collectives based on their talents. The act of becoming a formidable sorcerer is not the practice of acquiring power, but learning to cultivate and control the power one already possesses. The magic of a misguided or undisciplined sorcerer is a dangerous force indeed."}],"domains":["ARCANA","MIDNIGHT"],"startingEvasion":10,"startingHitPoints":6,"classItems":["A whispering orb","A family heirloom"],"hopeFeature":{"name":"Volatile Magic","description":[{"paragraph":"Spend 3 Hope to reroll any number of your damage dice on an attack that deals magic damage."}]},"classFeatures":[{"description":[{"paragraph":"You can sense the presence of magical people and objects within Close range."}],"name":"Arcane Sense"},{"description":[{"paragraph":"Make a Spellcast Roll (10). On a success, you create a minor visual illusion no larger than yourself within Close range. This illusion is convincing to anyone at Close range or farther."}],"name":"Minor Illusion"},{"description":[{"paragraph":"Once per long rest, you can place a domain card from your loadout into your vault and choose to either:"},{"list":["Gain Hope equal to the level of the card.","Enhance a spell that deals damage, gaining a bonus to your damage roll equal to twice the level of the card."]}],"name":"Channel Raw Power"}]},{"id":"core_class_warrior","name":"WARRIOR","description":[{"paragraph":"Becoming a warrior requires years, often a lifetime, of training and dedication to the mastery of weapons and violence. While many who seek to fight hone only their strength, warriors understand the importance of an agile body and mind, making them some of the most sought-after fighters across the realms. Frequently, warriors find employment within an army, a band of mercenaries, or even a royal guard, but their potential is wasted in any position where they cannot continue to improve and expand their skills. Warriors are known to have a favored weapon; to come between them and their blade would be a grievous mistake."}],"domains":["BLADE","BONE"],"startingEvasion":11,"startingHitPoints":6,"classItems":["The drawing of a lover","A sharpening stone"],"hopeFeature":{"name":"No Mercy","description":[{"paragraph":"Spend 3 Hope to gain a +1 bonus to your attack rolls until your next rest."}]},"classFeatures":[{"description":[{"paragraph":"If an adversary within Melee range attempts to leave that range, make a reaction roll using a trait of your choice against their Difficulty. Choose one effect on a success, or two if you critically succeed:"},{"list":["They can't move from where they are.","You deal damage to them equal to your primary weapon's damage.","You move with them."]}],"name":"Attack of Opportunity"},{"description":[{"paragraph":"You ignore burden when equipping weapons. When you deal physical damage, you gain a bonus to your damage roll equal to your level."}],"name":"Combat Training"}]},{"id":"core_class_wizard","name":"WIZARD","description":[{"paragraph":"Whether through an institution or individual study, those known as wizards acquire and hone immense magical power over years of learning using a variety of tools, including books, stones, potions, and herbs. Some wizards dedicate their lives to mastering a particular school of magic, while others learn from a wide variety of disciplines. Many wizards become wise and powerful figures in their communities, advising rulers, providing medicines and healing, and even leading war councils. While these mages all work toward the common goal of collecting magical knowledge, wizards often have the most conflict within their own ranks, as the acquisition, keeping, and sharing of powerful secrets is a topic of intense debate that has resulted in innumerable deaths."}],"domains":["CODEX","SPLENDOR"],"startingEvasion":11,"startingHitPoints":5,"classItems":["A book you're trying to translate","A tiny, harmless elemental pet"],"hopeFeature":{"name":"Not This Time","description":[{"paragraph":"Spend 3 Hope to force an adversary within Far range to reroll an attack or damage roll."}]},"classFeatures":[{"description":[{"paragraph":"You can perform harmless, subtle magical effects at will. For example, you can change an object's color, create a smell, light a candle, cause a tiny object to float, illuminate a room, or repair a small object."}],"name":"Prestidigitation"},{"description":[{"paragraph":"Choose a number between 1 and 12. When you roll that number on a Duality Die, gain a Hope or clear a Stress."},{"paragraph":"You can change this number when you take a long rest."}],"name":"Strange Patterns"}]}]`),N=JSON.parse(`[{"id":"core_subclass_beastbound","name":"Beastbound","class":"RANGER","domains":["BONE","SAGE"],"spellcastTrait":"AGILITY","foundation":{"features":[{"name":"Companion","description":[{"paragraph":"You have an animal companion of your choice (at the GM's discretion). They stay by your side unless you tell them otherwise."},{"paragraph":"Take the Ranger Companion sheet. When you level up your character, choose a level-up option for your companion from this sheet as well."}]}]},"specialization":{"features":[{"name":"Expert Training","description":[{"paragraph":"Choose an additional level-up option for your companion."}]},{"name":"Battle-Bonded","description":[{"paragraph":"When an adversary attacks you while they're within your companion's Melee range, you gain a +2 bonus to your Evasion against the attack."}]}]},"mastery":{"features":[{"name":"Advanced Training","description":[{"paragraph":"Choose two additional level-up options for your companion."}]},{"name":"Loyal Friend","description":[{"paragraph":"Once per long rest, when the damage from an attack would mark your companion's last Stress or your last Hit Point and you're within Close range of each other, you or your companion can rush to the other's side and take that damage instead."}]}]}},{"id":"core_subclass_call_of_the_brave","name":"Call of the Brave","class":"WARRIOR","domains":["BLADE","BONE"],"foundation":{"features":[{"name":"Courage","description":[{"paragraph":"When you fail a roll with Fear, you gain a Hope."}]},{"name":"Battle Ritual","description":[{"paragraph":"Once per long rest, before you attempt something incredibly dangerous or face off against a foe who clearly outmatches you, describe what ritual you perform or preparations you make. When you do, clear 2 Stress and gain 2 Hope."}]}]},"specialization":{"features":[{"name":"Rise to the Challenge","description":[{"paragraph":"You are vigilant in the face of mounting danger. While you have 2 or fewer Hit Points unmarked, you can roll a d20 as your Hope Die."}]}]},"mastery":{"features":[{"name":"Camaraderie","description":[{"paragraph":"Your unwavering bravery is a rallying point for your allies. You can initiate a Tag Team Roll one additional time per session. Additionally, when an ally initiates a Tag Team Roll with you, they only need to spend 2 Hope to do so."}]}]}},{"id":"core_subclass_call_of_the_slayer","name":"Call of the Slayer","class":"WARRIOR","domains":["BLADE","BONE"],"foundation":{"features":[{"name":"Slayer","description":[{"paragraph":"You gain a pool of dice called Slayer Dice. On a roll with Hope, you can place a d6 on this card instead of gaining a Hope, adding the die to the pool. You can store a number of Slayer Dice equal to your Proficiency. When you make an attack roll or damage roll, you can spend any number of these Slayer Dice, rolling them and adding their result to the roll. At the end of each session, clear any unspent Slayer Dice on this card and gain a Hope per die cleared."}]}]},"specialization":{"features":[{"name":"Weapon Specialist","description":[{"paragraph":"You can wield multiple weapons with dangerous ease. When you succeed on an attack, you can spend a Hope to add one of the damage dice from your secondary weapon to the damage roll. Additionally, once per long rest when you roll your Slayer Dice, reroll any 1s."}]}]},"mastery":{"features":[{"name":"Martial Preparation","description":[{"paragraph":"You're an inspirational warrior to all who travel with you. Your party gains access to the Martial Preparation downtime move. To use this move during a rest, describe how you instruct and train with your party. You and each ally who chooses this downtime move gain a d6 Slayer Die. A PC with a Slayer Die can spend it to roll the die and add the result to an attack or damage roll of their choice."}]}]}},{"id":"core_subclass_divine_wielder","name":"Divine Wielder","class":"SERAPH","domains":["SPLENDOR","VALOR"],"spellcastTrait":"STRENGTH","foundation":{"features":[{"name":"Spirit Weapon","description":[{"paragraph":"When you have an equipped weapon with a range of Melee or Very Close, it can fly from your hand to attack an adversary within Close range and then return to you. You can mark a Stress to target an additional adversary within range with the same attack roll."}]},{"name":"Sparing Touch","description":[{"paragraph":"Once per long rest, touch a creature and clear 2 Hit Points or 2 Stress from them."}]}]},"specialization":{"features":[{"name":"Devout","description":[{"paragraph":"When you roll your Prayer Dice, you can roll an additional die and discard the lowest result. Additionally, you can use your “Sparing Touch” feature twice instead of once per long rest."}]}]},"mastery":{"features":[{"name":"Sacred Resonance","description":[{"paragraph":"When you roll damage for your “Spirit Weapon” feature, if any of the die results match, double the value of each matching die. For example, if you roll two 5s, they count as two 10s."}]}]}},{"id":"core_subclass_elemental_origin","name":"Elemental Origin","class":"SORCERER","domains":["MIDNIGHT","ARCANA"],"spellcastTrait":"INSTINCT","foundation":{"features":[{"name":"Elementalist","description":[{"paragraph":"Choose one of the following elements at character creation: Air, Earth, Fire, Lightning, or Water. You can shape this element into harmless effects. Additionally, spend a Hope and describe how your control over this element helps an action roll you're about to make, then either gain a +2 bonus to the roll or a +3 bonus to the roll's damage."}]}]},"specialization":{"features":[{"name":"Natural Evasion","description":[{"paragraph":"You can call forth your element to protect you from harm. When an attack roll against you succeeds, you can mark a Stress and describe how you use your element to defend you. When you do, roll a d6 and add its result to your Evasion against the attack."}]}]},"mastery":{"features":[{"name":"Transcendence","description":[{"paragraph":"Once per long rest, you can transform into a physical manifestation of your element. When you do, describe your transformation and choose two of the following benefits to gain until your next rest:"},{"list":["+4 bonus to your Severe threshold","+1 bonus to a character trait of your choice","+1 bonus to your Proficiency","+2 bonus to your Evasion"]}]}]}},{"id":"core_subclass_nightwalker","name":"Nightwalker","class":"ROGUE","domains":["MIDNIGHT","GRACE"],"spellcastTrait":"FINESSE","foundation":{"features":[{"name":"Shadow Stepper","description":[{"paragraph":"You can move from shadow to shadow. When you move into an area of darkness or a shadow cast by another creature or object, you can mark a Stress to disappear from where you are and reappear inside another shadow within Far range. When you reappear, you are Cloaked."}]}]},"specialization":{"features":[{"name":"Dark Cloud","description":[{"paragraph":"Make a Spellcast Roll (15). On a success, create a temporary dark cloud that covers any area within Close range. Anyone in this cloud can't see outside of it, and anyone outside of it can't see in. You're considered Cloaked from any adversary for whom the cloud blocks line of sight."}]},{"name":"Adrenaline","description":[{"paragraph":"While you're Vulnerable, add your level to your damage rolls."}]}]},"mastery":{"features":[{"name":"Fleeting Shadow","description":[{"paragraph":"Gain a permanent +1 bonus to your Evasion. You can use your “Shadow Stepper” feature to move within Very Far range."}]},{"name":"Vanishing Act","description":[{"paragraph":"Mark a Stress to become Cloaked at any time. When Cloaked from this feature, you automatically clear the Restrained condition if you have it. You remain Cloaked in this way until you roll with Fear or until your next rest."}]}]}},{"id":"core_subclass_primal_origin","name":"Primal Origin","class":"SORCERER","domains":["MIDNIGHT","ARCANA"],"spellcastTrait":"INSTINCT","foundation":{"features":[{"name":"Manipulate Magic","description":[{"paragraph":"Your primal origin allows you to modify the essence of magic itself. After you cast a spell or make an attack using a weapon that deals magic damage, you can mark a Stress to do one of the following:"},{"list":["Extend the spell or attack's reach by one range","Gain a +2 bonus to the action roll's result","Double a damage die of your choice","Hit an additional target within range"]}]}]},"specialization":{"features":[{"name":"Enchanted Aid","description":[{"paragraph":"You can enhance the magic of others with your essence. When you Help an Ally with a Spellcast Roll, you can roll a d8 as your advantage die. Once per long rest, after an ally has made a Spellcast Roll with your help, you can swap the results of their Duality Dice."}]}]},"mastery":{"features":[{"name":"Arcane Charge","description":[{"paragraph":"You can gather magical energy to enhance your capabilities. When you take magic damage, you become Charged. Alternatively, you can spend 2 Hope to become Charged. When you successfully make an attack that deals magic damage while Charged, you can clear your Charge to either gain a +10 bonus to the damage roll or gain a +3 bonus to the Difficulty of a reaction roll the spell causes the target to make. You stop being Charged at your next long rest."}]}]}},{"id":"core_subclass_school_of_knowledge","name":"School of Knowledge","class":"WIZARD","domains":["CODEX","SPLENDOR"],"spellcastTrait":"KNOWLEDGE","foundation":{"features":[{"name":"Prepared","description":[{"paragraph":"Take an additional domain card of your level or lower from a domain you have access to."}]},{"name":"Adept","description":[{"paragraph":"When you Utilize an Experience, you can mark a Stress instead of spending a Hope. If you do, double your Experience modifier for that roll."}]}]},"specialization":{"features":[{"name":"Accomplished","description":[{"paragraph":"Take an additional domain card of your level or lower from a domain you have access to."}]},{"name":"Perfect Recall","description":[{"paragraph":"Once per rest, when you recall a domain card in your vault, you can reduce its Recall Cost by 1."}]}]},"mastery":{"features":[{"name":"Brilliant","description":[{"paragraph":"Take an additional domain card of your level or lower from a domain you have access to."}]},{"name":"Honed Expertise","description":[{"paragraph":"When you use an Experience, roll a d6. On a result of 5 or higher, you can use it without spending Hope."}]}]}},{"id":"core_subclass_school_of_war","name":"School of War","class":"WIZARD","domains":["CODEX","SPLENDOR"],"spellcastTrait":"KNOWLEDGE","foundation":{"features":[{"name":"Battlemage","description":[{"paragraph":"You've focused your studies on becoming an unconquerable force on the battlefield. Gain an additional Hit Point slot."}]},{"name":"Face Your Fear","description":[{"paragraph":"When you succeed with Fear on an attack roll, you deal an extra 1d10 magic damage."}]}]},"specialization":{"features":[{"name":"Conjure Shield","description":[{"paragraph":"You can maintain a protective barrier of magic. While you have at least 2 Hope, you add your Proficiency to your Evasion."}]},{"name":"Fueled by Fear","description":[{"paragraph":"The extra magic damage from your “Face Your Fear” feature increases to 2d10."}]}]},"mastery":{"features":[{"name":"Thrive in Chaos","description":[{"paragraph":"When you succeed on an attack, you can mark a Stress after rolling damage to force the target to mark an additional Hit Point."}]},{"name":"Have No Fear","description":[{"paragraph":"The extra magic damage from your “Face Your Fear” feature increases to 3d10."}]}]}},{"id":"core_subclass_stalwart","name":"Stalwart","class":"GUARDIAN","domains":["VALOR","BLADE"],"foundation":{"features":[{"name":"Unwavering","description":[{"paragraph":"Gain a permanent +1 bonus to your damage thresholds."}]},{"name":"Iron Will","description":[{"paragraph":"When you take physical damage, you can mark an additional Armor Slot to reduce the severity."}]}]},"specialization":{"features":[{"name":"Unrelenting","description":[{"paragraph":"Gain a permanent +2 bonus to your damage thresholds."}]},{"name":"Partners-in-Arms","description":[{"paragraph":"When an ally within Very Close range takes damage, you can mark an Armor Slot to reduce the severity by one threshold."}]}]},"mastery":{"features":[{"name":"Undaunted","description":[{"paragraph":"Gain a permanent +3 bonus to your damage thresholds."}]},{"name":"Loyal Protector","description":[{"paragraph":"When an ally within Close range has 2 or fewer Hit Points and would take damage, you can mark a Stress to sprint to their side and take the damage instead."}]}]}},{"id":"core_subclass_syndicate","name":"Syndicate","class":"ROGUE","domains":["MIDNIGHT","GRACE"],"spellcastTrait":"FINESSE","foundation":{"features":[{"name":"Well-Connected","description":[{"paragraph":"When you arrive in a prominent town or environment, you know somebody who calls this place home. Give them a name, note how you think they could be useful, and choose one fact from the following list:"},{"list":["They owe me a favor, but they'll be hard to find.","They're going to ask for something in exchange.","They're always in a great deal of trouble.","We used to be together. It's a long story.","We didn't part on great terms."]}]}]},"specialization":{"features":[{"name":"Contacts Everywhere","description":[{"paragraph":"Once per session, you can briefly call on a shady contact. Choose one of the following benefits and describe what brought them here to help you in this moment:"},{"list":["They provide 1 handful of gold, a unique tool, or a mundane object that the situation requires.","On your next action roll, their help provides a +3 bonus to the result of your Hope or Fear Die.","The next time you deal damage, they snipe from the shadows, adding 2d8 to your damage roll."]}]}]},"mastery":{"features":[{"name":"Reliable Backup","description":[{"paragraph":"You can use your “Contacts Everywhere” feature three times per session. The following options are added to the list of benefits you can choose from when you use that feature:"},{"list":["When you mark 1 or more Hit Points, they can rush out to shield you, reducing the Hit Points marked by 1.","When you make a Presence Roll in conversation, they back you up. You can roll a d20 as your Hope Die."]}]}]}},{"id":"core_subclass_troubadour","name":"Troubadour","class":"BARD","domains":["GRACE","CODEX"],"spellcastTrait":"PRESENCE","foundation":{"features":[{"name":"Gifted Performer","description":[{"paragraph":"Describe how you perform for others. You can play each song once per long rest:"},{"list":["Relaxing Song: You and all allies within Close range clear a Hit Point.","Epic Song: Make a target within Close range temporarily Vulnerable.","Heartbreaking Song: You and all allies within Close range gain a Hope."]}]}]},"specialization":{"features":[{"name":"Maestro","description":[{"paragraph":"Your rallying songs steel the courage of those who listen. When you give a Rally Die to an ally, they can gain a Hope or clear a Stress."}]}]},"mastery":{"features":[{"name":"Virtuoso","description":[{"paragraph":"You are among the greatest of your craft and your skill is boundless. You can perform each of your “Gifted Performer” feature's songs twice instead of once per long rest."}]}]}},{"id":"core_subclass_vengeance","name":"Vengeance","class":"GUARDIAN","domains":["VALOR","BLADE"],"foundation":{"features":[{"name":"At Ease","description":[{"paragraph":"Gain an additional Stress slot."}]},{"name":"Revenge","description":[{"paragraph":"When an adversary within Melee range succeeds on an attack against you, you can mark 2 Stress to force the attacker to mark a Hit Point."}]}]},"specialization":{"features":[{"name":"Act of Reprisal","description":[{"paragraph":"When an adversary damages an ally within Melee range, you gain a +1 bonus to your Proficiency for the next successful attack you make against that adversary."}]}]},"mastery":{"features":[{"name":"Nemesis","description":[{"paragraph":"Spend 2 Hope to Prioritize an adversary until your next rest. When you make an attack against your Prioritized adversary, you can swap the results of your Hope and Fear Dice. You can only Prioritize one adversary at a time."}]}]}},{"id":"core_subclass_warden_of_renewal","name":"Warden of Renewal","class":"DRUID","domains":["SAGE","ARCANA"],"spellcastTrait":"INSTINCT","foundation":{"features":[{"name":"Clarity of Nature","description":[{"paragraph":"Once per long rest, you can create a space of natural serenity within Close range. When you spend a few minutes resting within the space, clear Stress equal to your Instinct, distributed as you choose between you and your allies."}]},{"name":"Regeneration","description":[{"paragraph":"Touch a creature and spend 3 Hope. That creature clears 1d4 Hit Points."}]}]},"specialization":{"features":[{"name":"Regenerative Reach","description":[{"paragraph":"You can target creatures within Very Close range with your “Regeneration” feature."}]},{"name":"Warden's Protection","description":[{"paragraph":"Once per long rest, spend 2 Hope to clear 2 Hit Points on 1d4 allies within Close range."}]}]},"mastery":{"features":[{"name":"Defender","description":[{"paragraph":"Your animal transformation embodies a healing guardian spirit. When you're in Beastform and an ally within Close range marks 2 or more Hit Points, you can mark a Stress to reduce the number of Hit Points they mark by 1."}]}]}},{"id":"core_subclass_warden_of_the_elements","name":"Warden of the Elements","class":"DRUID","domains":["SAGE","ARCANA"],"spellcastTrait":"INSTINCT","foundation":{"features":[{"name":"Elemental Incarnation","description":[{"paragraph":"Mark a Stress to Channel one of the following elements until you take Severe damage or until your next rest:"},{"list":["Fire: When an adversary within Melee range deals damage to you, they take 1d10 magic damage.","Earth: Gain a bonus to your damage thresholds equal to your Proficiency.","Water: When you deal damage to an adversary within Melee range, all other adversaries within Very Close range must mark a Stress.","Air: You can hover, gaining advantage on Agility Rolls."]}]}]},"specialization":{"features":[{"name":"Elemental Aura","description":[{"paragraph":"Once per rest while Channeling, you can assume an aura matching your element. The aura affects targets within Close range until your Channeling ends."},{"list":["Fire: When an adversary marks 1 or more Hit Points, they must also mark a Stress.","Earth: Your allies gain a +1 bonus to Strength.","Water: When an adversary deals damage to you, you can mark a Stress to move them anywhere within Very Close range of where they are.","Air: When you or an ally takes damage from an attack beyond Melee range, reduce the damage by 1d8."]}]}]},"mastery":{"features":[{"name":"Elemental Dominion","description":[{"paragraph":"You further embody your element. While Channeling, you gain the following benefit:"},{"list":["Fire: You gain a +1 bonus to your Proficiency for attacks and spells that deal damage.","Earth: When you would mark Hit Points, roll a d6 per Hit Point marked. For each result of 6, reduce the number of Hit Points you mark by 1.","Water: When an attack against you succeeds, you can mark a Stress to make the attacker temporarily Vulnerable.","Air: You gain a +1 bonus to your Evasion and can fly."]}]}]}},{"id":"core_subclass_wayfinder","name":"Wayfinder","class":"RANGER","domains":["BONE","SAGE"],"spellcastTrait":"AGILITY","foundation":{"features":[{"name":"Ruthless Predator","description":[{"paragraph":"When you make a damage roll, you can mark a Stress to gain a +1 bonus to your Proficiency. Additionally, when you deal Severe damage to an adversary, they must mark a Stress."}]},{"name":"Path Forward","description":[{"paragraph":"When you're traveling to a place you've previously visited or you carry an object that has been at the location before, you can identify the shortest, most direct path to your destination."}]}]},"specialization":{"features":[{"name":"Elusive Predator","description":[{"paragraph":"When your Focus makes an attack against you, you gain a +2 bonus to your Evasion against the attack."}]}]},"mastery":{"features":[{"name":"Apex Predator","description":[{"paragraph":"Before you make an attack roll against your Focus, you can spend a Hope. On a successful attack, you remove a Fear from the GM's Fear pool."}]}]}},{"id":"core_subclass_winged_sentinel","name":"Winged Sentinel","class":"SERAPH","domains":["SPLENDOR","VALOR"],"spellcastTrait":"STRENGTH","foundation":{"features":[{"name":"Wings of Light","description":[{"paragraph":"You can fly. While flying, you can do the following:"},{"list":["Mark a Stress to pick up and carry another willing creature approximately your size or smaller.","Spend a Hope to deal an extra 1d8 damage on a successful attack."]}]}]},"specialization":{"features":[{"name":"Ethereal Visage","description":[{"paragraph":"Your supernatural visage strikes awe and fear. While flying, you have advantage on Presence Rolls. When you succeed with Hope on a Presence Roll, you can remove a Fear from the GM's Fear pool instead of gaining Hope."}]}]},"mastery":{"features":[{"name":"Ascendant","description":[{"paragraph":"Gain a permanent +4 bonus to your Severe damage threshold."}]},{"name":"Power of the Gods","description":[{"paragraph":"While flying, you deal an extra 1d12 damage instead of 1d8 from your “Wings of Light” feature."}]}]}},{"id":"core_subclass_wordsmith","name":"Wordsmith","class":"BARD","domains":["GRACE","CODEX"],"spellcastTrait":"PRESENCE","foundation":{"features":[{"name":"Rousing Speech","description":[{"paragraph":"Once per long rest, you can give a heartfelt, inspiring speech. All allies within Far range clear 2 Stress."}]},{"name":"Heart of a Poet","description":[{"paragraph":"After you make an action roll to impress, persuade, or offend someone, you can spend a Hope to add a d4 to the roll."}]}]},"specialization":{"features":[{"name":"Eloquent","description":[{"paragraph":"Your moving words boost morale. Once per session, when you encourage an ally, you can do one of the following:"},{"list":["Allow them to find a mundane object or tool they need.","Help an Ally without spending Hope.","Give them an additional downtime move during their next rest."]}]}]},"mastery":{"features":[{"name":"Epic Poetry","description":[{"paragraph":"Your Rally Die increases to a d10. Additionally, when you Help an Ally, you can narrate the moment as if you were writing the tale of their heroism in a memoir. When you do, roll a d10 as your advantage die."}]}]}}]`),W=JSON.parse(`[{"id":"core_ancestry_clank","name":"Clank","description":[{"paragraph":"Clanks are sentient mechanical beings built from a variety of materials, including metal, wood, and stone. They can resemble humanoids, animals, or even inanimate objects. Like organic beings, their bodies come in a wide array of sizes. Because of their bespoke construction, many clanks have highly specialized physical configurations. Examples include clawed hands for grasping, wheels for movement, or built-in weaponry. Many clanks embrace body modifications for style as well as function, and members of other ancestries often turn to clank artisans to construct customized mobility aids and physical adornments. Other ancestries can create clanks, even using their own physical characteristics as inspiration, but it's also common for clanks to build one another. A clank's lifespan extends as long as they're able to acquire or craft new parts, making their physical form effectively immortal. That said, their minds are subject to the effects of time, and deteriorate as the magic that powers them loses potency."}],"features":[{"name":"Purposeful Design","description":[{"paragraph":"Decide who made you and for what purpose. At character creation, choose one of your Experiences that best aligns with this purpose and gain a permanent +1 bonus to it."}]},{"name":"Efficient","description":[{"paragraph":"When you take a short rest, you can choose a long rest move instead of a short rest move."}]}]},{"id":"core_ancestry_drakona","name":"Drakona","description":[{"paragraph":"Drakona resemble wingless dragons in humanoid form and possess a powerful elemental breath. All drakona have thick scales that provide excellent natural armor against both attacks and the forces of nature. They are large in size, ranging from 6 feet to 7 feet on average, with long sharp teeth. New teeth grow throughout a Drakona's approximately 600-year lifespan, so they are never in danger of permanently losing an incisor. Unlike their dragon ancestors, drakona don't have wings and can't fly without magical aid. Members of this ancestry pass down the element of their breath through generations, though in rare cases, a drakona's elemental power will differ from the rest of their family's."}],"features":[{"name":"Scales","description":[{"paragraph":"Your scales act as natural protection. When you would take Severe damage, you can mark a Stress to mark 1 fewer Hit Points."}]},{"name":"Elemental Breath","description":[{"paragraph":"Choose an element for your breath (such as electricity, fire, or ice). You can use this breath against a target or group of targets within Very Close range, treating it as an Instinct weapon that deals d8 magic damage using your Proficiency."}]}]},{"id":"core_ancestry_dwarf","name":"Dwarf","description":[{"paragraph":"Dwarves are short, broad, and powerfully built, with dense musculature and thick hair. Their large hands and feet, prominent noses, and heavy brows are distinctive. Dwarves are renowned for their craftsmanship, resilience, and strong familial ties. They often dwell in mountainous regions or below ground, building elaborate halls and fortresses. Their culture emphasizes tradition and honor, and their communities are close-knit, often ruled by councils of elders. Dwarves can live for centuries, and their long lives are reflected in the depth of their knowledge and the durability of their creations."}],"features":[{"name":"Thick Skin","description":[{"paragraph":"When you take Minor damage, you can mark 2 Stress instead of marking a Hit Point."}]},{"name":"Increased Fortitude","description":[{"paragraph":"Spend 3 Hope to halve incoming physical damage."}]}]},{"id":"core_ancestry_elf","name":"Elf","description":[{"paragraph":"Elves are tall, slender humanoids with pointed ears and keen senses. Their features are angular and graceful, and they move with a natural elegance. Elves are deeply attuned to the natural and magical worlds, often living in harmony with forests, rivers, and other wild places. Their lifespans are exceptionally long, sometimes spanning many centuries, and their memories are equally enduring. Elven society values art, magic, and learning, and their homes are often works of beauty seamlessly integrated into the landscape."}],"features":[{"name":"Quick Reactions","description":[{"paragraph":"Mark a Stress to gain advantage on a reaction roll."}]},{"name":"Celestial Trance","description":[{"paragraph":"During a rest, you can drop into a trance to choose an additional downtime move."}]}]},{"id":"core_ancestry_faerie","name":"Faerie","description":[{"paragraph":"Faeries are diminutive, winged humanoids with delicate, insect-like features. Their translucent wings and vibrant coloration make them stand out in any environment. Faeries are closely tied to the forces of magic and fate, often acting as intermediaries between the spirit world and mortals. Their personalities are mercurial, ranging from mischievous to benevolent, and they delight in both tricks and acts of kindness. Faeries are curious and adventurous, and their presence is often accompanied by strange omens or bursts of wild magic."}],"features":[{"name":"Luckbender","description":[{"paragraph":"Once per session, after you or a willing ally within Close range makes an action roll, you can spend 3 Hope to reroll the Duality Dice."}]},{"name":"Wings","description":[{"paragraph":"You can fly. While flying, you can mark a Stress after an adversary makes an attack against you to gain a +2 bonus to your Evasion against that attack."}]}]},{"id":"core_ancestry_faun","name":"Faun","description":[{"paragraph":"Fauns are humanoids with the lower bodies of goats, including cloven hooves and shaggy legs, and the upper bodies of humans. They are easily recognized by their curling horns, square pupils, and expressive ears. Fauns are known for their exuberance, musical talent, and love of revelry. Their communities are often found in woodlands and meadows, where they live in harmony with nature and celebrate the cycles of the seasons. Fauns value freedom, creativity, and the pursuit of pleasure, and their laughter is said to be contagious."}],"features":[{"name":"Caprine Leap","description":[{"paragraph":"You can leap anywhere within Close range as though you were using normal movement, allowing you to vault obstacles, jump across gaps, or scale barriers with ease."}]},{"name":"Kick","description":[{"paragraph":"When you succeed on an attack against a target within Melee range, you can mark a Stress to kick yourself off them, dealing an extra 2d6 damage and knocking back either yourself or the target to Very Close range."}]}]},{"id":"core_ancestry_firbolg","name":"Firbolg","description":[{"paragraph":"Firbolgs are large, gentle humanoids with bovine features, such as broad noses, long, drooping ears, and sometimes small horns. They are deeply connected to the natural world and often serve as guardians of ancient forests and sacred places. Firbolgs value peace, balance, and the quiet strength that comes from living in harmony with their surroundings. Their magic is subtle but powerful, allowing them to blend into their environment or communicate with animals and plants. Firbolgs are slow to anger but formidable when roused."}],"features":[{"name":"Charge","description":[{"paragraph":"When you succeed on an Agility Roll to move from Far or Very Far range into Melee range with one or more targets, you can mark a Stress to deal 1d12 physical damage to all targets within Melee range."}]},{"name":"Unshakable","description":[{"paragraph":"When you would mark a Stress, roll a d6. On a result of 6, don't mark it."}]}]},{"id":"core_ancestry_fungril","name":"Fungril","description":[{"paragraph":"Fungril are humanoid fungi, with bodies formed from mycelium and caps of various shapes and colors. Their skin is often spongy or rubbery, and their features can be quite alien to other ancestries. Fungril thrive in damp, dark environments, and their communities are interconnected by vast underground networks. They communicate through spores and subtle chemical signals, sharing thoughts and memories across great distances. Fungril are patient, contemplative, and possess a unique perspective on life and death, viewing both as parts of a natural cycle."}],"features":[{"name":"Fungril Network","description":[{"paragraph":"Make an Instinct Roll (12) to use your mycelial array to speak with others of your ancestry. On a success, you can communicate across any distance."}]},{"name":"Death Connection","description":[{"paragraph":"While touching a corpse that died recently, you can mark a Stress to extract one memory from the corpse related to a specific emotion or sensation of your choice."}]}]},{"id":"core_ancestry_galapa","name":"Galapa","description":[{"paragraph":"Galapa are turtle-like humanoids with large, domed shells that provide natural protection. Their leathery skin, sturdy limbs, and slow, deliberate movements are hallmarks of their ancestry. Galapa are known for their wisdom, patience, and long lifespans, often living for centuries. Their societies are structured around tradition and communal responsibility, with elders holding positions of great respect. Galapa value stability and foresight, and their advice is sought by those facing difficult decisions."}],"features":[{"name":"Shell","description":[{"paragraph":"Gain a bonus to your damage thresholds equal to your Proficiency."}]},{"name":"Retract","description":[{"paragraph":"Mark a Stress to retract into your shell. While in your shell, you have resistance to physical damage, you have disadvantage on action rolls, and you can't move."}]}]},{"id":"core_ancestry_giant","name":"Giant","description":[{"paragraph":"Giants are enormous humanoids, often towering over other ancestries. They possess broad shoulders, long limbs, and may have one, two, or three eyes. Giants are renowned for their strength, endurance, and resilience. Their societies are often organized around clans or extended families, with a strong emphasis on honor and personal achievement. Giants are capable builders and storytellers, and their oral traditions preserve the history of their people across generations. Despite their size, many giants are gentle and protective of those they consider kin."}],"features":[{"name":"Endurance","description":[{"paragraph":"Gain an additional Hit Point slot at character creation."}]},{"name":"Reach","description":[{"paragraph":"Treat any weapon, ability, spell, or other feature that has a Melee range as though it has a Very Close range instead."}]}]},{"id":"core_ancestry_goblin","name":"Goblin","description":[{"paragraph":"Goblins are small, wiry humanoids with oversized eyes and large, membranous ears. Their quick reflexes and sharp senses make them adept at navigating dark or cramped spaces. Goblins are resourceful and inventive, often repurposing discarded items into useful tools or weapons. Their communities are tight-knit and fiercely loyal, but goblins are also known for their cunning and willingness to bend rules to achieve their goals. They thrive in environments where adaptability and cleverness are prized."}],"features":[{"name":"Surefooted","description":[{"paragraph":"You ignore disadvantage on Agility Rolls."}]},{"name":"Danger Sense","description":[{"paragraph":"Once per rest, mark a Stress to force an adversary to reroll an attack against you or an ally within Very Close range."}]}]},{"id":"core_ancestry_halfling","name":"Halfling","description":[{"paragraph":"Halflings are small, cheerful humanoids with round faces, large hairy feet, and prominent ears. They are known for their hospitality, optimism, and strong sense of community. Halflings often dwell in rural areas, living in cozy homes built into hillsides or among fields and gardens. Their societies place a high value on tradition, family, and the enjoyment of simple pleasures. Halflings are remarkably resilient, able to find hope and humor even in the direst of circumstances."}],"features":[{"name":"Luckbringer","description":[{"paragraph":"At the start of each session, everyone in your party gains a Hope."}]},{"name":"Internal Compass","description":[{"paragraph":"When you roll a 1 on your Hope Die, you can reroll it."}]}]},{"id":"core_ancestry_human","name":"Human","description":[{"paragraph":"Humans are adaptable, inventive, and resilient, with a remarkable capacity for change. They are distinguished by their dexterous hands, rounded ears, and diverse appearances. Human societies are varied, ranging from nomadic tribes to sprawling cities, and their cultures are shaped by ambition, curiosity, and a drive to explore. Humans form deep bonds with other ancestries and are known for their capacity to learn new skills quickly. Their relatively short lifespans fuel a sense of urgency and determination."}],"features":[{"name":"High Stamina","description":[{"paragraph":"Gain an additional Stress slot at character creation."}]},{"name":"Adaptability","description":[{"paragraph":"When you fail a roll that utilized one of your Experiences, you can mark a Stress to reroll."}]}]},{"id":"core_ancestry_infernis","name":"Infernis","description":[{"paragraph":"Infernis are humanoids marked by sharp canine teeth, pointed ears, and horns of various shapes and sizes. Their ancestry traces back to the infernal realms, and they often possess an innate resistance to heat or fire. Infernis are passionate and ambitious, with a reputation for boldness and determination. Their societies are structured around personal achievement and strength of will, and many infernis seek to prove themselves through feats of courage or cunning. Despite their origins, infernis are not inherently evil and often strive to define their own destinies."}],"features":[{"name":"Fearless","description":[{"paragraph":"When you roll with Fear, you can mark 2 Stress to change it into a roll with Hope instead."}]},{"name":"Dread Visage","description":[{"paragraph":"You have advantage on rolls to intimidate hostile creatures."}]}]},{"id":"core_ancestry_katari","name":"Katari","description":[{"paragraph":"Katari are feline humanoids with sleek fur, retractable claws, and vertically slit pupils. Their high, triangular ears and agile bodies give them a distinctly catlike appearance. Katari are curious, independent, and quick-witted, often preferring to rely on their own skills and instincts. Their societies value personal freedom and adaptability, and katari are known for their ability to thrive in both wilderness and urban environments. Their senses are exceptionally keen, making them excellent hunters and scouts."}],"features":[{"name":"Feline Instincts","description":[{"paragraph":"When you make an Agility Roll, you can spend 2 Hope to reroll your Hope Die."}]},{"name":"Retracting Claws","description":[{"paragraph":"Make an Agility Roll to scratch a target within Melee range. On a success, they become temporarily Vulnerable."}]}]},{"id":"core_ancestry_orc","name":"Orc","description":[{"paragraph":"Orcs are powerful humanoids with broad, square features and prominent tusks that jut from their lower jaws. Their skin tones range from deep green to gray, and their physiques are built for endurance and strength. Orc societies are organized around clans and emphasize honor, loyalty, and physical prowess. They are formidable warriors, but also skilled craftsmen and hunters. Orcs value bravery and directness, and their traditions are passed down through songs, stories, and rituals."}],"features":[{"name":"Sturdy","description":[{"paragraph":"When you have 1 Hit Point remaining, attacks against you have disadvantage."}]},{"name":"Tusks","description":[{"paragraph":"When you succeed on an attack against a target within Melee range, you can spend a Hope to gore the target with your tusks, dealing an extra 1d6 damage."}]}]},{"id":"core_ancestry_ribbet","name":"Ribbet","description":[{"paragraph":"Ribbets are frog-like humanoids with smooth, moist skin, protruding eyes, and webbed hands and feet. Their legs are strong and flexible, allowing them to leap great distances or swim with ease. Ribbets are at home in wetlands, rivers, and lakes, where their keen senses and adaptability serve them well. Their societies are communal and cooperative, often organized around extended families or villages. Ribbets are cheerful and resourceful, known for their quick thinking and ability to escape danger."}],"features":[{"name":"Amphibious","description":[{"paragraph":"You can breathe and move naturally underwater."}]},{"name":"Long Tongue","description":[{"paragraph":"You can use your long tongue to grab onto things within Close range. Mark a Stress to use your tongue as a Finesse Close weapon that deals d12 physical damage using your Proficiency."}]}]},{"id":"core_ancestry_simiah","name":"Simiah","description":[{"paragraph":"Simiah are monkey- and ape-like humanoids with long limbs, prehensile feet, and expressive faces. Their bodies are covered in soft fur, and their hands and feet are equally dexterous. Simiah are agile climbers and acrobats, able to navigate trees and urban environments with ease. Their societies are lively and social, with strong bonds formed through play, storytelling, and mutual support. Simiah value curiosity, creativity, and a sense of humor, and are quick to make friends with those who share their zest for life."}],"features":[{"name":"Natural Climber","description":[{"paragraph":"You have advantage on Agility Rolls that involve balancing and climbing."}]},{"name":"Nimble","description":[{"paragraph":"Gain a permanent +1 bonus to your Evasion at character creation."}]}]}]`),H=JSON.parse(`[{"id":"core_community_highborne","name":"Highborne","description":[{"paragraph":"Being part of a highborne community means you're accustomed to a life of elegance, opulence, and prestige within the upper echelons of society. Traditionally, members of a highborne community possess incredible material wealth. While this can take a variety of forms depending on the community—including gold and other minerals, land, or controlling the means of production—this status always comes with power and influence. Highborne place great value on titles and possessions, and there is little social mobility within their ranks. Members of a highborne community often control the political and economic status of the areas in which they live due to their ability to influence people and the economy with their substantial wealth. The health and safety of the less affluent people who live in these locations often hinges on the ability of this highborne ruling class to prioritize the well‑being of their subjects over profit."}],"personalities":["amiable","candid","conniving","enterprising","ostentatious","unflappable"],"features":[{"name":"Privilege","description":[{"paragraph":"You have advantage on rolls to consort with nobles, negotiate prices, or leverage your reputation to get what you want."}]}]},{"id":"core_community_loreborne","name":"Loreborne","description":[{"paragraph":"Being part of a loreborne community means you're from a society that favors strong academic or political prowess. Loreborne communities highly value knowledge, frequently in the form of historical preservation, political advancement, scientific study, skill development, or lore and mythology compilation. Most members of these communities research in institutions built in bastions of civilization, while some eclectic few thrive in gathering information from the natural world. Some may be isolationists, operating in smaller enclaves, schools, or guilds and following their own unique ethos. Others still wield their knowledge on a larger scale, making deft political maneuvers across governmental landscapes."}],"personalities":["direct","eloquent","inquisitive","patient","rhapsodic","witty"],"features":[{"name":"Well-Read","description":[{"paragraph":"You have advantage on rolls that involve the history, culture, or politics of a prominent person or place."}]}]},{"id":"core_community_orderborne","name":"Orderborne","description":[{"paragraph":"Being part of an orderborne community means you're from a collective that focuses on discipline or faith, and you uphold a set of principles that reflect your experience there. Orderborne are frequently some of the most powerful among the surrounding communities. By aligning the members of their society around a common value or goal—such as a god, doctrine, ethos, or even a shared business or trade—the ruling bodies of these enclaves can mobilize larger populations with less effort. While orderborne communities take a variety of forms—some even profoundly pacifistic—perhaps the most feared are those that structure themselves around military prowess. In such a case, it's not uncommon for orderborne to provide soldiers for hire to other cities or countries."}],"personalities":["ambitious","benevolent","pensive","prudent","sardonic","stoic"],"features":[{"name":"Dedicated","description":[{"paragraph":"Record three sayings or values your upbringing instilled in you. Once per rest, when you describe how you're embodying one of these principles through your current action, you can roll a d20 as your Hope Die."}]}]},{"id":"core_community_ridgeborne","name":"Ridgeborne","description":[{"paragraph":"Being part of a ridgeborne community means you've called the rocky peaks and sharp cliffs of the mountainside home. Those who've lived in the mountains often consider themselves hardier than most because they've thrived among the most dangerous terrain many continents have to offer. These groups are adept at adaptation, developing unique technologies and equipment to move both people and products across difficult terrain. As such, ridgeborne grow up scrambling and climbing, making them sturdy and strong‑willed. Ridgeborne localities appear in a variety of forms—some cities carve out entire cliff faces, others construct castles of stone, and still more live in small homes on windblown peaks. Outside forces often struggle to attack ridgeborne groups, as the small militias and large military forces of the mountains are adept at utilizing their high‑ground advantage."}],"personalities":["bold","hardy","indomitable","loyal","reserved","stubborn"],"features":[{"name":"Steady","description":[{"paragraph":"You have advantage on rolls to traverse dangerous cliffs and ledges, navigate harsh environments, and use your survival knowledge."}]}]},{"id":"core_community_seaborne","name":"Seaborne","description":[{"paragraph":"Being part of a seaborne community means you lived on or near a large body of water. Seaborne communities are built, both physically and culturally, around the specific waters they call home. Some of these groups live along the shore, constructing ports for locals and travelers alike. These harbors function as centers of commerce, tourist attractions, or even just a safe place to rest after weeks of travel. Other seaborne live on the water in small boats or large ships, with the idea of “home” comprising a ship and its crew rather than any one landmass. No matter their exact location, seaborne communities are closely tied to the ocean tides and the creatures who inhabit them. Individuals from these groups are highly sought after for their sailing skills, and many become captains of vessels, whether within their own community, working for another, or even at the helm of a powerful naval operation."}],"personalities":["candid","cooperative","exuberant","fierce","resolute","weathered"],"features":[{"name":"Know the Tide","description":[{"paragraph":"You can sense the ebb and flow of life. When you roll with Fear, place a token on this card. You can hold a number of tokens equal to your level. Before you make an action roll, you can spend any number of these tokens to gain a +1 bonus to the roll for each token spent. At the end of each session, clear all unspent tokens."}]}]},{"id":"core_community_slyborne","name":"Slyborne","description":[{"paragraph":"Being part of a slyborne community means you come from a group that operates outside the law, including all manner of criminals, grifters, and con artists. Members of slyborne communities are brought together by their disreputable goals and their clever means of achieving them. Many people in these communities have an array of unscrupulous skills: forging, thievery, smuggling, and violence. People of any social class can be slyborne, from those who have garnered vast wealth and influence to those without a coin to their name. To the outside eye, slyborne might appear to be ruffians with no loyalty, but these communities possess some of the strictest codes of honor which, when broken, can result in a terrifying end for the transgressor."}],"personalities":["calculating","clever","formidable","perceptive","shrewd","tenacious"],"features":[{"name":"Scoundrel","description":[{"paragraph":"You have advantage on rolls to negotiate with criminals, detect lies, or find a safe place to hide."}]}]},{"id":"core_community_underborne","name":"Underborne","description":[{"paragraph":"Being part of an underborne community means you're from a subterranean society. Many underborne live right beneath the cities and villages of other collectives, while some live much deeper. These communities range from small family groups in burrows to massive metropolises in caverns of stone. In many locales, underborne are recognized for their incredible boldness and skill that enable great feats of architecture and engineering. Underborne are regularly hired for their bravery, as even the least daring among them has likely encountered formidable below‑ground beasts, and learning to dispatch such creatures is common practice amongst these societies. Because of the dangers of their environment, many underborne communities develop unique nonverbal languages that prove equally useful on the surface."}],"personalities":["composed","elusive","indomitable","innovative","resourceful","unpretentious"],"features":[{"name":"Low-Light Living","description":[{"paragraph":"When you're in an area with low light or heavy shadow, you have advantage on rolls to hide, investigate, or perceive details within that area."}]}]},{"id":"core_community_wanderborne","name":"Wanderborne","description":[{"paragraph":"Being part of a wanderborne community means you've lived as a nomad, forgoing a permanent home and experiencing a wide variety of cultures. Unlike many communities that are defined by their locale, wanderborne are defined by their traveling lifestyle. Because of their frequent migration, wanderborne put less value on the accumulation of material possessions in favor of acquiring information, skills, and connections. While some wanderborne are allied by a common ethos, such as a religion or a set of political or economic values, others come together after shared tragedy, such as the loss of their home or land. No matter the reason, the dangers posed by life on the road and the choice to continue down that road together mean that wanderborne are known for their unwavering loyalty."}],"personalities":["inscrutable","magnanimous","mirthful","reliable","savvy","unorthodox"],"features":[{"name":"Nomadic Pack","description":[{"paragraph":"Add a Nomadic Pack to your inventory. Once per session, you can spend a Hope to reach into this pack and pull out a mundane item that's useful to your situation. Work with the GM to figure out what item you take out."}]}]},{"id":"core_community_wildborne","name":"Wildborne","description":[{"paragraph":"Being part of a wildborne community means you lived deep within the forest. Wildborne communities are defined by their dedication to the conservation of their homelands, and many have strong religious or cultural ties to the fauna they live among. This results in unique architectural and technological advancements that favor sustainability over short‑term, high‑yield results. It is a hallmark of wildborne societies to integrate their villages and cities with the natural environment and avoid disturbing the lives of the plants and animals. While some construct their lodgings high in the branches of trees, others establish their homes on the ground beneath the forest canopy. It's not uncommon for wildborne to remain reclusive and hidden within their woodland homes."}],"personalities":["hardy","loyal","nurturing","reclusive","sagacious","vibrant"],"features":[{"name":"Lightfoot","description":[{"paragraph":"Your movement is naturally silent. You have advantage on rolls to move without being heard."}]}]}]`);function b(r){return r.charAt(0).toUpperCase()+r.slice(1).toLocaleLowerCase()}const k=({children:r})=>e.jsx("div",{className:"pr-2 flex flex-col gap-4 overflow-y-scroll h-[400px] max-[1023px]:h-[180px] min-[1440px]:h-[500px]",children:r}),X=({name:r,classes:o})=>{const[a,s]=i.useState(o.find(t=>t.name===r.toUpperCase()));return i.useEffect(()=>{s(o.find(t=>t.name===r.toUpperCase()))},[r]),e.jsxs(e.Fragment,{children:[e.jsxs("h1",{className:"text-3xl text-accent",children:[r,e.jsx("span",{className:"block text-2xl",children:a==null?void 0:a.domains.map(t=>b(t)).join(" and ")})]}),e.jsxs(k,{children:[e.jsx("p",{children:a==null?void 0:a.description[0].paragraph}),e.jsxs("ul",{className:"list-disc",children:[e.jsxs("li",{className:"list-item",children:[e.jsx("span",{className:" text-primary ",children:"Starting Evasion:"})," ",a==null?void 0:a.startingEvasion]}),e.jsxs("li",{className:"list-item",children:[e.jsx("span",{className:" text-primary ",children:"Starting Hit Points:"})," ",a==null?void 0:a.startingHitPoints]})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h3",{className:"text-lg text-accent",children:"Class Items"}),e.jsx("ul",{className:"list-disc",children:a==null?void 0:a.classItems.map(t=>e.jsx("li",{className:"list-item",children:t},t))})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h3",{className:"text-lg text-accent",children:"Hope Feature"}),e.jsx("h4",{className:"text-md text-primary",children:a==null?void 0:a.hopeFeature.name}),e.jsx("p",{children:a==null?void 0:a.hopeFeature.description[0].paragraph})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h3",{className:"text-lg text-accent",children:"Class Features"}),e.jsx("ul",{className:"list-disc",children:a==null?void 0:a.classFeatures.map(t=>{var d;return e.jsxs("li",{className:"list-item",children:[e.jsxs("span",{className:" text-primary ",children:[t.name,":"]})," ",t.description.map(l=>l.paragraph).join(" "),((d=t.description[1])==null?void 0:d.list)&&e.jsx("ul",{children:t.description[1].list.map(l=>e.jsxs("li",{children:["- ",l]},l))})]},t.name)})})]})]})]})},Z=({name:r,ancestries:o})=>{const[a,s]=i.useState(o.find(t=>t.name===r.toUpperCase()));return i.useEffect(()=>{s(o.find(t=>t.name===r))},[r]),e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-3xl text-accent",children:r}),e.jsxs(k,{children:[e.jsx("p",{children:a==null?void 0:a.description[0].paragraph}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h3",{className:"text-lg text-accent",children:"Features"}),e.jsx("ul",{className:"list-disc",children:a==null?void 0:a.features.map(t=>e.jsxs("li",{className:"list-item",children:[e.jsxs("span",{className:" text-primary ",children:[t.name,":"]})," ",t.description[0].paragraph]},t.name))})]})]})]})},Q=({name:r,communities:o})=>{const[a,s]=i.useState(o.find(t=>t.name===r.toUpperCase()));return i.useEffect(()=>{s(o.find(t=>t.name===r))},[r]),e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-3xl text-accent",children:r}),e.jsxs(k,{children:[e.jsx("p",{children:a==null?void 0:a.description[0].paragraph}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h3",{className:"text-lg text-accent",children:"Personalities"}),e.jsx("ul",{className:"list-disc",children:a==null?void 0:a.personalities.map(t=>e.jsx("li",{className:"list-item",children:b(t)},t))})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h3",{className:"text-lg text-accent",children:"Features"}),e.jsx("ul",{className:"list-disc",children:a==null?void 0:a.features.map(t=>e.jsxs("li",{className:"list-item",children:[e.jsxs("span",{className:" text-primary ",children:[t.name,":"]})," ",t.description[0].paragraph]},t.name))})]})]})]})},ee=({name:r,subclasses:o})=>{const[a,s]=i.useState(o.find(t=>t.name===r));return i.useEffect(()=>{console.log(o.find(t=>t.name===r).class),console.log(a),s(o.find(t=>t.name===r))},[r]),e.jsxs(e.Fragment,{children:[e.jsxs("h1",{className:"text-3xl text-accent",children:[r,e.jsx("span",{className:"block text-2xl",children:b(a==null?void 0:a.class)})]}),e.jsxs(k,{children:[a.spellcastTrait&&e.jsxs("p",{children:[e.jsx("span",{className:"text-primary",children:"Spellcast Trait:"})," ",b(a==null?void 0:a.spellcastTrait)]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h3",{className:"text-lg text-accent",children:"Foundation Features"}),e.jsx("ul",{className:"list-disc",children:a==null?void 0:a.foundation.features.map(t=>e.jsxs("li",{className:"list-item",children:[e.jsxs("span",{className:" text-primary ",children:[t.name,":"]})," ",t.description[0].paragraph]},t.name))})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h3",{className:"text-lg text-accent",children:"Specialization Features"}),e.jsx("ul",{className:"list-disc",children:a==null?void 0:a.specialization.features.map(t=>e.jsxs("li",{className:"list-item",children:[e.jsxs("span",{className:" text-primary ",children:[t.name,":"]})," ",t.description[0].paragraph]},t.name))})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("h3",{className:"text-lg text-accent",children:"Mastery Features"}),e.jsx("ul",{className:"list-disc",children:a==null?void 0:a.mastery.features.map(t=>e.jsxs("li",{className:"list-item",children:[e.jsxs("span",{className:" text-primary ",children:[t.name,":"]})," ",t.description[0].paragraph]},t.name))})]})]})]})},ae=({children:r,setCharacterProfileDaggerheart:o,characterProfileDaggerheart:a,handleCreateCharacter:s})=>{var h;const[t,d]=i.useState({type:"ancestry",name:"Clank"}),l=(n,u)=>{o({...a,[u]:n.target.value}),d({type:u,name:n.target.value})};return i.useEffect(()=>{var y,m;let n=(y=j.find(p=>p.name===a.class.toUpperCase()))==null?void 0:y.domains.map(p=>b(p)).join(" and ");n===void 0&&(n="");let u=(m=N.find(p=>p.class===a.class.toUpperCase()))==null?void 0:m.name;u===void 0&&(u=""),o({...a,domains:n,subclass:u})},[a.class]),i.useEffect(()=>{o({...a,class:"Bard",level:1,subclass:"Troubadour",ancestry:"Clank",community:"Highborne"}),d({type:"ancestry",name:"Clank"})},[]),e.jsxs(e.Fragment,{children:[e.jsxs(x,{styles:"relative w-[calc(56vw-5rem)] max-[1023px]:w-[calc(45vw-5rem)] xl:w-[calc(40vw-5rem)]  h-min flex flex-col gap-5 justify-center items-center text-center px-10 py-10",children:[e.jsx("h2",{className:"text-4xl font-bold",children:"Create Your Character"}),e.jsxs("form",{className:"grid grid-cols-4 w-full  gap-2",onSubmit:n=>s(n),children:[e.jsx("input",{type:"text",className:"input input-bordered w-full col-span-3",placeholder:"Name",required:!0,onChange:n=>o({...a,name:n.target.value})}),e.jsx("select",{className:"select select-bordered w-full col-span-1",required:!0,value:a.level,onChange:n=>o({...a,level:parseInt(n.target.value)}),children:Array.from({length:10},(n,u)=>u+1).map(n=>e.jsx("option",{children:n},n))}),e.jsx("select",{className:"select select-bordered w-full col-span-2",value:a.ancestry,onFocus:n=>l(n,"ancestry"),onChange:n=>l(n,"ancestry"),children:W.map(n=>e.jsxs("option",{value:n.name,children:["Ancestry: ",n.name]},n.id))}),e.jsx("select",{className:"select select-bordered w-full col-span-2",value:a.community,onFocus:n=>l(n,"community"),onChange:n=>l(n,"community"),children:H.map(n=>e.jsxs("option",{value:n.name,children:["Community: ",n.name]},n.id))}),e.jsx("select",{className:"select select-bordered w-full col-span-4",required:!0,value:a.class,onFocus:n=>l(n,"class"),onChange:n=>l(n,"class"),children:j.map(n=>e.jsxs("option",{value:b(n.name),children:["Class: ",b(n.name)]},n.id))}),e.jsx("input",{type:"text",className:"input w-full bg-accent user-select-none cursor-default  focus:outline-none col-span-4",placeholder:"Domains",required:!0,readOnly:!0,value:`Domains: ${a.domains}`}),e.jsx("select",{className:"select select-bordered w-full col-span-4",value:a.subclass,onFocus:n=>l(n,"subclass"),onChange:n=>l(n,"subclass"),children:(h=N.filter(n=>n.class===a.class.toUpperCase()))==null?void 0:h.map(n=>e.jsxs("option",{value:n.name,children:["Subclass: ",n.name]},n.id))}),r]})]}),e.jsxs("div",{className:"w-[calc(35vw-5rem)] place-self-center flex flex-col gap-5 text-left",children:[t.type==="class"&&e.jsx(X,{name:t.name,classes:j}),t.type==="subclass"&&e.jsx(ee,{name:t.name,subclasses:N}),t.type==="ancestry"&&e.jsx(Z,{name:t.name,ancestries:W}),t.type==="community"&&e.jsx(Q,{name:t.name,communities:H})]})]})},te=({openCreateCharacter:r,setOpenCreateCharacter:o,setIsSave:a,gameMode:s})=>{if(!r)return;const[t,d]=i.useState({class:"",level:0,name:"",race:"",subclass:"",subrace:""}),[l,h]=i.useState({name:"",class:"",domains:"",level:0,ancestry:"",community:"",subclass:""}),n=async u=>{u.preventDefault();const{user:y}=JSON.parse(F());s==="D&D"&&await _(t,y.id,s),s==="Daggerheart"&&await _(l,y.id,s),a(!0),o(!1)};return e.jsxs("section",{className:"flex gap-10 w-min place-content-center",children:[s==="D&D"&&e.jsx(J,{setCharacterProfile:d,characterProfile:t,handleCreateCharacter:n,children:e.jsxs("div",{className:"mt-10 flex gap-2",children:[e.jsx("button",{type:"submit",className:"btn btn-primary flex-1",children:"Create"}),e.jsx("button",{type:"button",className:"btn btn-secondary flex-1",onClick:()=>o(!1),children:"Cancel"})]})}),s==="Daggerheart"&&e.jsx(ae,{setCharacterProfileDaggerheart:h,characterProfileDaggerheart:l,handleCreateCharacter:n,children:e.jsxs("div",{className:"mt-10 flex gap-2 col-span-4",children:[e.jsx("button",{type:"submit",className:"btn btn-primary flex-1",children:"Create"}),e.jsx("button",{type:"button",className:"btn btn-secondary flex-1",onClick:()=>o(!1),children:"Cancel"})]})})]})},re=({bucket:r,characterName:o})=>{const[a,s]=i.useState(`https://iyfoqgbhaxcedpmuvfkr.supabase.co/storage/v1/object/public/${r}/${o}.png`),[t,d]=i.useState(!1),[l,h]=i.useState(!0),n=async()=>{fetch(a,{method:"HEAD"}).then(async m=>{m.ok&&h(!1)})},u=async m=>{var w;m.preventDefault();const p=(w=m.target.elements[0].files)==null?void 0:w[0];if(!p)return;if((p==null?void 0:p.size)>307200){S({style:"bg-error text-base-100",message:"File is too large! Please keep file size below 300KB."});return}const{error:g}=await v.storage.from("characters").upload(`${o}.png`,p,{cacheControl:"0",upsert:!0});g||(d(!1),h(!1),s(f=>`${f}?t=${Date.now()}`),S({style:"bg-primary text-base-100",message:"Image changed!"}))},y=async()=>{await v.storage.from("characters").remove([`${o}.png`]),s(m=>`${m}?t=${Date.now()}`),d(!1),h(!0),S({style:"bg-primary text-base-100",message:"Image removed!"})};return i.useEffect(()=>{n()},[]),e.jsxs(e.Fragment,{children:[e.jsxs("button",{type:"button",className:"relative aspect-square w-24 overflow-hidden rounded-badge border-2 border-slate-900",onClick:()=>d(!0),children:[e.jsx("img",{src:a,onError:()=>h(!0),alt:(o.charAt(0)+o.charAt(1)).toUpperCase(),className:`object-cover object-top text-center text-4xl text-primary transition-opacity ${l&&"opacity-0"}`}),e.jsx("div",{className:`absolute inset-0 place-content-center text-center text-4xl text-primary transition-opacity opacity-0 ${l&&"opacity-100"}`,children:e.jsx("p",{children:(o.charAt(0)+o.charAt(1)).toUpperCase()})}),e.jsx("div",{className:"absolute inset-0 place-content-center bg-black/50 text-lg opacity-0 transition-opacity hover:opacity-100",children:e.jsx("p",{children:"Edit"})})]}),e.jsx(C,{closerFunc:d,toggle:t,children:e.jsxs("form",{onSubmit:u,className:"flex flex-col gap-5",children:[e.jsx("h2",{className:"mb-10 text-3xl text-accent",children:"Upload Image"}),e.jsx("input",{type:"file",accept:"image/*",className:"file-input file-input-bordered file-input-accent w-full max-w-xs flex-grow place-self-center"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",className:"btn btn-accent flex-grow",children:"Save"}),e.jsx("button",{type:"button",className:"btn btn-secondary flex-grow",onClick:m=>{m.preventDefault(),d(!1)},children:"Cancel"})]}),e.jsx(M,{text:"Remove Image",style:"border-secondary py-4 text-secondary hover:bg-secondary hover:text-white",event:y})]})})]})},ne=({character:r,handleNavigateToCharacter:o})=>{var a,s;return e.jsx("li",{className:"flex h-full w-full items-center gap-5",onClick:()=>o(r),children:e.jsxs("div",{className:"text-start",children:[e.jsxs("p",{children:[r.characterProfile.name,", ",r.characterProfile.level]}),e.jsxs("p",{children:[r.characterProfile.race," ",(a=r.characterProfile)==null?void 0:a.subrace,", ",r.characterProfile.class," ",(s=r.characterProfile)==null?void 0:s.subclass]})]})})},oe=({character:r,handleNavigateToCharacter:o})=>{var a,s;return e.jsx("li",{className:"flex h-full w-full items-center gap-5",onClick:()=>o(r),children:e.jsxs("div",{className:"text-start",children:[e.jsxs("p",{children:[r.characterProfile.name,", ",r.characterProfile.level]}),e.jsxs("p",{children:[r.characterProfile.ancestry," ",r.characterProfile.community,", ",r.characterProfile.class," ",(a=r.characterProfile)==null?void 0:a.subclass,", ",(s=r.characterProfile)==null?void 0:s.domains]})]})})},ce=q("/profile")({component:se});function se(){const{characters:r,setCharacters:o}=B(),{setCharacter:a}=z(),[s,t]=i.useState(!1),[d,l]=i.useState(""),[h,n]=i.useState(!1),[u,y]=i.useState(!1),[m,p]=i.useState(!1),[g,w]=i.useState(JSON.parse(JSON.stringify(localStorage.getItem("gameMode")))??"D&D"),f=i.useRef(null),{user:A}=JSON.parse(F()),D=L(),T=()=>{o(A.id)},E=c=>{a(c),D({to:`/${g==="D&D"?"dnd":"daggerheart"}/character/`})},P=c=>{l(c.id),p(!0)},I=c=>{g==="D&D"?(w("Daggerheart"),localStorage.setItem("gameMode","Daggerheart"),c.target.innerText="Dungeons&Dragons",c.target.classList.remove("btn-accent"),c.target.classList.add("btn-primary")):(w("D&D"),localStorage.setItem("gameMode","D&D"),c.target.innerText="Daggerheart",c.target.classList.remove("btn-primary"),c.target.classList.add("btn-accent"))},O=()=>{f.current&&(g==="Daggerheart"?(f.current.innerText="Dungeons&Dragons",f.current.classList.remove("btn-accent"),f.current.classList.add("btn-primary")):(f.current.innerText="Daggerheart",f.current.classList.remove("btn-primary"),f.current.classList.add("btn-accent")))};return i.useEffect(()=>{T(),O()},[]),i.useEffect(()=>{(s||u)&&T(),t(!1),y(!1)},[s,u]),e.jsx(U,{getResetKey:()=>"reset",onCatch:()=>D({to:"/"}),children:e.jsx(R.main,{className:"flex h-full w-full gap-5",initial:{opacity:0},animate:{opacity:1},children:e.jsxs(x,{styles:"w-full flex flex-col items-start gap-5 p-5 relative",children:[e.jsxs("section",{className:"flex w-full justify-between",children:[e.jsx("h1",{className:"text-5xl text-primary",children:A.user_metadata.username}),e.jsx("button",{ref:f,className:"btn btn-accent",onClick:I,children:"Daggerheart"})]}),e.jsxs("section",{className:" h-full w-full overflow-y-scroll",children:[e.jsxs("ul",{className:"flex w-full h-1 flex-col gap-2 text-xl",children:[r.filter(c=>c.gamemode===g).length===0&&e.jsx("p",{className:"text-xl text-accent text-left w-max",children:"Nothing forged yet!"}),r.filter(c=>c.gamemode===g).sort((c,Y)=>new Date(c.created_at).getTime()-new Date(Y.created_at).getTime()).map(c=>e.jsxs(R.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.35,ease:"easeOut",delay:0},className:"relative flex w-full items-center gap-5 rounded-badge border-2 border-slate-900 p-2 transition-colors hover:cursor-pointer hover:bg-slate-800",children:[e.jsx(re,{bucket:"characters",characterName:c.characterProfile.name.toLowerCase()}),g==="D&D"&&e.jsx(ne,{character:c,handleNavigateToCharacter:E}),g==="Daggerheart"&&e.jsx(oe,{character:c,handleNavigateToCharacter:E}),e.jsx(V,{size:60,styles:" transition-colors rounded-badge  fill-base-300 hover:fill-slate-900 hover:stroke-secondary stroke-primary",event:()=>P(c)})]},c.id))]}),e.jsx(K,{toggle:m,deleteID:d,setDeleteID:l,setIsDeleted:t,setIsDelete:p})]}),e.jsx(C,{toggle:h,closerFunc:n,children:e.jsx(te,{openCreateCharacter:h,setOpenCreateCharacter:n,setIsSave:y,gameMode:g})}),e.jsx("button",{onClick:()=>n(!0),className:"btn btn-ghost btn-circle place-self-center border-2 border-primary text-primary hover:border-primary hover:bg-primary hover:text-base-100 hover:scale-[1.1]",children:"+"})]})})})}export{ce as Route};
