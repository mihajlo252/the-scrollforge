import{r as c,j as e,P as p,B as h,c as j,m as g}from"./index-CnTgWv7T.js";import{s as v}from"./sendData-CZe5cZHy.js";const N=({setEdit:s,edit:n,description:l})=>{const{state:a}=JSON.parse(localStorage.getItem("character")??"{}"),[r,o]=c.useState(a.character.descriptions.featureTraits),[i,b]=c.useState(a.character.descriptions.racialTraits),[x,u]=c.useState(!1),d=async(t,f)=>{t.preventDefault(),await v("characters",a.character.id,{descriptions:{...a.character.descriptions,[l]:f}}),u(!1),s(!1)},m=(t,f)=>{t.preventDefault(),f(t.target.value),x===!1&&(u(!0),localStorage.setItem("character",JSON.stringify({state:{character:{...a.character,descriptions:{...a.character.descriptions,[l]:t.target.value}}},version:0}))),x===!0&&u(!1)};if(l==="racialTraits")return e.jsxs("form",{className:"relative h-full w-full overflow-scroll",onSubmit:t=>d(t,i),children:[e.jsxs(p,{closerFunc:s,toggle:n,children:[e.jsx(h,{styles:"w-full h-full mx-auto flex flex-col place-self-center",children:e.jsx("textarea",{className:"text-md h-full resize-none overflow-y-auto rounded-lg bg-base-300 p-5",placeholder:"What's on your mind?",value:i,onChange:t=>m(t,b)})}),e.jsxs("div",{className:"flex flex-row gap-5",children:[e.jsx("button",{type:"submit",className:"btn btn-accent",children:"Save"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>s(!1),children:"Close"})]})]}),e.jsx("pre",{children:e.jsx("p",{className:"text-wrap",children:i})})]});if(l==="featureTraits")return e.jsxs("form",{className:"relative h-full w-full overflow-scroll",onSubmit:t=>d(t,r),children:[e.jsxs(p,{closerFunc:s,toggle:n,children:[e.jsx(h,{styles:"w-full h-full mx-auto flex flex-col place-self-center",children:e.jsx("textarea",{className:"text-md h-full w-full resize-none overflow-y-auto rounded-lg bg-base-300 px-5",placeholder:"What's on your mind?",value:r,onChange:t=>m(t,o)})}),e.jsxs("div",{className:"flex flex-row gap-5",children:[e.jsx("button",{type:"submit",className:"btn btn-accent",children:"Save"}),e.jsx("button",{className:"btn btn-secondary",onClick:()=>s(!1),children:"Close"})]})]}),e.jsx("pre",{children:e.jsx("p",{className:"text-wrap",children:r})})]})},T=j("/dnd/traits")({component:S});function S(){const[s,n]=c.useState("racialTraits"),[l,a]=c.useState(!1),r=o=>{n(o)};return e.jsx(g.main,{initial:{opacity:0},animate:{opacity:1},className:"h-full overflow-hidden",children:e.jsxs(h,{styles:" relative w-full h-full pb-5 flex-col text-start gap-2 pl-5",children:[e.jsxs("div",{className:"flex w-full gap-2 bg-base-300 pt-5",children:[e.jsx("button",{onClick:()=>r("racialTraits"),className:"btn btn-ghost",children:"Racial Traits"}),e.jsx("button",{onClick:()=>r("featureTraits"),className:"btn btn-ghost",children:"Features & Traits"}),e.jsx("button",{className:"btn btn-accent absolute right-5 top-5",onClick:()=>a(!0),type:"button",children:"Edit"})]}),e.jsx(N,{setEdit:a,edit:l,description:s})]})})}export{T as Route};
