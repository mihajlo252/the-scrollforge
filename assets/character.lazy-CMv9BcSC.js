import{r as c,j as e,B as J,t as je,P as Q,c as Ne,m as ve,L}from"./index-C1n4aATW.js";import{s as U}from"./sendData-saoM9pNH.js";import{L as Pe,D as Se,N as we}from"./Notes-D5x7sJq-.js";const y=({stat:a})=>{const o=Math.floor((a-10)/2);return o<0?0:o},D=({stat:a,proficiencyBonus:o,proficiency:t})=>t?y({stat:a})+o:y({stat:a}),u=({stat:a,proficiencyBonus:o,proficiency:t})=>t==="proficient"?y({stat:a})+o:t==="expert"?y({stat:a})+o*2:y({stat:a}),Ce=({stat:a,proficiencyBonus:o,proficiency:t})=>t==="proficient"?10+y({stat:a})+o:t==="expert"?10+y({stat:a})+o*2:10+y({stat:a}),M=({level:a})=>{if(a<5)return"2";if(a>=5&&a<=8)return"3";if(a>=9&&a<=12)return"4";if(a>=13&&a<=16)return"5";if(a>=17)return"6"},He=({setStatChange:a})=>{const{state:o}=JSON.parse(localStorage.getItem("character")),t=o.character;if(!t)return;const{characterProfile:n,stats:{primaryStats:s}}=t,[p,g]=c.useState(s.str),[i,N]=c.useState(s.dex),[m,h]=c.useState(s.con),[d,S]=c.useState(s.int),[P,x]=c.useState(s.wis),[w,C]=c.useState(s.cha),[I,$]=c.useState(n.level),v=(r,H)=>{if(r.target.value.length>2||r.target.value>30){je({style:"bg-secondary text-white",message:"You've exceeded the limit!"});return}r.target.value[0]==="0"&&(r.target.value=r.target.value.slice(1)),r.target.value===0&&(r.target.value=0),r.target.style.width=r.target.value.length+"ch",r.target.value.length==0&&(r.target.style.width="7ch"),H(parseInt(r.target.value));const{state:k}=JSON.parse(localStorage.getItem("character")),W=k.character.stats.maxHP;localStorage.setItem("character",JSON.stringify({state:{character:{...t,stats:{...t.stats,maxHP:W,primaryStats:{...t.stats.primaryStats,[r.target.name]:parseInt(r.target.value)}}}},version:0})),a(!0)},l=r=>{$(parseInt(r.target.value)||0);const{state:H}=JSON.parse(localStorage.getItem("character")),k=H.character.stats.maxHP;localStorage.setItem("character",JSON.stringify({state:{character:{...t,stats:{...t.stats,maxHP:k},characterProfile:{...t.characterProfile,level:parseInt(r.target.value)||0}}},version:0})),a(!0)};return e.jsxs(J,{styles:"grid h-full w-full grid-cols-2 items-center justify-between rounded-lg border-2 border-slate-900 bg-base-300 px-5 text-neutral",children:[e.jsx("div",{className:"flex gap-2",children:e.jsxs("div",{className:"text-start",children:[e.jsxs("p",{children:[n.name,", Level ",e.jsx("input",{type:"text",placeholder:"0",className:"max-w-[2ch] rounded-lg border-[1px] border-slate-700 bg-slate-900 text-center focus-within:outline-0",value:I??0,onChange:r=>l(r)})]}),e.jsx("hr",{}),e.jsxs("p",{children:[n.class," ",n.subclass,", ",n.race," ",n.subrace]})]})}),e.jsxs("div",{className:"flex flex-col gap-[5px] text-2xl",children:[e.jsxs("div",{className:"grid grid-cols-6",children:[e.jsx("p",{children:"STR"}),e.jsx("p",{children:"DEX"}),e.jsx("p",{children:"CON"}),e.jsx("p",{children:"INT"}),e.jsx("p",{children:"WIS"}),e.jsx("p",{children:"CHA"})]}),e.jsx("hr",{}),e.jsxs("div",{className:"grid grid-cols-6",children:[e.jsxs("div",{className:"flex items-center justify-center gap-0",children:[e.jsx("input",{type:"number",placeholder:"0",className:"max-w-[2ch] rounded-lg border-[1px] border-slate-700 bg-slate-900 text-center text-base-content focus-within:outline-0",value:p??0,name:"str",onChange:r=>v(r,g)}),e.jsxs("span",{className:"text-sm text-primary",children:["+",y({stat:p})]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-0",children:[e.jsx("input",{type:"number",placeholder:"0",name:"dex",className:"max-w-[2ch] rounded-lg border-[1px] border-slate-700 bg-slate-900 text-center text-base-content focus-within:outline-0",value:i??0,onChange:r=>v(r,N)}),e.jsxs("span",{className:"text-sm text-primary",children:["+",y({stat:i})]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-0",children:[e.jsx("input",{type:"number",placeholder:"0",name:"con",className:"max-w-[2ch] rounded-lg border-[1px] border-slate-700 bg-slate-900 text-center text-base-content focus-within:outline-0",value:m??0,onChange:r=>v(r,h)}),e.jsxs("span",{className:"text-sm text-primary",children:["+",y({stat:m})]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-0",children:[e.jsx("input",{type:"number",placeholder:"0",name:"int",className:"max-w-[2ch] rounded-lg border-[1px] border-slate-700 bg-slate-900 text-center text-base-content focus-within:outline-0",value:d??0,onChange:r=>v(r,S)}),e.jsxs("span",{className:"text-sm text-primary",children:["+",y({stat:d})]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-0",children:[e.jsx("input",{type:"number",placeholder:"0",name:"wis",className:"max-w-[2ch] rounded-lg border-[1px] border-slate-700 bg-slate-900 text-center text-base-content focus-within:outline-0",value:P??0,onChange:r=>v(r,x)}),e.jsxs("span",{className:"text-sm text-primary",children:["+",y({stat:P})]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-0",children:[e.jsx("input",{type:"number",placeholder:"0",name:"cha",className:"max-w-[2ch] rounded-lg border-[1px] border-slate-700 bg-slate-900 text-center text-base-content focus-within:outline-0",value:w??0,onChange:r=>v(r,C)}),e.jsxs("span",{className:"text-sm text-primary",children:["+",y({stat:w})]})]})]})]})]})},Ie=({maxHP:a,characterID:o})=>{const{state:t}=JSON.parse(JSON.parse(JSON.stringify(localStorage.getItem("character")))),[n,s]=c.useState(t.character.currentHP/100*(100/a)),[p,g]=c.useState(t.character.currentHP),[i,N]=c.useState(t.character.currentHP),[m,h]=c.useState(!1),[d,S]=c.useState(a),[P,x]=c.useState(!1),w=l=>{parseInt(l.target.value)===0&&s(0),s(parseInt(l.target.value)/100*(100/d)),g(parseInt(l.target.value)),m===!1&&h(!0),m===!0&&parseInt(l.target.value)===i&&h(!1)},C=()=>{p!==0&&(s((p-1)/100*(100/d)),g(p-1),m===!1&&h(!0),m===!0&&p-1===i&&h(!1))},I=()=>{p<d&&(s((p+1)/100*(100/d)),g(p+1),m===!1&&h(!0),m===!0&&p+1===i&&h(!1))},$=async(l,r)=>{l.preventDefault(),await U("characters",o,{currentHP:r,stats:{...t.character.stats,maxHP:d}}),N(r),t.character.currentHP=r,localStorage.setItem("character",JSON.stringify({state:{...t,character:{...t.character,currentHP:r,stats:{...t.character.stats,maxHP:d}}},version:1})),m===!0&&h(!1)},v=async l=>{l.preventDefault();const r=l.target.value.length===0||parseInt(l.target.value)<0?0:parseInt(l.target.value);S(r),g(k=>k+r-d);const H=p+r-d;setTimeout(()=>s(H/100*(100/r)),0),m===!1&&h(!0),m===!0&&parseInt(l.target.value)===i&&h(!1)};return e.jsxs("div",{className:"relative flex h-full w-full flex-col items-center justify-center gap-5",children:[e.jsx(Q,{closerFunc:x,toggle:P,children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2",children:[e.jsx("label",{htmlFor:"maxHP",children:"Max HP"}),e.jsx("input",{type:"number",value:d||"0",id:"maxHP",onChange:l=>v(l),className:"input input-bordered w-[10ch]"}),e.jsx("button",{type:"button",className:"btn btn-secondary mt-5 flex-1",onClick:()=>x(!1),children:"Close"})]})}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{type:"button",className:"btn btn-ghost absolute left-0 top-0 h-[2rem] min-h-[2rem] border-2 border-primary text-primary hover:bg-primary hover:text-base-100",onClick:()=>x(!0),children:"Edit"}),m&&e.jsx("form",{className:"absolute right-0 top-0 flex flex-col items-center justify-center gap-2",onSubmit:l=>$(l,p),children:e.jsx("button",{type:"submit",className:`btn h-[2rem] min-h-[2rem] btn-ghost place-self-center border-2 border-accent text-accent hover:border-accent hover:bg-accent hover:text-base-100 ${m?"":"btn-disabled"}`,children:"Save"})}),e.jsxs("div",{className:"relative h-[6rem] w-[6rem] overflow-hidden rounded-[100vh] border-4 border-primary",children:[e.jsx("div",{className:"h-full w-full origin-bottom bg-gradient-to-b from-[#5f0000] to-[#290a0a]",style:{transform:`scaleY(${n})`}}),e.jsxs("p",{className:"user-select-none absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:[p,"/",d]}),e.jsx("input",{type:"range",value:p,className:"absolute left-1/2 top-0 h-[5.5rem] w-full -translate-x-1/2 -rotate-90 touch-none opacity-0",min:0,max:d,step:1,onChange:l=>w(l)})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("button",{className:"btn btn-primary",onClick:I,children:"+"}),e.jsx("button",{className:"btn btn-primary",onClick:C,children:"-"})]})]})]})},ke=({character:a,setStatChange:o})=>{const{stats:{primaryStats:t,saveThrowsProficiency:n,skillProficiency:s},characterProfile:{level:p,class:g}}=a;let i=parseInt(M({level:p})||"0");const[N,m]=c.useState(s.acrobatics),[h,d]=c.useState(s.animalHandling),[S,P]=c.useState(s.arcana),[x,w]=c.useState(s.athletics),[C,I]=c.useState(s.deception),[$,v]=c.useState(s.history),[l,r]=c.useState(s.insight),[H,k]=c.useState(s.intimidation),[W,V]=c.useState(s.investigation),[R,Z]=c.useState(s.medicine),[B,ee]=c.useState(s.nature),[z,te]=c.useState(s.perception),[X,se]=c.useState(s.performance),[Y,ae]=c.useState(s.persuasion),[F,re]=c.useState(s.religion),[_,ce]=c.useState(s.sleightOfHand),[q,ie]=c.useState(s.stealth),[G,ne]=c.useState(s.survival),[le,oe]=c.useState(n.str),[pe,xe]=c.useState(n.dex),[me,de]=c.useState(n.con),[fe,ue]=c.useState(n.wis),[he,ye]=c.useState(n.int),[be,ge]=c.useState(n.cha),T=(b,j)=>{const{state:A}=JSON.parse(localStorage.getItem("character")),E=A.character.stats.maxHP;localStorage.setItem("character",JSON.stringify({state:{character:{...a,stats:{...a.stats,maxHP:E,skillProficiency:{...a.stats.skillProficiency,[b]:j}}}},version:0}))},K=(b,j)=>{const{state:A}=JSON.parse(localStorage.getItem("character")),E=A.character.stats.maxHP;localStorage.setItem("character",JSON.stringify({state:{character:{...a,stats:{...a.stats,maxHP:E,saveThrowsProficiency:{...a.stats.saveThrowsProficiency,[b]:j}}}}}))},f=(b,j)=>{const A=["artificer","bard","ranger","rogue","wizard","redacted"];s[b]===""?(j("proficient"),T(b,"proficient")):s[b]==="proficient"&&A.includes(g.toLowerCase())?(j("expert"),T(b,"expert")):(j(""),T(b,"")),o(!0)},O=(b,j)=>{n[b]?(j(!1),K(b,!1)):(j(!0),K(b,!0)),o(!0)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex w-full flex-col items-center gap-2",children:[e.jsx("h3",{className:"text-[1.875rem] underline",children:"Saving throws"}),e.jsxs("ul",{className:"flex gap-2 text-[1.25rem]",children:[e.jsxs("li",{className:`relative flex flex-col ${le?"text-primary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>O("str",oe)}),"STR",e.jsxs("span",{className:"text-primary",children:["+",D({stat:t.str,proficiencyBonus:i,proficiency:n.str})]})]}),e.jsxs("li",{className:`relative flex flex-col ${pe?"text-primary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>O("dex",xe)}),"DEX",e.jsxs("span",{className:"text-primary",children:["+",D({stat:t.dex,proficiencyBonus:i,proficiency:n.dex})]})]}),e.jsxs("li",{className:`relative flex flex-col ${me?"text-primary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>O("con",de)}),"CON",e.jsxs("span",{className:"text-primary",children:["+",D({stat:t.con,proficiencyBonus:i,proficiency:n.con})]})]}),e.jsxs("li",{className:`relative flex flex-col ${he?"text-primary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>O("int",ye)}),"INT",e.jsxs("span",{className:"text-primary",children:["+",D({stat:t.int,proficiencyBonus:i,proficiency:n.int})]})]}),e.jsxs("li",{className:`relative flex flex-col ${fe?"text-primary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>O("wis",ue)}),"WIS",e.jsxs("span",{className:"text-primary",children:["+",D({stat:t.wis,proficiencyBonus:i,proficiency:n.wis})]})]}),e.jsxs("li",{className:`relative flex flex-col ${be?"text-primary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>O("cha",ge)}),"CHA",e.jsxs("span",{className:"text-primary",children:["+",D({stat:t.cha,proficiencyBonus:i,proficiency:n.cha})]})]})]})]}),e.jsxs("div",{className:"flex w-full flex-col items-center gap-1",children:[e.jsx("h3",{className:"text-[1.875rem] underline",children:"Skills"}),e.jsxs("div",{className:"flex flex-row items-center gap-2",children:[e.jsxs("ul",{className:"flex flex-col items-end justify-end border-r-[1px] border-primary border-opacity-50 text-[0.85rem]",children:[e.jsxs("li",{className:`relative flex border-b-[1px] border-primary border-opacity-50 ${N==="proficient"?"text-primary":N==="expert"?"text-secondary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>f("acrobatics",m)}),"Acrobatics (Dex)",e.jsxs("span",{className:"w-[3ch] px-1 text-primary",children:["+",u({stat:t.dex,proficiencyBonus:i,proficiency:s.acrobatics})]})]}),e.jsxs("li",{className:`relative flex border-b-[1px] border-primary border-opacity-50 ${h==="proficient"?"text-primary":h==="expert"?"text-secondary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>f("animalHandling",d)}),"Animal Handling (Wis)",e.jsxs("span",{className:"w-[3ch] px-1 text-primary",children:["+",u({stat:t.wis,proficiencyBonus:i,proficiency:s.animalHandling})]})]}),e.jsxs("li",{className:`relative flex border-b-[1px] border-primary border-opacity-50 ${S==="proficient"?"text-primary":S==="expert"?"text-secondary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>f("arcana",P)}),"Arcana (Int)",e.jsxs("span",{className:"w-[3ch] px-1 text-primary",children:["+",u({stat:t.int,proficiencyBonus:i,proficiency:s.arcana})]})]}),e.jsxs("li",{className:`relative flex border-b-[1px] border-primary border-opacity-50 ${x==="proficient"?"text-primary":x==="expert"?"text-secondary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>f("athletics",w)}),"Athletics (Str)",e.jsxs("span",{className:"w-[3ch] px-1 text-primary",children:["+",u({stat:t.str,proficiencyBonus:i,proficiency:s.athletics})]})]}),e.jsxs("li",{className:`relative flex border-b-[1px] border-primary border-opacity-50 ${C==="proficient"?"text-primary":C==="expert"?"text-secondary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>f("deception",I)}),"Deception (Cha)",e.jsxs("span",{className:"w-[3ch] px-1 text-primary",children:["+",u({stat:t.cha,proficiencyBonus:i,proficiency:s.deception})]})]}),e.jsxs("li",{className:`relative flex border-b-[1px] border-primary border-opacity-50 ${$==="proficient"?"text-primary":$==="expert"?"text-secondary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>f("history",v)}),"History (Int)",e.jsxs("span",{className:"w-[3ch] px-1 text-primary",children:["+",u({stat:t.int,proficiencyBonus:i,proficiency:s.history})]})]}),e.jsxs("li",{className:`relative flex border-b-[1px] border-primary border-opacity-50 ${l==="proficient"?"text-primary":l==="expert"?"text-secondary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>f("insight",r)}),"Insight (Wis)",e.jsxs("span",{className:"w-[3ch] px-1 text-primary",children:["+",u({stat:t.wis,proficiencyBonus:i,proficiency:s.insight})]})]}),e.jsxs("li",{className:`relative flex border-b-[1px] border-primary border-opacity-50 ${H==="proficient"?"text-primary":H==="expert"?"text-secondary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>f("intimidation",k)}),"Intimidation (Cha)",e.jsxs("span",{className:"w-[3ch] px-1 text-primary",children:["+",u({stat:t.cha,proficiencyBonus:i,proficiency:s.intimidation})]})]}),e.jsxs("li",{className:`relative flex ${W==="proficient"?"text-primary":W==="expert"?"text-secondary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>f("investigation",V)}),"Investigation (Int)",e.jsxs("span",{className:"w-[3ch] px-1 text-primary",children:["+",u({stat:t.int,proficiencyBonus:i,proficiency:s.investigation})]})]})]}),e.jsxs("ul",{className:"flex flex-col items-start border-l-[1px] border-primary border-opacity-50 text-[0.85rem]",children:[e.jsxs("li",{className:`relative flex border-b-[1px] border-primary border-opacity-50 ${R==="proficient"?"text-primary":R==="expert"?"text-secondary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>f("medicine",Z)}),e.jsxs("span",{className:"w-[3ch] px-1 text-primary",children:["+",u({stat:t.wis,proficiencyBonus:i,proficiency:s.medicine})]}),"Medicine (Wis)"]}),e.jsxs("li",{className:`relative flex border-b-[1px] border-primary border-opacity-50 ${B==="proficient"?"text-primary":B==="expert"?"text-secondary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>f("nature",ee)}),e.jsxs("span",{className:"w-[3ch] px-1 text-primary",children:["+",u({stat:t.int,proficiencyBonus:i,proficiency:s.nature})]}),"Nature (Int)"]}),e.jsxs("li",{className:`relative flex border-b-[1px] border-primary border-opacity-50 ${z==="proficient"?"text-primary":z==="expert"?"text-secondary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>f("perception",te)}),e.jsxs("span",{className:"w-[3ch] px-1 text-primary",children:["+",u({stat:t.wis,proficiencyBonus:i,proficiency:s.perception})]}),"Perception (Wis)"]}),e.jsxs("li",{className:`relative flex border-b-[1px] border-primary border-opacity-50 ${X==="proficient"?"text-primary":X==="expert"?"text-secondary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>f("performance",se)}),e.jsxs("span",{className:"w-[3ch] px-1 text-primary",children:["+",u({stat:t.cha,proficiencyBonus:i,proficiency:s.performance})]}),"Performance (Cha)"]}),e.jsxs("li",{className:`relative flex border-b-[1px] border-primary border-opacity-50 ${Y==="proficient"?"text-primary":Y==="expert"?"text-secondary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>f("persuasion",ae)}),e.jsxs("span",{className:"w-[3ch] px-1 text-primary",children:["+",u({stat:t.cha,proficiencyBonus:i,proficiency:s.persuasion})]}),"Persuasion (Cha)"]}),e.jsxs("li",{className:`relative flex border-b-[1px] border-primary border-opacity-50 ${F==="proficient"?"text-primary":F==="expert"?"text-secondary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>f("religion",re)}),e.jsxs("span",{className:"w-[3ch] px-1 text-primary",children:["+",u({stat:t.int,proficiencyBonus:i,proficiency:s.religion})]}),"Religion (Int)"]}),e.jsxs("li",{className:`relative flex border-b-[1px] border-primary border-opacity-50 ${_==="proficient"?"text-primary":_==="expert"?"text-secondary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>f("sleightOfHand",ce)}),e.jsxs("span",{className:"w-[3ch] px-1 text-primary",children:["+",u({stat:t.dex,proficiencyBonus:i,proficiency:s.sleightOfHand})]}),"Sleight of Hand (Dex)"]}),e.jsxs("li",{className:`relative flex border-b-[1px] border-primary border-opacity-50 ${G==="proficient"?"text-primary":G==="expert"?"text-secondary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>f("survival",ne)}),e.jsxs("span",{className:"w-[3ch] px-1 text-primary",children:["+",u({stat:t.wis,proficiencyBonus:i,proficiency:s.survival})]}),"Survival (Wis)"]}),e.jsxs("li",{className:`relative flex ${q==="proficient"?"text-primary":q==="expert"?"text-secondary":""}`,children:[e.jsx("button",{type:"button",className:"absolute inset-0 left-0 top-0 m-0 p-0 opacity-0",onClick:()=>f("stealth",ie)}),e.jsxs("span",{className:"w-[3ch] px-1 text-primary",children:["+",u({stat:t.dex,proficiencyBonus:i,proficiency:s.stealth})]}),"Stealth (Dex)"]})]})]})]})]})},$e=({character:a,setStatChange:o})=>{const{characterProfile:{level:t},stats:{ac:n,hitDice:s,primaryStats:{wis:p,dex:g},skillProficiency:{perception:i}}}=a,[N,m]=c.useState(n),[h,d]=c.useState(s);let S=parseInt(M({level:t})||"0");const P=(x,w)=>{x.target.value[0]==="0"&&(x.target.value=x.target.value.slice(1)),w(x.target.value);const{state:C}=JSON.parse(localStorage.getItem("character")),I=C.character.stats.maxHP;localStorage.setItem("character",JSON.stringify({state:{character:{...a,stats:{...a.stats,[x.target.name]:x.target.value,maxHP:I}}},version:0})),o(!0)};return e.jsxs("ul",{className:"flex w-full flex-col items-start",children:[e.jsxs("li",{children:[" ","Passive Perception:"," ",e.jsxs("span",{className:"text-primary",children:["+",Ce({stat:p,proficiencyBonus:S,proficiency:i})]})]}),e.jsxs("li",{children:[" ","Proficiency: ",e.jsxs("span",{className:"text-primary",children:["+",M({level:a.characterProfile.level})]})]}),e.jsxs("li",{children:[" ","Initiative: ",e.jsxs("span",{className:"text-primary",children:["+",y({stat:g})]})]}),e.jsxs("li",{children:[" ","AC:"," ",e.jsx("input",{type:"number",placeholder:"0",name:"ac",className:"max-w-[4ch] rounded-lg border-[1px] border-slate-700 bg-slate-900 text-center focus-within:outline-0",value:N??"",onChange:x=>P(x,m)})]}),e.jsxs("li",{children:[" ","Hit Dice:"," ",e.jsx("input",{type:"text",placeholder:"0",name:"hitDice",className:"max-w-[6ch] rounded-lg border-[1px] border-slate-700 bg-slate-900 text-center focus-within:outline-0",value:h??"",onChange:x=>P(x,d)})]})]})},Le=Ne("/dnd/character")({component:Oe});function Oe(){const{state:a}=JSON.parse(localStorage.getItem("character")??"{}"),[o,t]=c.useState(!1),[n,s]=c.useState(!1),[p,g]=c.useState(!1);if(!a.character)return e.jsx(Pe,{});const i=async N=>{await U("characters",a.character.id,{stats:{...N},characterProfile:{...a.character.characterProfile}}),s(!1)};return c.useEffect(()=>{t(!1),o&&s(!0)},[o]),e.jsxs(ve.main,{className:"grid h-full w-full grid-rows-[.2fr_1fr] gap-5",initial:{opacity:0},animate:{opacity:1},children:[n&&e.jsx("button",{className:"btn btn-ghost absolute top-5 m-0 h-min min-h-0 place-self-center border-2 border-accent px-4 py-2 text-accent hover:border-accent hover:bg-accent hover:text-base-100 active:-translate-x-1/2",onClick:()=>i(a.character.stats),children:"Save Character"}),e.jsx(He,{setStatChange:t}),e.jsxs("section",{className:"flex gap-5",children:[e.jsx(J,{styles:"w-[50%] flex flex-col gap-5 p-5",children:e.jsx(ke,{character:a.character,setStatChange:t})}),e.jsxs("div",{className:"flex h-full w-[40%] flex-col gap-5",children:[e.jsxs("div",{className:"flex h-full w-full gap-5",children:[e.jsx(J,{styles:"w-[50%] flex justify-around items-center p-2",children:e.jsx(Ie,{maxHP:a.character.stats.maxHP,characterID:a.character.id})}),e.jsx(J,{styles:"w-[50%] flex justify-around items-center p-5",children:e.jsx(Se,{})})]}),e.jsx(J,{styles:"w-full flex justify-around items-center p-5",children:e.jsx($e,{character:a.character,setStatChange:t})})]}),e.jsx(J,{styles:"w-[10%] flex flex-col justify-start",children:e.jsxs("nav",{className:"flex flex-col gap-3 p-3",children:[e.jsx(L,{to:"/dnd/traits",className:"btn btn-primary",children:"Traits"}),e.jsx(L,{to:"/dnd/attacks",className:"btn btn-primary",children:"Attacks"}),e.jsx(L,{to:"/dnd/spells",className:"btn btn-primary",children:"Spells"}),e.jsx(L,{to:"/dnd/inspiration",className:"btn btn-primary",children:"Inspiration"}),e.jsx("button",{onClick:()=>g(!0),className:"btn btn-primary",children:"Notes"}),e.jsx(L,{to:"/chat",className:"btn btn-primary",children:"Chat"})]})})]}),e.jsx(Q,{closerFunc:g,toggle:p,children:e.jsx(we,{})})]})}export{Le as Route};
