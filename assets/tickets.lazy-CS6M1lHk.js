import{s as f,c as g,r as c,g as h,j as e,m as b,t as l}from"./index-Bk2sBgSS.js";const y=async a=>{try{const{error:s}=await f.from("tickets").insert(a);if(s)throw s.message}catch(s){throw s}},S=g("/tickets")({component:j});function j(){const[a,s]=c.useState(""),[i,n]=c.useState(""),[u,d]=c.useState("Bug Report"),{user:x}=JSON.parse(h()),m=async t=>{t.preventDefault();const r={appSection:a,description:i,user_id:x.id,type:u};if(r.appSection===""||r.description===""){l({style:"bg-error text-base-100",message:"Please fill out all fields"});return}let p;try{await y(r),l({style:"bg-success text-base-100",message:"Ticket sent!"})}catch(o){throw p=o,l({style:"bg-success text-base-100",message:"Ticket not sent! There was an error: "+o}),o}p||(s(""),n(""))};return e.jsx(b.div,{initial:{opacity:0},animate:{opacity:1},className:"h-full",children:e.jsxs("form",{className:"flex h-full w-full flex-col items-center justify-center gap-10 rounded-lg border-2 border-slate-900 bg-base-300 px-[25%] text-left text-neutral",onSubmit:t=>m(t),children:[e.jsx("h1",{className:"sticky top-0 w-full text-center text-3xl font-bold text-primary",children:"Select feature if you have a feature request or bug report if you've found one."}),e.jsx("div",{className:"flex w-full flex-col gap-2",children:e.jsxs("select",{className:"select select-bordered",value:u,onChange:t=>d(t.target.value),children:[e.jsx("option",{value:"Bug Report",children:"Bug Report"}),e.jsx("option",{value:"Feature",children:"Feature"})]})}),e.jsxs("div",{className:"flex w-full flex-col gap-5",children:[e.jsx("input",{type:"text",name:"appSection",id:"appSection",onChange:t=>s(t.target.value),value:a,placeholder:"App Section",className:"input input-bordered"}),e.jsx("textarea",{name:"ticket",id:"ticket",onChange:t=>n(t.target.value),value:i,rows:3,cols:50,placeholder:"Ticket Description",className:"textarea textarea-bordered min-h-[1rem] resize-none"})]}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit"})]})})}export{S as Route};
