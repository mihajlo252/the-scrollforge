import{j as e,r as o,c as S,m as y,L as m}from"./index-BxExJeRl.js";import{B as f}from"./BoxSection-sgoxo0Ri.js";import{s as j}from"./sendData-uHAUqHCH.js";const w=({primaryStats:s,primaryMods:a,characterProfile:r})=>e.jsxs("header",{className:"grid h-full w-full grid-cols-2 items-center justify-between rounded-lg border-2 border-slate-900 bg-base-300 px-5 text-neutral",children:[e.jsx("div",{className:"flex gap-2",children:e.jsxs("div",{className:"text-start",children:[e.jsxs("p",{children:[r.name,", ",r.level]}),e.jsx("hr",{}),e.jsxs("p",{children:[r.class," ",r.subclass,", ",r.race," ",r.subrace]})]})}),e.jsxs("div",{className:"text-2xl",children:[e.jsxs("div",{className:"grid grid-cols-6",children:[e.jsx("p",{children:"STR"}),e.jsx("p",{children:"DEX"}),e.jsx("p",{children:"CON"}),e.jsx("p",{children:"INT"}),e.jsx("p",{children:"WIS"}),e.jsx("p",{children:"CHA"})]}),e.jsx("hr",{}),e.jsxs("div",{className:"grid grid-cols-6",children:[e.jsxs("p",{children:[s.str,e.jsxs("span",{className:"text-sm",children:["+",a.str]})]}),e.jsxs("p",{children:[s.dex,e.jsxs("span",{className:"text-sm",children:["+",a.dex]})]}),e.jsxs("p",{children:[s.con,e.jsxs("span",{className:"text-sm",children:["+",a.con]})]}),e.jsxs("p",{children:[s.int,e.jsxs("span",{className:"text-sm",children:["+",a.int]})]}),e.jsxs("p",{children:[s.wis,e.jsxs("span",{className:"text-sm",children:["+",a.wis]})]}),e.jsxs("p",{children:[s.cha,e.jsxs("span",{className:"text-sm",children:["+",a.cha]})]})]})]})]}),I=({maxHP:s,characterID:a})=>{const{state:r}=JSON.parse(JSON.parse(JSON.stringify(localStorage.getItem("character")))),[x,l]=o.useState(r.character.currentHP/100*(100/s)),[t,h]=o.useState(r.character.currentHP),[c,u]=o.useState(r.character.currentHP),[i,d]=o.useState(!1),N=n=>{l(parseInt(n.target.value)/100*(100/s)),h(parseInt(n.target.value)),i===!1&&d(!0),i===!0&&parseInt(n.target.value)===c&&d(!1)},b=()=>{t!==0&&(l((t-1)/100*(100/s)),h(t-1),i===!1&&d(!0),i===!0&&t-1===c&&d(!1))},g=()=>{t<s&&(l((t+1)/100*(100/s)),h(t+1),i===!1&&d(!0),i===!0&&t+1===c&&d(!1))},v=async(n,p)=>{n.preventDefault(),await j("characters",a,{currentHP:p}),u(p),r.character.currentHP=p,localStorage.setItem("character",JSON.stringify({state:r})),i===!0&&d(!1)};return e.jsxs("div",{className:"relative flex h-full w-full items-center justify-end gap-5 pl-2",children:[i&&e.jsx("form",{onSubmit:n=>v(n,t),children:e.jsx("button",{type:"submit",className:"btn btn-accent",children:"Save"})}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("div",{className:"relative h-[120px] w-[120px] overflow-hidden rounded-[100vh] border-4 border-neutral",children:[e.jsx("div",{className:"h-full w-full origin-bottom bg-gradient-to-b from-[#560000] to-[#980000]",style:{transform:`scaleY(${x})`}}),e.jsxs("p",{className:"user-select-none absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:[t,"/",s]}),e.jsx("input",{type:"range",value:t,className:"absolute left-1/2 top-0 h-[120px] w-full -translate-x-1/2 -rotate-90 touch-none opacity-0",min:0,max:s,step:1,onChange:n=>N(n)})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("button",{className:"btn btn-primary",onClick:g,children:"+"}),e.jsx("button",{className:"btn btn-primary",onClick:b,children:"-"})]})]})]})},H=({saveThrows:s,skills:a})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex w-full flex-col items-center gap-1",children:[e.jsx("h3",{className:"text-[1.875rem] underline",children:"Saving throws"}),e.jsxs("ul",{className:"flex gap-2 text-[1.25rem]",children:[e.jsxs("li",{className:"flex flex-col",children:["STR",e.jsxs("span",{children:["+",s.str]})]}),e.jsxs("li",{className:"flex flex-col",children:["DEX",e.jsxs("span",{children:["+",s.dex]})]}),e.jsxs("li",{className:"flex flex-col",children:["CON",e.jsxs("span",{children:["+",s.con]})]}),e.jsxs("li",{className:"flex flex-col",children:["INT",e.jsxs("span",{children:["+",s.int]})]}),e.jsxs("li",{className:"flex flex-col",children:["WIS",e.jsxs("span",{children:["+",s.wis]})]}),e.jsxs("li",{className:"flex flex-col",children:["CHA",e.jsxs("span",{children:["+",s.cha]})]})]})]}),e.jsxs("div",{className:"flex w-full flex-col items-center gap-1",children:[e.jsx("h3",{className:"text-[1.875rem] underline",children:"Skills"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("ul",{className:"flex flex-col text-[0.85rem]",children:[e.jsxs("li",{className:"flex gap-2 border-b-2",children:[e.jsxs("span",{className:"border-r-2 pr-2",children:["+",a.acrobatics]}),"Acrobatics (Dex)"]}),e.jsxs("li",{className:"flex gap-2 border-b-2",children:[e.jsxs("span",{className:"border-r-2 pr-2",children:["+",a.animalHandling]}),"Animal Handling (Wis)"]}),e.jsxs("li",{className:"flex gap-2 border-b-2",children:[e.jsxs("span",{className:"border-r-2 pr-2",children:["+",a.arcana]}),"Arcana (Int)"]}),e.jsxs("li",{className:"flex gap-2 border-b-2",children:[e.jsxs("span",{className:"border-r-2 pr-2",children:["+",a.athletics]}),"Athletics (Str)"]}),e.jsxs("li",{className:"flex gap-2 border-b-2",children:[e.jsxs("span",{className:"border-r-2 pr-2",children:["+",a.deception]}),"Deception (Cha)"]}),e.jsxs("li",{className:"flex gap-2 border-b-2",children:[e.jsxs("span",{className:"border-r-2 pr-2",children:["+",a.history]}),"History (Int)"]}),e.jsxs("li",{className:"flex gap-2 border-b-2",children:[e.jsxs("span",{className:"border-r-2 pr-2",children:["+",a.insight]}),"Insight (Wis)"]}),e.jsxs("li",{className:"flex gap-2 border-b-2",children:[e.jsxs("span",{className:"border-r-2 pr-2",children:["+",a.intimidation]}),"Intimidation (Cha)"]}),e.jsxs("li",{className:"flex gap-2",children:[e.jsxs("span",{className:"border-r-2 pr-2",children:["+",a.investigation]}),"Investigation (Int)"]})]}),e.jsxs("ul",{className:"flex flex-col text-[0.85rem]",children:[e.jsxs("li",{className:"flex gap-2 border-b-2",children:[e.jsxs("span",{className:"border-r-2 pr-2",children:["+",a.medicine]}),"Medicine (Wis)"]}),e.jsxs("li",{className:"flex gap-2 border-b-2",children:[e.jsxs("span",{className:"border-r-2 pr-2",children:["+",a.nature]}),"Nature (Int)"]}),e.jsxs("li",{className:"flex gap-2 border-b-2",children:[e.jsxs("span",{className:"border-r-2 pr-2",children:["+",a.perception]}),"Perception (Wis)"]}),e.jsxs("li",{className:"flex gap-2 border-b-2",children:[e.jsxs("span",{className:"border-r-2 pr-2",children:["+",a.performance]}),"Performance (Cha)"]}),e.jsxs("li",{className:"flex gap-2 border-b-2",children:[e.jsxs("span",{className:"border-r-2 pr-2",children:["+",a.persuasion]}),"Persuasion (Cha)"]}),e.jsxs("li",{className:"flex gap-2 border-b-2",children:[e.jsxs("span",{className:"border-r-2 pr-2",children:["+",a.religion]}),"Religion (Int)"]}),e.jsxs("li",{className:"flex gap-2 border-b-2",children:[e.jsxs("span",{className:"border-r-2 pr-2",children:["+",a.sleightOfHand]}),"Sleight of Hand (Dex)"]}),e.jsxs("li",{className:"flex gap-2 border-b-2",children:[e.jsxs("span",{className:"border-r-2 pr-2",children:["+",a.survival]}),"Survival (Wis)"]}),e.jsxs("li",{className:"flex gap-2",children:[e.jsxs("span",{className:"border-r-2 pr-2",children:["+",a.stealth]}),"Stealth (Dex)"]})]})]})]})]}),C=()=>e.jsx("div",{children:"Loading..."}),P=()=>{const[s,a]=o.useState(""),[r,x]=o.useState(!1),{state:l}=JSON.parse(JSON.parse(JSON.stringify(localStorage.getItem("character")))),t=async c=>{c.preventDefault(),await j("characters",l.character.id,{notes:s}),l.character.notes=s,localStorage.setItem("character",JSON.stringify({state:l})),console.log(l),x(!1)},h=c=>{a(c.target.value),r===!1&&c.target.value!==l.character.notes&&x(!0),r===!0&&c.target.value==l.character.notes&&x(!1)};return o.useEffect(()=>{a(l.character.notes)},[l.character.notes]),e.jsxs("form",{className:"relative h-full w-full",onSubmit:c=>t(c),children:[e.jsx("textarea",{className:"text-md h-full w-full resize-none overflow-y-auto rounded-lg border-2 border-slate-900 bg-base-300 p-5",placeholder:"What's on your mind?",value:s,onChange:c=>h(c)}),r&&e.jsx("button",{type:"submit",className:"btn btn-ghost absolute right-5 top-5",children:"Save"})]})},O=({proficiency:s,initiative:a,ac:r,hitDice:x,passivePerception:l})=>e.jsxs("ul",{className:"flex w-full flex-col items-start",children:[e.jsxs("li",{children:[" Passive Perception: +",l]}),e.jsxs("li",{children:[" Proficiency: +",s]}),e.jsxs("li",{children:[" Initiative: +",a]}),e.jsxs("li",{children:[" AC: ",r]}),e.jsxs("li",{children:[" Hit Dice: ",x]})]}),R=S("/character")({component:D});function D(){const{state:s}=JSON.parse(JSON.parse(JSON.stringify(localStorage.getItem("character"))));return s.character?e.jsxs(y.main,{className:"grid h-full w-full grid-rows-[.2fr_1fr] gap-5",initial:{opacity:0},animate:{opacity:1},children:[e.jsx(w,{primaryStats:s.character.stats.primaryStats,primaryMods:s.character.stats.primaryMods,characterProfile:s.character.characterProfile}),e.jsxs("section",{className:"flex gap-5",children:[e.jsx(f,{styles:"w-[40%] flex flex-col gap-5 p-5",children:e.jsx(H,{saveThrows:s.character.stats.saveThrows,skills:s.character.stats.skills})}),e.jsxs("div",{className:"flex h-full w-[50%] flex-col gap-5",children:[e.jsxs(f,{styles:"w-full flex justify-around items-center p-5",children:[e.jsx(O,{proficiency:s.character.stats.proficiencyBonus,initiative:s.character.stats.initiative,ac:s.character.stats.ac,hitDice:s.character.stats.hitDice,passivePerception:s.character.stats.passivePerception}),e.jsx(I,{maxHP:s.character.stats.maxHP,characterID:s.character.id})]}),e.jsx(P,{})]}),e.jsx(f,{styles:"w-[10%] flex flex-col py-5",children:e.jsxs("nav",{className:"flex flex-col gap-5 p-3",children:[e.jsx(m,{to:"/traits",className:"btn btn-primary",children:"Traits"}),e.jsx(m,{to:"/inspiration",className:"btn btn-primary",children:"Inspiration"}),e.jsx(m,{to:"/attacks",className:"btn btn-primary",children:"Attacks"})]})})]})]}):e.jsx(C,{})}export{R as Route};
