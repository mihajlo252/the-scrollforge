import{c as x,j as e,r as l,m as f}from"./index-D0_g4MTg.js";import{s as g}from"./sendData-DnEboBxN.js";import{B as o}from"./BoxSection-mogyn0HN.js";const v=x("/inspiration")({component:()=>e.jsx(d,{})});function d(){let{state:a}=JSON.parse(JSON.parse(JSON.stringify(localStorage.getItem("character")))),i=a.character.stats.inspiration;const[s,n]=l.useState(i),[p,c]=l.useState(!1),u=t=>{let r;if(t!=="regular"){if(s.regular<3)return;s.regular-=3,n({...s,regular:s.regular}),a.character.stats.inspiration={...i,regular:s.regular}}r=s[t]+1,n({...s,[t]:r}),a.character.stats.inspiration={...i,[t]:r}},h=t=>{if(s[t]<1)return;let r=s[t]-1;n({...s,[t]:r}),a.character.stats.inspiration={...i,[t]:r}},m=async t=>{t.preventDefault(),localStorage.setItem("character",JSON.stringify({state:{...a,character:{...a.character,stats:{...a.character.stats,inspiration:s}}}})),await g("characters",a.character.id,{stats:{...a.character.stats,inspiration:s}}),c(!0),setTimeout(()=>c(!1),2e3)};return e.jsx(o,{styles:"w-full flex gap-5 p-5 relative",children:e.jsxs("form",{className:"flex h-full w-full flex-col justify-center",onSubmit:t=>m(t),children:[e.jsx(f.ul,{className:"flex w-full flex-col-reverse items-start gap-2",initial:{opacity:0},animate:{opacity:1},children:Object.entries(i).map(([t])=>e.jsxs("li",{className:"flex items-center gap-10",children:[e.jsx("img",{src:`https://iyfoqgbhaxcedpmuvfkr.supabase.co/storage/v1/object/public/gems/${t}.svg`,alt:`${t} inspiration gem`,width:80,height:80}),e.jsxs(o,{styles:"items-center justify-center gap-5",children:[e.jsx("button",{type:"button",className:"btn btn-ghost text-3xl",onClick:()=>h(t),children:"-"}),e.jsx("p",{className:"flex w-[1ch] justify-center text-center text-3xl",children:s[t]}),e.jsx("button",{type:"button",className:"btn btn-ghost text-3xl",onClick:()=>u(t),children:"+"})]}),e.jsx("p",{children:a.character.descriptions.inspiration[t]})]},t))}),e.jsxs("div",{className:"absolute right-5 top-5 flex items-center gap-2",children:[e.jsx("p",{className:`opacity-0 select-none pointer-events-none text-sm text-success transition-opacity duration-500 ${p?"opacity-100 select-auto pointer-events-auto":""}`,children:"Saved"}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Save"})]})]})})}export{v as Route};
