import{r as c,j as a,c as u,b as h,u as d,g as f,a as x,m as g}from"./index-DBHzNLbb.js";import{B as b}from"./BoxSection--J4AToI-.js";const j=({source:t,alt:i,fallbackSrc:n})=>{const[s,r]=c.useState(t),[p,m]=c.useState(!1),[e,o]=c.useState(!1),l=()=>{p?e||(o(!0),r(n)):(m(!0),r(t.replace(".png",".jpg")))};return a.jsx("img",{src:s,alt:i,onError:l,className:`h-[80px] w-[80px] rounded-badge border-2 border-slate-900 ${e?"opacity-50 p-2":""}`})},C=u("/profile")({component:v});function v(){const{characters:t,setCharacters:i}=h(),{setCharacter:n}=d(),{user:s}=JSON.parse(f()),r=x(),p=()=>{i(s.id)},m=e=>{n(e),r({to:"/character"})};return c.useEffect(()=>{p()},[]),a.jsx(g.main,{className:"flex h-full w-full gap-5",initial:{opacity:0},animate:{opacity:1},children:a.jsxs(b,{styles:"w-full flex flex-col items-start gap-10 p-5 overflow-y-scroll",children:[a.jsxs("section",{className:"flex w-full justify-between",children:[a.jsx("h1",{className:"text-5xl text-primary",children:s.user_metadata.username}),a.jsx("button",{onClick:()=>r({to:"/create-character/page1"}),className:"btn btn-ghost border-2 border-primary text-primary hover:border-primary hover:bg-primary hover:text-base-100",children:"Create Character"})]}),a.jsx("ul",{className:"w-full text-xl",children:t.map(e=>{var o,l;return a.jsxs("li",{className:"flex w-full items-center gap-5 rounded-badge border-2 border-slate-900 p-2 transition-colors hover:cursor-pointer hover:bg-slate-800",onClick:()=>m(e),children:[a.jsx(j,{source:`https://iyfoqgbhaxcedpmuvfkr.supabase.co/storage/v1/object/public/characters/${e.characterProfile.name.toLowerCase()}.png`,alt:e.characterProfile.name,fallbackSrc:"https://iyfoqgbhaxcedpmuvfkr.supabase.co/storage/v1/object/public/characters/avatarplaceholder.png"}),a.jsxs("div",{className:"text-start",children:[a.jsxs("p",{children:[e.characterProfile.name,", ",e.characterProfile.level]}),a.jsx("div",{className:"h-[.5px] w-full bg-neutral"}),a.jsxs("p",{children:[e.characterProfile.race," ",(o=e.characterProfile)==null?void 0:o.subrace,","," ",e.characterProfile.class," ",(l=e.characterProfile)==null?void 0:l.subclass]})]})]},e.id)})})]})})}export{C as Route};
