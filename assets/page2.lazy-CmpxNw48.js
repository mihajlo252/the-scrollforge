import{R as y,r as p,j as e,s as b,c as w,a as N,m as C,g as S}from"./index-LOm5C1X_.js";import{B as f}from"./BoxSection-BcFohzvk.js";const j=({traits:s,setTraits:r,isSave:c,setIsSave:l,description:d})=>{const[t,n]=y.useState(""),[o,u]=y.useState(!1),i=()=>{t!==""&&(r([...s,t]),n(""),l(!0))},m=()=>{localStorage.setItem("newCharacter",JSON.stringify({state:{character:{...JSON.parse(localStorage.getItem("newCharacter")||"{}").state.character,descriptions:{...JSON.parse(localStorage.getItem("newCharacter")||"{}").state.character.descriptions,[d]:s}}}})),l(!1)};return p.useEffect(()=>{c&&m()},[c]),e.jsxs("div",{className:"relative flex h-full w-full flex-col gap-8",children:[e.jsx("button",{type:"button",className:"btn btn-accent sticky top-5 z-20 self-end",onClick:()=>u(!o),children:o?"Close":"Add New"}),s.map((h,a)=>e.jsx("pre",{children:e.jsx("p",{className:"w-full text-wrap break-words",children:h})},a)),e.jsx("div",{className:`flex flex-col justify-center items-center fixed top-1/2 -translate-y-1/2 py-10 z-50 left-1/2 -translate-x-1/2 ${o?"block":"hidden"}`,children:e.jsxs(f,{styles:"h-[unset] w-max px-20 bg-opacity-90 py-10 justify-center flex-col gap-5 items-center text-start",children:[e.jsx("textarea",{className:"textarea textarea-bordered max-w-lg resize-none",placeholder:"Trait",name:"trait",cols:100,rows:10,value:t,onChange:h=>n(h.target.value)}),e.jsx("button",{type:"button",className:"btn btn-accent w-full",onClick:i,children:"Add"})]})})]})},v=({attacks:s,setAttacks:r,isSave:c,setIsSave:l,description:d})=>{const[t,n]=p.useState({name:"",type:"",range:"",attack:"",damage:"",description:""}),[o,u]=p.useState(!1),i=(a,x)=>{a.preventDefault(),x(g=>({...g,[a.target.name]:a.target.value}))},m=()=>{localStorage.setItem("newCharacter",JSON.stringify({state:{character:{...JSON.parse(localStorage.getItem("newCharacter")||"{}").state.character,descriptions:{...JSON.parse(localStorage.getItem("newCharacter")||"{}").state.character.descriptions,[d]:s}}}})),l(!1)},h=a=>{a.preventDefault(),(t.name||t.type||t.range||t.attack||t.damage)&&(r([...s,t]),n({name:"",type:"",range:"",attack:"",damage:"",description:""})),l(!0)};return p.useEffect(()=>{c&&m()},[c]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative flex h-full w-full flex-col gap-5",children:[e.jsx("button",{type:"button",className:"btn btn-accent sticky top-5 z-20 self-end",onClick:()=>u(!o),children:o?"Close":"Add New"}),s.map((a,x)=>e.jsxs(f,{styles:"grid w-full grid-cols-[1fr_3fr] h-min gap-5 px-10 py-5 border-accent",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("p",{className:"grid text-sm",children:[e.jsx("span",{className:"text-3xl underline",children:a.name}),a.type]}),e.jsxs("p",{children:["Range: ",a.range]}),e.jsxs("p",{children:["Attack: ",a.attack]}),e.jsxs("p",{children:["Damage: ",a.damage]})]}),e.jsx("pre",{children:e.jsx("p",{className:"text-wrap break-words",children:a.description})})]},x)),e.jsx("div",{className:`flex h-full flex-col justify-center items-center fixed top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2 z-50 py-10 ${o?"block":"hidden"}`,children:e.jsxs(f,{styles:"px-20 bg-opacity-90 py-10 justify-center flex-col gap-5 items-start text-start",children:[e.jsx("input",{type:"text",name:"name",placeholder:"Attack Name",className:"input w-full focus-within:outline-0",value:(t==null?void 0:t.name)||"",onChange:a=>i(a,n)}),e.jsx("input",{type:"text",name:"type",placeholder:"Type",className:"input w-full focus-within:outline-0",value:(t==null?void 0:t.type)||"",onChange:a=>i(a,n)}),e.jsx("input",{type:"text",name:"range",placeholder:"Range",className:"input w-full focus-within:outline-0",value:(t==null?void 0:t.range)||"",onChange:a=>i(a,n)}),e.jsx("input",{type:"text",name:"attack",placeholder:"Attack",className:"input w-full focus-within:outline-0",value:(t==null?void 0:t.attack)||"",onChange:a=>i(a,n)}),e.jsx("input",{type:"text",name:"damage",placeholder:"Damage",className:"input w-full focus-within:outline-0",value:(t==null?void 0:t.damage)||"",onChange:a=>i(a,n)}),e.jsx("textarea",{name:"description",placeholder:"Description",className:"textarea resize-none focus-within:outline-0",rows:4,cols:50,value:(t==null?void 0:t.description)||"",onChange:a=>i(a,n)}),e.jsx("button",{type:"button",className:"btn btn-accent w-full",onClick:a=>h(a),children:"Add"})]})})]})})},T=({spells:s,setSpells:r,isSave:c,setIsSave:l,description:d})=>{const[t,n]=p.useState({name:"",type:"",castingTime:"",range:"",duration:"",components:"",description:""}),[o,u]=p.useState(!1),i=(a,x)=>{a.preventDefault(),x(g=>({...g,[a.target.name]:a.target.value}))},m=()=>{localStorage.setItem("newCharacter",JSON.stringify({state:{character:{...JSON.parse(localStorage.getItem("newCharacter")||"{}").state.character,descriptions:{...JSON.parse(localStorage.getItem("newCharacter")||"{}").state.character.descriptions,[d]:s}}}})),l(!1)},h=a=>{a.preventDefault(),(t.name||t.type||t.castingTime||t.range||t.duration||t.components||t.description)&&(r([...s,t]),n({name:"",type:"",castingTime:"",range:"",duration:"",components:"",description:""})),l(!0)};return p.useEffect(()=>{c&&m()},[c]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative flex h-full w-full flex-col gap-5",children:[e.jsx("button",{type:"button",className:"btn btn-accent sticky top-5 z-20 self-end",onClick:()=>u(!o),children:o?"Close":"Add New"}),s.map((a,x)=>e.jsxs(f,{styles:"grid w-full grid-cols-[1fr_3fr] h-min gap-5 px-10 py-5 border-accent",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("p",{className:"grid text-sm",children:[e.jsx("span",{className:"text-3xl underline",children:a.name}),a.type]}),e.jsxs("p",{children:["Casting Time: ",a.castingTime]}),e.jsxs("p",{children:["Range: ",a.range]}),e.jsxs("p",{children:["Duration: ",a.duration]}),e.jsxs("p",{children:["Components: ",a.components]})]}),e.jsx("pre",{children:e.jsx("p",{className:"text-wrap break-words",children:a.description})})]},x)),e.jsx("div",{className:`flex h-full flex-col justify-center items-center fixed top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2 z-50 py-10 ${o?"block":"hidden"}`,children:e.jsxs(f,{styles:"px-20 bg-opacity-90 py-10 justify-center flex-col gap-5 items-start text-start",children:[e.jsx("input",{type:"text",name:"name",placeholder:"Spell Name",className:"input w-full focus-within:outline-0",value:(t==null?void 0:t.name)||"",onChange:a=>i(a,n)}),e.jsx("input",{type:"text",name:"type",placeholder:"Type",className:"input w-full focus-within:outline-0",value:(t==null?void 0:t.type)||"",onChange:a=>i(a,n)}),e.jsx("input",{type:"text",name:"castingTime",placeholder:"Casting Time",className:"input w-full focus-within:outline-0",value:(t==null?void 0:t.castingTime)||"",onChange:a=>i(a,n)}),e.jsx("input",{type:"text",name:"range",placeholder:"Range",className:"input w-full focus-within:outline-0",value:(t==null?void 0:t.range)||"",onChange:a=>i(a,n)}),e.jsx("input",{type:"text",name:"duration",placeholder:"Duration",className:"input w-full focus-within:outline-0",value:(t==null?void 0:t.duration)||"",onChange:a=>i(a,n)}),e.jsx("input",{type:"text",name:"components",placeholder:"Components",className:"input w-full focus-within:outline-0",value:(t==null?void 0:t.components)||"",onChange:a=>i(a,n)}),e.jsx("textarea",{name:"description",placeholder:"Description",className:"textarea resize-none focus-within:outline-0",rows:4,cols:50,value:(t==null?void 0:t.description)||"",onChange:a=>i(a,n)}),e.jsx("button",{type:"button",className:"btn btn-accent w-full",onClick:a=>h(a),children:"Add"})]})})]})})},k=({description:s})=>{const{state:r}=JSON.parse(localStorage.getItem("newCharacter")||"{}"),[c,l]=p.useState(!1),[d,t]=p.useState(r==null?void 0:r.character.descriptions.racialTraits),[n,o]=p.useState(r==null?void 0:r.character.descriptions.featureTraits),[u,i]=p.useState(r==null?void 0:r.character.descriptions.attacks),[m,h]=p.useState(r==null?void 0:r.character.descriptions.spells);if(s==="racialTraits")return e.jsx(j,{traits:d,setTraits:t,isSave:c,setIsSave:l,description:s});if(s==="featureTraits")return e.jsx(j,{traits:n,setTraits:o,isSave:c,setIsSave:l,description:s});if(s==="attacks")return e.jsx(v,{attacks:u,setAttacks:i,isSave:c,setIsSave:l,description:s});if(s==="spells")return e.jsx(T,{spells:m,setSpells:h,isSave:c,setIsSave:l,description:s})},A=async(s,r)=>{try{const{error:c}=await b.from("characters").insert({name:s.name,characterProfile:s.characterProfile,stats:s.stats,descriptions:s.descriptions,currentHP:s.currentHP,profileID:r});if(c)throw c.message}catch(c){throw c}},O=w("/create-character/page2")({component:D});function D(){const[s,r]=p.useState("racialTraits"),c=N(),l=t=>{r(t)},d=async t=>{t.preventDefault();const n=JSON.parse(localStorage.getItem("newCharacter")||"{}").state.character,{user:o}=JSON.parse(S()),u=await A(n,o.id);c({to:"/profile"}),console.log("Here is the data: ",u)};return e.jsxs(C.div,{className:"flex h-full w-full gap-2 overflow-hidden",initial:{opacity:0},animate:{opacity:1},children:[e.jsx("button",{type:"submit",className:"align-self-end btn btn-ghost w-[2%] self-center rounded-lg border-2 border-slate-900 bg-base-300 text-neutral",onClick:()=>c({to:"/create-character/page1"}),children:"<"}),e.jsxs(f,{styles:"w-full px-5 flex-col text-start gap-2 overflow-y-scroll pt-0",children:[e.jsxs("div",{className:"sticky -top-5 z-10 flex w-full gap-2 bg-base-300 pt-5",children:[e.jsx("button",{type:"button",onClick:()=>l("racialTraits"),className:`btn ${s==="racialTraits"?"btn-primary":""}`,children:"Racial Traits"}),e.jsx("button",{type:"button",onClick:()=>l("featureTraits"),className:`btn ${s==="featureTraits"?"btn-primary":""}`,children:"Features & Traits"}),e.jsx("button",{type:"button",onClick:()=>l("attacks"),className:`btn ${s==="attacks"?"btn-primary":""}`,children:"Attacks"}),e.jsx("button",{type:"button",onClick:()=>l("spells"),className:`btn ${s==="spells"?"btn-primary":""}`,children:"Spells"})]}),e.jsx(k,{description:s})]}),e.jsx("button",{type:"submit",className:"align-self-end btn btn-ghost w-[2%] self-center rounded-lg border-2 border-slate-900 bg-base-300 text-neutral",onClick:d,children:">"})]})}export{O as Route};
