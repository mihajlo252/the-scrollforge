import{r as t,M as $,j as d,e as z,P as L,f as S,h as A,i as D,m as K}from"./index-BmVCYnAX.js";class N extends t.Component{getSnapshotBeforeUpdate(i){const e=this.props.childRef.current;if(e&&i.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=e.offsetHeight||0,n.width=e.offsetWidth||0,n.top=e.offsetTop,n.left=e.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function O({children:s,isPresent:i}){const e=t.useId(),n=t.useRef(null),C=t.useRef({width:0,height:0,top:0,left:0}),{nonce:p}=t.useContext($);return t.useInsertionEffect(()=>{const{width:u,height:r,top:h,left:o}=C.current;if(i||!n.current||!u||!r)return;n.current.dataset.motionPopId=e;const c=document.createElement("style");return p&&(c.nonce=p),document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${e}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${r}px !important;
            top: ${h}px !important;
            left: ${o}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[i]),d.jsx(N,{isPresent:i,childRef:n,sizeRef:C,children:t.cloneElement(s,{ref:n})})}const T=({children:s,initial:i,isPresent:e,onExitComplete:n,custom:C,presenceAffectsLayout:p,mode:u})=>{const r=z(U),h=t.useId(),o=t.useCallback(f=>{r.set(f,!0);for(const y of r.values())if(!y)return;n&&n()},[r,n]),c=t.useMemo(()=>({id:h,initial:i,isPresent:e,custom:C,onExitComplete:o,register:f=>(r.set(f,!1),()=>r.delete(f))}),p?[Math.random(),o]:[e,o]);return t.useMemo(()=>{r.forEach((f,y)=>r.set(y,!1))},[e]),t.useEffect(()=>{!e&&!r.size&&n&&n()},[e]),u==="popLayout"&&(s=d.jsx(O,{isPresent:e,children:s})),d.jsx(L.Provider,{value:c,children:s})};function U(){return new Map}const v=s=>s.key||"";function w(s){const i=[];return t.Children.forEach(s,e=>{t.isValidElement(e)&&i.push(e)}),i}const F=({children:s,custom:i,initial:e=!0,onExitComplete:n,presenceAffectsLayout:C=!0,mode:p="sync",propagate:u=!1})=>{const[r,h]=S(u),o=t.useMemo(()=>w(s),[s]),c=u&&!r?[]:o.map(v),f=t.useRef(!0),y=t.useRef(o),g=z(()=>new Map),[b,k]=t.useState(o),[m,j]=t.useState(o);A(()=>{f.current=!1,y.current=o;for(let a=0;a<m.length;a++){const l=v(m[a]);c.includes(l)?g.delete(l):g.get(l)!==!0&&g.set(l,!1)}},[m,c.length,c.join("-")]);const R=[];if(o!==b){let a=[...o];for(let l=0;l<m.length;l++){const x=m[l],P=v(x);c.includes(P)||(a.splice(l,0,x),R.push(x))}p==="wait"&&R.length&&(a=R),j(w(a)),k(o);return}const{forceRender:E}=t.useContext(D);return d.jsx(d.Fragment,{children:m.map(a=>{const l=v(a),x=u&&!r?!1:o===m||c.includes(l),P=()=>{if(g.has(l))g.set(l,!0);else return;let M=!0;g.forEach(I=>{I||(M=!1)}),M&&(E==null||E(),j(y.current),u&&(h==null||h()),n&&n())};return d.jsx(T,{isPresent:x,initial:!f.current||e?void 0:!1,custom:x?void 0:i,presenceAffectsLayout:C,mode:p,onExitComplete:x?void 0:P,children:a},l)})})},G=({children:s,closerFunc:i})=>d.jsxs(K.div,{className:"fixed left-0 top-0 isolate z-50 box-border flex h-full w-full flex-col items-center justify-center gap-5 px-36 py-5",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.35,ease:"easeOut",delay:0},children:[d.jsx("div",{className:"margin-0 padding-0 absolute inset-0 z-[-1] bg-black/80",onClick:()=>i(!1)}),s]});export{F as A,G as P};
